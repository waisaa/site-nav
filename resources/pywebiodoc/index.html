

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PyWebIO 1.6.0 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/pywebio.js"></script>
        <script src="_static/tabs.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pywebio.css" type="text/css" />
  <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="_static/_static/css/theme.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> PyWebIO
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><p class="caption"><span class="caption-text">使用手册</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-guide">User’s guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#input">输入</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#output">输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#run-application">Run application</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#more-about-pywebio">More about PyWebIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#last-but-not-least">Last but not least</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-input"><code class="docutils literal notranslate"><span class="pre">pywebio.input</span></code> — 输入模块</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#functions-list">函数清单</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#functions-doc">函数文档</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-output"><code class="docutils literal notranslate"><span class="pre">pywebio.output</span></code> — 输出模块</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#functions-list">函数清单</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#output-scope">输出域Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#content-outputting">内容输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#other-interactions">其他交互</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#layout-and-style">布局与样式</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-session"><code class="docutils literal notranslate"><span class="pre">pywebio.session</span></code> — 会话相关</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-platform"><code class="docutils literal notranslate"><span class="pre">pywebio.platform</span></code> — 应用部署</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#directory-deploy">Directory Deploy</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#application-deploy">Application Deploy</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#other">其他</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pin"><code class="docutils literal notranslate"><span class="pre">pywebio.pin</span></code> — 持续性输入</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#pin-widgets">Pin widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#pin-utils">Pin utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-advanced">高级特性</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#start-multiple-applications-with-start-server">使用start_server()启动多应用</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#integration-with-web-framework">与Web框架整合</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#coroutine-based-session">基于协程的会话</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-libraries_support">第三方库生态</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#build-stand-alone-app">构建stand-alone App</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#data-visualization">数据可视化</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-releases">Release notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v1.6">What’s new in PyWebIO 1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v1.5">What’s new in PyWebIO 1.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v1.4">What’s new in PyWebIO 1.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v1.3.0">What’s new in PyWebIO 1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v1.2.0">What’s new in PyWebIO 1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v1.1.0">What’s new in PyWebIO 1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v1.0.0">What’s new in PyWebIO 1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v0.3.0">What’s new in PyWebIO 0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-releases/v0.2.0">What’s new in PyWebIO 0.2</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Battery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-battery"><code class="docutils literal notranslate"><span class="pre">pywebio_battery</span></code> — PyWebIO battery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#functions-list">Functions list</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">实现文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-spec">服务器-客户端通信协议</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#command">Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#event">Event</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">PyWebIO</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>PyWebIO 1.6.0 文档</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/wang0618/PyWebIO/blob/doc/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pywebio">
<h1>PyWebIO<a class="headerlink" href="#pywebio" title="永久链接至标题">¶</a></h1>
<p>PyWebIO提供了一系列命令式的交互函数来在浏览器上获取用户输入和进行输出，将浏览器变成了一个“富文本终端”，可以用于构建简单的Web应用或基于浏览器的GUI应用。 使用PyWebIO，开发者能像编写终端脚本一样(基于input和print进行交互)来编写应用，无需具备HTML和JS的相关知识； PyWebIO还可以方便地整合进现有的Web服务。非常适合快速构建对UI要求不高的应用。</p>
<div class="section" id="features">
<h2>特性<a class="headerlink" href="#features" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p>使用同步而不是基于回调的方式获取输入，代码编写逻辑更自然</p></li>
<li><p>非声明式布局，布局方式简单高效</p></li>
<li><p>代码侵入性小，旧脚本代码仅需修改输入输出逻辑便可改造为Web服务</p></li>
<li><p>支持整合到现有的Web服务，目前支持与Flask、Django、Tornado、aiohttp、 FastAPI(Starlette)框架集成</p></li>
<li><p>同时支持基于线程的执行模型和基于协程的执行模型</p></li>
<li><p>支持结合第三方库实现数据可视化</p></li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="永久链接至标题">¶</a></h2>
<p>稳定版:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pywebio</span>
</pre></div>
</div>
<p>开发版:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">aliyun</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">wang0618</span><span class="o">/</span><span class="n">pywebio</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="n">archive</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
<p><strong>系统要求</strong>: PyWebIO要求 Python 版本在 3.5.2 及以上</p>
</div>
<div class="section" id="hello-world">
<span id="hello-word"></span><h2>Hello, world<a class="headerlink" href="#hello-world" title="永久链接至标题">¶</a></h2>
<p>这是一个使用PyWebIO计算 <a class="reference external" href="https://en.wikipedia.org/wiki/Body_mass_index">BMI指数</a> 的脚本:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywebio.input</span> <span class="kn">import</span> <span class="nb">input</span><span class="p">,</span> <span class="n">FLOAT</span>
<span class="kn">from</span> <span class="nn">pywebio.output</span> <span class="kn">import</span> <span class="n">put_text</span>

<span class="k">def</span> <span class="nf">bmi</span><span class="p">():</span>
    <span class="n">height</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入你的身高(cm)：&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">FLOAT</span><span class="p">)</span>
    <span class="n">weight</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;请输入你的体重(kg)：&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">FLOAT</span><span class="p">)</span>

    <span class="n">BMI</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">/</span> <span class="p">(</span><span class="n">height</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>

    <span class="n">top_status</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">14.9</span><span class="p">,</span> <span class="s1">&#39;极瘦&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mf">18.4</span><span class="p">,</span> <span class="s1">&#39;偏瘦&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="mf">22.9</span><span class="p">,</span> <span class="s1">&#39;正常&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mf">27.5</span><span class="p">,</span> <span class="s1">&#39;过重&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="mf">40.0</span><span class="p">,</span> <span class="s1">&#39;肥胖&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="s1">&#39;非常肥胖&#39;</span><span class="p">)]</span>

    <span class="k">for</span> <span class="n">top</span><span class="p">,</span> <span class="n">status</span> <span class="ow">in</span> <span class="n">top_status</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">BMI</span> <span class="o">&lt;=</span> <span class="n">top</span><span class="p">:</span>
            <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;你的 BMI 值: </span><span class="si">%.1f</span><span class="s1">，身体状态：</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">BMI</span><span class="p">,</span> <span class="n">status</span><span class="p">))</span>
            <span class="k">break</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">bmi</span><span class="p">()</span>
</pre></div>
</div>
<p>如果没有使用PyWebIO，这只是一个非常简单的脚本，而通过使用PyWebIO提供的输入输出函数，你可以在浏览器中与代码进行交互：</p>
<a class="reference internal image-reference" href="_images/demo.gif"><img alt="_images/demo.gif" class="align-center" src="_images/demo.gif" style="width: 450px;" /></a>
<p>将上面代码最后一行对 <code class="docutils literal notranslate"><span class="pre">bmi()</span></code> 的直接调用改为使用 <a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.start_server(bmi,</span> <span class="pre">port=80)</span></code></a> 便可以在80端口提供 <code class="docutils literal notranslate"><span class="pre">bmi()</span></code> 服务( <a class="reference external" href="http://pywebio-demos.pywebio.online/bmi">在线Demo</a> )。</p>
<p>将 <code class="docutils literal notranslate"><span class="pre">bmi()</span></code> 服务整合到现有的Web框架请参考 <a class="reference internal" href="index.html#integration-web-framework"><span class="std std-ref">与Web框架集成</span></a> 。</p>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="永久链接至标题">¶</a></h2>
<p>这个文档同时也提供 <a class="reference external" href="https://readthedocs.org/projects/pywebio/downloads/">PDF 和 Epub 格式</a>.</p>
<div class="toctree-wrapper compound">
<span id="document-guide"></span><div class="section" id="user-s-guide">
<h3>User’s guide<a class="headerlink" href="#user-s-guide" title="永久链接至标题">¶</a></h3>
<p>如果你接触过Web开发，你可能对接下来描述的PyWebIO的用法感到不太习惯，不同于传统Web开发的后端实现接口、前端进行展示交互的模式，在PyWebIO中，所有的逻辑都通过编写Python代码实现。</p>
<p>你可以按照编写控制台程序的逻辑编写PyWebIO应用，只不过这里的终端变成了浏览器。通过PyWebIO提供的命令式API，你可以简单地调用 <code class="docutils literal notranslate"><span class="pre">put_text()</span></code> 、 <code class="docutils literal notranslate"><span class="pre">put_image()</span></code> 、 <code class="docutils literal notranslate"><span class="pre">put_table()</span></code> 等函数输出文本、图片、表格等内容到浏览器，也可以调用 <code class="docutils literal notranslate"><span class="pre">input()</span></code> 、 <code class="docutils literal notranslate"><span class="pre">select()</span></code> 、 <code class="docutils literal notranslate"><span class="pre">file_upload()</span></code> 等函数在浏览器上显示不同表单来接收用户的输入。此外PyWebIO中还提供了点击事件、布局等支持，让你可以使用最少的代码完成与用户的交互，并尽可能提供良好的用户体验。</p>
<p>本篇使用指南从几个方面对PyWebIO的使用进行介绍，覆盖了PyWebIO的绝大部分特性。本文档中大部分示例代码的右上方都有一个Demo链接，点击后可以在线预览代码的运行效果。</p>
<div class="section" id="input">
<h4>输入<a class="headerlink" href="#input" title="永久链接至标题">¶</a></h4>
<p>输入函数都定义在 <a class="reference internal" href="index.html#document-input"><span class="doc">pywebio.input</span></a> 模块中，可以使用 <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">pywebio.input</span> <span class="pre">import</span> <span class="pre">*</span></code> 引入。</p>
<p>调用输入函数会在浏览器上弹出一个输入表单来获取输入。PyWebIO的输入函数是阻塞式的（和Python内置的 <code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code> 一样），在表单被成功提交之前，输入函数不会返回。</p>
<div class="section" id="basic-input">
<h5>基本输入<a class="headerlink" href="#basic-input" title="永久链接至标题">¶</a></h5>
<p>首先是一些基本类型的输入。</p>
<p>文本输入:</p>
<div class="demo-cb highlight-default notranslate" id="demo-text-input"><div class="highlight"><pre><span></span><span class="n">age</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;How old are you?&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">NUMBER</span><span class="p">)</span>
</pre></div>
</div>
<p>这样一行代码的效果为：浏览器会弹出一个文本输入框来获取输入，在用户完成输入将表单提交后，函数返回用户输入的值。</p>
<p>下面是一些其他类型的输入函数:</p>
<div class="demo-cb highlight-default notranslate" id="demo-basic-input"><div class="highlight"><pre><span></span><span class="c1"># Password input</span>
<span class="n">password</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Input password&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PASSWORD</span><span class="p">)</span>

<span class="c1"># Drop-down selection</span>
<span class="n">gift</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="s1">&#39;Which gift you want?&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;keyboard&#39;</span><span class="p">,</span> <span class="s1">&#39;ipad&#39;</span><span class="p">])</span>

<span class="c1"># Checkbox</span>
<span class="n">agree</span> <span class="o">=</span> <span class="n">checkbox</span><span class="p">(</span><span class="s2">&quot;User Term&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;I agree to terms and conditions&#39;</span><span class="p">])</span>

<span class="c1"># Single choice</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">radio</span><span class="p">(</span><span class="s2">&quot;Choose one&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">])</span>

<span class="c1"># Multi-line text input</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">textarea</span><span class="p">(</span><span class="s1">&#39;Text Area&#39;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">placeholder</span><span class="o">=</span><span class="s1">&#39;Some text&#39;</span><span class="p">)</span>

<span class="c1"># File Upload</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">file_upload</span><span class="p">(</span><span class="s2">&quot;Select a image:&quot;</span><span class="p">,</span> <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;image/*&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="parameter-of-input-functions">
<h5>输入选项<a class="headerlink" href="#parameter-of-input-functions" title="永久链接至标题">¶</a></h5>
<p>输入函数可指定的参数非常丰富（全部参数及含义请见 <a class="reference internal" href="index.html#document-input"><span class="doc">函数文档</span></a> ）:</p>
<div class="demo-cb highlight-default notranslate" id="demo-input-args"><div class="highlight"><pre><span></span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;This is label&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">placeholder</span><span class="o">=</span><span class="s1">&#39;This is placeholder&#39;</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s1">&#39;This is help text&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>以上代码将在浏览器上显示如下：</p>
<img alt="_images/input_1.png" src="_images/input_1.png" />
<p>我们可以为输入指定校验函数，校验函数应在校验通过时返回None，否则返回错误消息:</p>
<div class="demo-cb highlight-default notranslate" id="demo-input-valid-func"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_age</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>  <span class="c1"># return None when the check passes, otherwise return the error message</span>
    <span class="k">if</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Too young!!&#39;</span>
    <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Too old!!&#39;</span>

<span class="n">age</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;How old are you?&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">NUMBER</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="n">check_age</span><span class="p">)</span>
</pre></div>
</div>
<p>当用户输入了不合法的值时，页面上的显示如下:</p>
<img alt="_images/input_2.png" src="_images/input_2.png" />
<p><a class="reference internal" href="index.html#pywebio.input.textarea" title="pywebio.input.textarea"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.input.textarea()</span></code></a>  中可以使用 <code class="docutils literal notranslate"><span class="pre">code</span></code> 参数来开启代码风格的编辑区。</p>
<div class="demo-cb highlight-default notranslate" id="demo-codemirror"><div class="highlight"><pre><span></span><span class="n">code</span> <span class="o">=</span> <span class="n">textarea</span><span class="p">(</span><span class="s1">&#39;Code Edit&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
    <span class="s1">&#39;theme&#39;</span><span class="p">:</span> <span class="s1">&#39;darcula&#39;</span><span class="p">,</span>
<span class="p">},</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;import something</span><span class="se">\n</span><span class="s1"># Write your python code&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>以上代码将在浏览器上显示如下：</p>
<img alt="_images/codemirror_textarea.png" src="_images/codemirror_textarea.png" />
</div>
<div class="section" id="input-group">
<h5>输入组<a class="headerlink" href="#input-group" title="永久链接至标题">¶</a></h5>
<p>PyWebIO支持输入组, 返回结果为一个字典。<a class="reference internal" href="index.html#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.input_group()</span></code></a> 接受单项输入组成的列表作为参数, 返回以单项输入中的 <code class="docutils literal notranslate"><span class="pre">name</span></code> 作为键、以输入数据为值的字典:</p>
<div class="demo-cb highlight-default notranslate" id="demo-input-group"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">input_group</span><span class="p">(</span><span class="s2">&quot;Basic info&quot;</span><span class="p">,[</span>
  <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Input your name&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">),</span>
  <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Input your age&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">NUMBER</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="n">check_age</span><span class="p">)</span>
<span class="p">])</span>
<span class="n">put_text</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>输入组中同样支持使用 <code class="docutils literal notranslate"><span class="pre">validate</span></code> 参数设置校验函数，其接受整个表单数据作为参数:</p>
<div class="demo-cb highlight-default notranslate" id="demo-input-group-validate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_form</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>  <span class="c1"># return (input name, error msg) when validation fail</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Name too long!&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;Age can not be negative!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>PyWebIO 根据是否在输入函数中传入 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数来判断输入函数是在 <code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group()</span></code> 中还是被单独调用。所以当单独调用一个输入函数时, <strong>不要</strong> 设置 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数；而在 <code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group()</span></code> 中调用输入函数时，需 <strong>务必提供</strong> <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数。</p>
</div>
</div>
</div>
<div class="section" id="output">
<h4>输出<a class="headerlink" href="#output" title="永久链接至标题">¶</a></h4>
<p>输出函数都定义在 <a class="reference internal" href="index.html#document-output"><span class="doc">pywebio.output</span></a> 模块中，可以使用 <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">pywebio.output</span> <span class="pre">import</span> <span class="pre">*</span></code> 引入。</p>
<p>调用输出函数后，内容会实时输出到浏览器，在应用的生命周期内，可以在任意时刻调用输出函数。</p>
<div class="section" id="basic-output">
<h5>基本输出<a class="headerlink" href="#basic-output" title="永久链接至标题">¶</a></h5>
<p>PyWebIO提供了一系列函数来输出文本、表格、图像等格式:</p>
<div class="demo-cb highlight-default notranslate" id="demo-basic-output"><div class="highlight"><pre><span></span><span class="c1"># Text Output</span>
<span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;Hello world!&quot;</span><span class="p">)</span>

<span class="c1"># Table Output</span>
<span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;Commodity&#39;</span><span class="p">,</span> <span class="s1">&#39;Price&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;5.5&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;Banana&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">],</span>
<span class="p">])</span>

<span class="c1"># Image Output</span>
<span class="n">put_image</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/path/to/some/image.png&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>  <span class="c1"># local image </span>
<span class="n">put_image</span><span class="p">(</span><span class="s1">&#39;http://example.com/some-image.png&#39;</span><span class="p">)</span>  <span class="c1"># internet image </span>

<span class="c1"># Markdown Output</span>
<span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;~~Strikethrough~~&#39;</span><span class="p">)</span>

<span class="c1"># File Output</span>
<span class="n">put_file</span><span class="p">(</span><span class="s1">&#39;hello_word.txt&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;hello word!&#39;</span><span class="p">)</span>

<span class="c1"># Show a PopUp</span>
<span class="n">popup</span><span class="p">(</span><span class="s1">&#39;popup title&#39;</span><span class="p">,</span> <span class="s1">&#39;popup text content&#39;</span><span class="p">)</span>

<span class="c1"># Show a notification message</span>
<span class="n">toast</span><span class="p">(</span><span class="s1">&#39;New message 🔔&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>PyWebIO提供的全部输出函数见 <a class="reference internal" href="index.html#document-output"><span class="doc">pywebio.output</span></a> 模块。另外，PyWebIO还支持一些第三方库来进行数据可视化，参见 <a class="reference internal" href="index.html#document-libraries_support"><span class="doc">第三方库生态</span></a> 。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果你在Python shell, IPython 或 jupyter notebook这种交互式执行环境中使用PyWebIO，你需要显式调用 <code class="xref py py-obj docutils literal notranslate"><span class="pre">show()</span></code> 方法来显示输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;Hello world!&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">put_table</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">put_markdown</span><span class="p">(</span><span class="o">...</span><span class="p">),</span> <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)]</span>
<span class="gp">... </span><span class="p">])</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="combined-output">
<span id="combine-output"></span><h5>组合输出<a class="headerlink" href="#combined-output" title="永久链接至标题">¶</a></h5>
<p>函数名以 <code class="docutils literal notranslate"><span class="pre">put_</span></code> 开始的输出函数，可以与一些输出函数组合使用，作为最终输出的一部分：</p>
<p><a class="reference internal" href="index.html#pywebio.output.put_table" title="pywebio.output.put_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_table()</span></code></a> 支持以 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用作为单元格内容:</p>
<div class="demo-cb highlight-default notranslate" id="demo-putxxx"><div class="highlight"><pre><span></span><span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Content&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">put_html</span><span class="p">(</span><span class="s1">&#39;X&lt;sup&gt;2&lt;/sup&gt;&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;hr/&gt;&#39;</span><span class="p">],</span>  <span class="c1"># equal to [&#39;text&#39;, put_text(&#39;&lt;hr/&gt;&#39;)]</span>
    <span class="p">[</span><span class="s1">&#39;buttons&#39;</span><span class="p">,</span> <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=...</span><span class="p">)],</span>  
    <span class="p">[</span><span class="s1">&#39;markdown&#39;</span><span class="p">,</span> <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;`Awesome PyWebIO!`&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">put_file</span><span class="p">(</span><span class="s1">&#39;hello.text&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;hello world&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">put_table</span><span class="p">([[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">]])]</span>
<span class="p">])</span>
</pre></div>
</div>
<p>以上代码将在浏览器上显示如下：</p>
<img alt="_images/put_table.png" src="_images/put_table.png" />
<p>类似地， <a class="reference internal" href="index.html#pywebio.output.popup" title="pywebio.output.popup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popup()</span></code></a> 也可以将 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用作为弹窗内容:</p>
<div class="demo-cb highlight-default notranslate" id="demo-popup"><div class="highlight"><pre><span></span><span class="n">popup</span><span class="p">(</span><span class="s1">&#39;Popup title&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="n">put_html</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Popup Content&lt;/h3&gt;&#39;</span><span class="p">),</span>
    <span class="s1">&#39;plain html: &lt;br/&gt;&#39;</span><span class="p">,</span>  <span class="c1"># Equivalent to: put_text(&#39;plain html: &lt;br/&gt;&#39;)</span>
    <span class="n">put_table</span><span class="p">([[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">]]),</span>
    <span class="n">put_button</span><span class="p">(</span><span class="s1">&#39;close_popup()&#39;</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="n">close_popup</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
<p>另外，你可以使用 <a class="reference internal" href="index.html#pywebio.output.put_widget" title="pywebio.output.put_widget"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_widget()</span></code></a> 来创建可以接受 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 的自定义输出控件。</p>
<p>接受 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用作为参数的完整输出函数清单请见 <a class="reference internal" href="index.html#output-func-list"><span class="std std-ref">输出函数列表</span></a></p>
<p><strong>上下文管理器</strong></p>
<p>一些接受 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用作为参数的输出函数支持作为上下文管理器来使用：</p>
<div class="demo-cb highlight-default notranslate" id="demo-output-context-manager"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">put_collapse</span><span class="p">(</span><span class="s1">&#39;This is title&#39;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">put_text</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="n">put_table</span><span class="p">([</span>
        <span class="p">[</span><span class="s1">&#39;Commodity&#39;</span><span class="p">,</span> <span class="s1">&#39;Price&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;5.5&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;Banana&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">],</span>
    <span class="p">])</span>
</pre></div>
</div>
<p>支持上下文管理器的完整函数清单请见 <a class="reference internal" href="index.html#output-func-list"><span class="std std-ref">输出函数列表</span></a></p>
</div>
<div class="section" id="click-callback">
<span id="callback"></span><h5>事件回调<a class="headerlink" href="#click-callback" title="永久链接至标题">¶</a></h5>
<p>从上面可以看出，PyWebIO把交互分成了输入和输出两部分：输入函数为阻塞式调用，会在用户浏览器上显示一个表单，在用户提交表单之前输入函数将不会返回；输出函数将内容实时输出至浏览器。这种交互方式和控制台程序是一致的，因此PyWebIO应用非常适合使用控制台程序的编写逻辑来进行开发。</p>
<p>此外，PyWebIO还支持事件回调：PyWebIO允许你输出一些控件并绑定回调函数，当控件被点击时相应的回调函数便会被执行。</p>
<p>下面是一个例子:</p>
<div class="demo-cb highlight-default notranslate" id="demo-onclick-callback"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="k">def</span> <span class="nf">edit_row</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;You click </span><span class="si">%s</span><span class="s2"> button ar row </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span>

<span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;Idx&#39;</span><span class="p">,</span> <span class="s1">&#39;Actions&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;edit&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">edit_row</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">))],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;edit&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">edit_row</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">))],</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;edit&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">edit_row</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">))],</span>
<span class="p">])</span>
</pre></div>
</div>
<p><a class="reference internal" href="index.html#pywebio.output.put_table" title="pywebio.output.put_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_table()</span></code></a> 的调用不会阻塞。当用户点击了某行中的按钮时，PyWebIO会自动调用相应的回调函数:</p>
<img alt="_images/table_onclick.gif" src="_images/table_onclick.gif" />
<p>当然，PyWebIO还支持单独的按钮控件:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-buttons"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">btn_click</span><span class="p">(</span><span class="n">btn_val</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;You click </span><span class="si">%s</span><span class="s2"> button&quot;</span> <span class="o">%</span> <span class="n">btn_val</span><span class="p">)</span>

<span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="n">btn_click</span><span class="p">)</span>  <span class="c1"># a group of buttons</span>

<span class="n">put_button</span><span class="p">(</span><span class="s2">&quot;Click me&quot;</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">toast</span><span class="p">(</span><span class="s2">&quot;Clicked&quot;</span><span class="p">))</span>  <span class="c1"># single button</span>
</pre></div>
</div>
<p>事实上，不仅是按钮，所有的输出都可以绑定点击事件。你可以在输出函数之后调用 <code class="docutils literal notranslate"><span class="pre">onclick()</span></code> 方法来绑定点击事件:</p>
<div class="demo-cb highlight-default notranslate" id="demo-onclick"><div class="highlight"><pre><span></span><span class="n">put_image</span><span class="p">(</span><span class="s1">&#39;some-image.png&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">onclick</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">toast</span><span class="p">(</span><span class="s1">&#39;You click an image&#39;</span><span class="p">))</span>  

<span class="c1"># set onclick in combined output</span>
<span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;Commodity&#39;</span><span class="p">,</span> <span class="s1">&#39;Price&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;5.5&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">onclick</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">toast</span><span class="p">(</span><span class="s1">&#39;You click the text&#39;</span><span class="p">))],</span>
<span class="p">])</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">onclick()</span></code> 方法的返回值为对象本身，所以可以继续用于组合输出中。</p>
</div>
<div class="section" id="output-scope">
<span id="id1"></span><h5>输出域Scope<a class="headerlink" href="#output-scope" title="永久链接至标题">¶</a></h5>
<p>PyWebIO使用scope模型来控制内容输出的位置。scope为输出内容的容器，你可以创建一个scope并将内容输出到其中。</p>
<p>每个输出函数（函数名形如 <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_xxx()</span></code> ）都会将内容输出到一个Scope，默认为”当前Scope”，”当前Scope”由 <a class="reference internal" href="index.html#pywebio.output.use_scope" title="pywebio.output.use_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_scope()</span></code></a> 设置。</p>
<p id="use-scope"><strong>use_scope()</strong></p>
<p>可以使用 <a class="reference internal" href="index.html#pywebio.output.use_scope" title="pywebio.output.use_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_scope()</span></code></a> 开启并进入一个新的输出域，或进入一个已经存在的输出域:</p>
<div class="demo-cb highlight-default notranslate" id="demo-use-scope"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;scope1&#39;</span><span class="p">):</span>  <span class="c1"># 创建并进入scope &#39;scope1&#39;</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text1 in scope1&#39;</span><span class="p">)</span>  <span class="c1"># 输出内容到 scope1</span>

<span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text in parent scope of scope1&#39;</span><span class="p">)</span>  <span class="c1"># 输出内容到 ROOT scope</span>

<span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;scope1&#39;</span><span class="p">):</span>  <span class="c1"># 进入之前创建的scope &#39;scope1&#39;</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text2 in scope1&#39;</span><span class="p">)</span>  <span class="c1"># 输出内容到 scope1</span>
</pre></div>
</div>
<p>以上代码将会输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">text1</span> <span class="ow">in</span> <span class="n">scope1</span>
<span class="n">text2</span> <span class="ow">in</span> <span class="n">scope1</span>
<span class="n">text</span> <span class="ow">in</span> <span class="n">parent</span> <span class="n">scope</span> <span class="n">of</span> <span class="n">scope1</span>
</pre></div>
</div>
<p><a class="reference internal" href="index.html#pywebio.output.use_scope" title="pywebio.output.use_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_scope()</span></code></a> 还可以使用 <code class="xref py py-obj docutils literal notranslate"><span class="pre">clear</span></code> 参数将scope中原有的内容清空:</p>
<div class="demo-cb highlight-default notranslate" id="demo-use-scope-clear"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;scope2&#39;</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;create scope2&#39;</span><span class="p">)</span>

<span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text in parent scope of scope2&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;scope2&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>  <span class="c1"># enter the existing scope and clear the previous content</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text in scope2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>以上代码将会输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="ow">in</span> <span class="n">scope2</span>
<span class="n">text</span> <span class="ow">in</span> <span class="n">parent</span> <span class="n">scope</span> <span class="n">of</span> <span class="n">scope2</span>
</pre></div>
</div>
<p><a class="reference internal" href="index.html#pywebio.output.use_scope" title="pywebio.output.use_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_scope()</span></code></a> 还可以作为装饰器来使用:</p>
<div class="demo-cb highlight-default notranslate" id="demo-use-scope-decorator"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="nd">@use_scope</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_time</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
</pre></div>
</div>
<p>第一次调用 <code class="docutils literal notranslate"><span class="pre">show_time</span></code> 时，将会创建 <code class="docutils literal notranslate"><span class="pre">time</span></code> 输出域并在其中输出当前时间，之后每次调用 <code class="docutils literal notranslate"><span class="pre">show_time()</span></code> ，输出域都会被新的内容覆盖。</p>
<p>Scope支持嵌套。会话开始时，PyWebIO应用只有一个 <code class="docutils literal notranslate"><span class="pre">ROOT</span></code> scope。你可以在一个scope中创建新的scope。比如，以下代码将会创建3个scope:</p>
<div class="demo-cb highlight-default notranslate" id="demo-use-scope-nested"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Text in scope A&#39;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">):</span>
        <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Text in scope B&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Text in scope C&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>以上代码将会产生如下Scope布局:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>┌─ROOT────────────────────┐
│                         │
│ ┌─A───────────────────┐ │
│ │ Text in scope A     │ │
│ │ ┌─B───────────────┐ │ │
│ │ │ Text in scope B │ │ │
│ │ └─────────────────┘ │ │
│ └─────────────────────┘ │
│                         │
│ ┌─C───────────────────┐ │
│ │ Text in scope C     │ │
│ └─────────────────────┘ │
└─────────────────────────┘
</pre></div>
</div>
<p id="put-scope"><strong>put_scope()</strong></p>
<p>我们已经知道scope实际上是输出内容的容器，那么我们能否将scope作为输出的子元素呢（比如将scope作为表格的一个cell），答案是肯定的。你可以使用 <a class="reference internal" href="index.html#pywebio.output.put_scope" title="pywebio.output.put_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_scope()</span></code></a> 来显式创建一个scope，而从它以 <code class="docutils literal notranslate"><span class="pre">put_</span></code> 开头的函数名可以看出，它也可以被传递到任何可以接受 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用的地方。</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-scope"><div class="highlight"><pre><span></span><span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Hobbies&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;Tom&#39;</span><span class="p">,</span> <span class="n">put_scope</span><span class="p">(</span><span class="s1">&#39;hobby&#39;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Coding&#39;</span><span class="p">))]</span>  <span class="c1"># hobby is initialized to coding</span>
<span class="p">])</span>

<span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;hobby&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Movie&#39;</span><span class="p">)</span>  <span class="c1"># hobby is reset to Movie</span>

<span class="c1"># append Music, Drama to hobby</span>
<span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;hobby&#39;</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Music&#39;</span><span class="p">)</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Drama&#39;</span><span class="p">)</span>

<span class="c1"># insert the Coding into the top of the hobby</span>
<span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;**Coding**&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s1">&#39;hobby&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">警告</p>
<p>It is not allowed to have two scopes with the same name in the application.</p>
</div>
<p><strong>输出域控制函数</strong></p>
<p>除了 <a class="reference internal" href="index.html#pywebio.output.use_scope" title="pywebio.output.use_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_scope()</span></code></a> 和 <a class="reference internal" href="index.html#pywebio.output.put_scope" title="pywebio.output.put_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_scope()</span></code></a> , PyWebIO还提供了以下scope控制函数：</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#pywebio.output.clear" title="pywebio.output.clear"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear(scope)</span></code></a> : 清除scope的内容</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.remove" title="pywebio.output.remove"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove(scope)</span></code></a> : 移除scope</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.scroll_to" title="pywebio.output.scroll_to"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scroll_to(scope)</span></code></a> : 将页面滚动到scope处</p></li>
</ul>
<p>另外，所有的输出函数还支持使用 <code class="docutils literal notranslate"><span class="pre">scope</span></code> 参数来指定输出的目的scope，也可使用 <code class="docutils literal notranslate"><span class="pre">position</span></code> 参数来指定在目标scope中输出的位置。更多信息参见 <a class="reference internal" href="index.html#scope-param"><span class="std std-ref">output 模块</span></a> 。</p>
</div>
<div class="section" id="layout">
<h5>布局<a class="headerlink" href="#layout" title="永久链接至标题">¶</a></h5>
<p>通常，使用上述输出函数足以完成大部分输出，但是这些输出之间全都是竖直排列的。如果想创建更复杂的布局，需要使用布局函数。</p>
<p><code class="docutils literal notranslate"><span class="pre">pywebio.output</span></code> 模块提供了3个布局函数，通过对他们进行组合可以完成各种复杂的布局:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#pywebio.output.put_row" title="pywebio.output.put_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_row()</span></code></a> : 使用行布局输出内容. 内容在水平方向上排列</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_column" title="pywebio.output.put_column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_column()</span></code></a> : 使用列布局输出内容. 内容在竖直方向上排列</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_grid" title="pywebio.output.put_grid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_grid()</span></code></a> : 使用网格布局输出内容</p></li>
</ul>
<p>通过组合 <code class="docutils literal notranslate"><span class="pre">put_row()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">put_column()</span></code> 可以实现灵活布局:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-row-column"><div class="highlight"><pre><span></span><span class="n">put_row</span><span class="p">([</span>
    <span class="n">put_column</span><span class="p">([</span>
        <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">),</span>
        <span class="n">put_row</span><span class="p">([</span>
            <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;B1&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># None represents the space between the output</span>
            <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;B2&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;B3&#39;</span><span class="p">),</span>
        <span class="p">]),</span>
        <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">),</span>
    <span class="p">]),</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
<p>以上代码将在浏览器上显示如下：</p>
<img alt="_images/layout.png" class="align-center" src="_images/layout.png" />
<p>布局函数还支持自定义各部分的尺寸:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>put_row([put_image(…), put_image(…)], size=&#39;40% 60%&#39;)  # 左右两图宽度比2:3
</pre></div>
</div>
<p>更多布局函数的用法及代码示例请查阅 <a class="reference internal" href="index.html#style-and-layout"><span class="std std-ref">布局函数文档</span></a> .</p>
</div>
<div class="section" id="style">
<span id="id2"></span><h5>样式<a class="headerlink" href="#style" title="永久链接至标题">¶</a></h5>
<p>如果你熟悉 <a class="reference external" href="https://www.google.com/search?q=CSS%E6%A0%B7%E5%BC%8F">CSS样式</a> ，你还可以在输出函数后调用 <code class="docutils literal notranslate"><span class="pre">style()</span></code> 方法给输出设定自定义样式。</p>
<p>可以给单个的 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 输出设定CSS样式，也可以配合组合输出使用:</p>
<div class="demo-cb highlight-default notranslate" id="demo-style-demo"><div class="highlight"><pre><span></span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;color: red; font-size: 20px&#39;</span><span class="p">)</span>

<span class="c1"># in combined output</span>
<span class="n">put_row</span><span class="p">([</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;color: red&#39;</span><span class="p">),</span>
    <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;markdown&#39;</span><span class="p">)</span>
<span class="p">])</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;margin-top: 20px&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">style()</span></code> 方法的返回值为对象本身，所以可以继续用于组合输出中。</p>
</div>
</div>
<div class="section" id="run-application">
<span id="server-and-script-mode"></span><h4>Run application<a class="headerlink" href="#run-application" title="永久链接至标题">¶</a></h4>
<p>在PyWebIO中，有两种方式用来运行PyWebIO应用：作为脚本运行和使用 <a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.start_server()</span></code></a> 或 <a class="reference internal" href="index.html#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform.path_deploy()</span></code></a> 来作为Web服务运行。</p>
<div class="section" id="overview">
<h5>Overview<a class="headerlink" href="#overview" title="永久链接至标题">¶</a></h5>
<p id="server-mode"><strong>Server模式</strong></p>
<p>在Server模式下，PyWebIO会启动一个Web服务来持续性地提供服务。当用户访问服务地址时，PyWebIO会开启一个新会话并运行PyWebIO应用。</p>
<p>将PyWebIO应用部署为web服务的最常用方式是使用 <a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywebio</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>  <span class="c1"># PyWebIO application function</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;what&#39;s your name&quot;</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<span class="n">start_server</span><span class="p">(</span><span class="n">main</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>现在，在 <a class="reference external" href="http://127.0.0.1:8080/">http://127.0.0.1:8080/</a> 页面就会看到欢迎页面了。</p>
<p>使用 <code class="docutils literal notranslate"><span class="pre">debug=True</span></code> 来开启debug模式，这时server会在检测到代码发生更改后进行重启。</p>
<p><a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code></a> 提供了对远程访问的支持，当开启远程访问后（通过在 <code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code> 中传入 <code class="xref py py-obj docutils literal notranslate"><span class="pre">remote_access=True</span></code> 开启 ），你将会得到一个用于访问当前应用的临时的公网访问地址，其他任何人都可以使用此地址访问你的应用。远程接入可以很方便地将应用临时分享给其他人。</p>
<p>将PyWebIO应用部署为web服务的另一种方式是使用 <a class="reference internal" href="index.html#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_deploy()</span></code></a> 。<a class="reference internal" href="index.html#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_deploy()</span></code></a> 可以从一个目录中部署PyWebIO应用，只需要在该目录下的python文件中定义PyWebIO应用，就可以通过URL中的路径来访问这些应用了。</p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>注意，在Server模式下， <code class="docutils literal notranslate"><span class="pre">pywebio.input</span></code> 、 <code class="docutils literal notranslate"><span class="pre">pywebio.output</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pywebio.session</span></code> 模块内的函数仅能在任务函数上下文中进行调用。比如如下调用是 <strong>不被允许的</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pywebio</span>
<span class="kn">from</span> <span class="nn">pywebio.input</span> <span class="kn">import</span> <span class="nb">input</span>

<span class="n">port</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Input port number:&#39;</span><span class="p">)</span>   <span class="c1"># ❌ error</span>
<span class="n">pywebio</span><span class="o">.</span><span class="n">start_server</span><span class="p">(</span><span class="n">my_task_func</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p><strong>Script模式</strong></p>
<p>如果你在代码中没有调用 <code class="docutils literal notranslate"><span class="pre">start_server()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">path_deploy()</span></code> 函数，那么你就是以脚本模式在运行PyWebIO应用。</p>
<p>在脚本模式中，当首次运行到对PyWebIO交互函数的调用时，会自动打开浏览器的一个页面，后续的PyWebIO交互都会在这个页面上进行。当脚本运行结束，这个页面也将不再有效。</p>
<p>如果用户在脚本结束运行之前关闭了浏览器，那么之后会话内对于PyWebIO交互函数的调用将会引发一个 <a class="reference internal" href="index.html#pywebio.exceptions.SessionException" title="pywebio.exceptions.SessionException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionException</span></code></a> 异常。</p>
</div>
<div class="section" id="concurrent">
<span id="thread-in-server-mode"></span><h5>并发<a class="headerlink" href="#concurrent" title="永久链接至标题">¶</a></h5>
<p>PyWebIO 支持在多线程环境中使用。</p>
<p><strong>Script模式</strong></p>
<p>在 Script模式下，你可以自由地启动线程，并在其中调用PyWebIO的交互函数。当所有非 <a class="reference external" href="https://docs.python.org/3/library/threading.html#thread-objects">Daemon线程</a> 运行结束后，脚本退出。</p>
<p><strong>Server模式</strong></p>
<p>Server模式下，如果需要在新创建的线程中使用PyWebIO的交互函数，需要手动调用 <a class="reference internal" href="index.html#pywebio.session.register_thread" title="pywebio.session.register_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register_thread(thread)</span></code></a> 对新进程进行注册（这样PyWebIO才能知道新创建的线程属于哪个会话）。如果新创建的线程中没有使用到PyWebIO的交互函数，则无需注册。没有使用 <a class="reference internal" href="index.html#pywebio.session.register_thread" title="pywebio.session.register_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register_thread(thread)</span></code></a> 注册的线程不受会话管理，其调用PyWebIO的交互函数将会产生 <a class="reference internal" href="index.html#pywebio.exceptions.SessionNotFoundException" title="pywebio.exceptions.SessionNotFoundException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionNotFoundException</span></code></a> 异常。</p>
<p>Server模式下多线程的使用示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">show_time</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="n">put_text</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">show_time</span><span class="p">)</span>
    <span class="n">register_thread</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;## Clock&#39;</span><span class="p">)</span>
    <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>  <span class="c1"># run `show_time()` in background</span>

    <span class="c1"># ❌ this thread will cause `SessionNotFoundException`</span>
    <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">show_time</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Background task started.&#39;</span><span class="p">)</span>


<span class="n">start_server</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="close-of-session">
<span id="session-close"></span><h5>会话的结束<a class="headerlink" href="#close-of-session" title="永久链接至标题">¶</a></h5>
<p>当用户关闭浏览器页面时，与之相应的会话也将被关闭。会话关闭后，应用中未返回的PyWebIO输入函数的调用将会抛出 <a class="reference internal" href="index.html#pywebio.exceptions.SessionClosedException" title="pywebio.exceptions.SessionClosedException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionClosedException</span></code></a> 异常，后续对PyWebIO交互函数的调用将会引发 <a class="reference internal" href="index.html#pywebio.exceptions.SessionNotFoundException" title="pywebio.exceptions.SessionNotFoundException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionNotFoundException</span></code></a> 或 <a class="reference internal" href="index.html#pywebio.exceptions.SessionClosedException" title="pywebio.exceptions.SessionClosedException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionClosedException</span></code></a> 异常。</p>
<p>大部分情况下，你不需要捕获这些异常，让这些异常来终止代码的执行通常是比较合适的。</p>
<p>可以使用 <a class="reference internal" href="index.html#pywebio.session.defer_call" title="pywebio.session.defer_call"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session.defer_call(func)</span></code></a> 来设置会话结束时需要调用的函数。无论是因为用户主动关闭页面还是任务结束使得会话关闭，设置的函数都会被执行。<a class="reference internal" href="index.html#pywebio.session.defer_call" title="pywebio.session.defer_call"><code class="xref py py-obj docutils literal notranslate"><span class="pre">defer_call(func)</span></code></a> 可以用于资源清理等工作。在会话中可以多次调用 <a class="reference internal" href="index.html#pywebio.session.defer_call" title="pywebio.session.defer_call"><code class="xref py py-obj docutils literal notranslate"><span class="pre">defer_call()</span></code></a> ,会话结束后将会顺序执行设置的函数。</p>
</div>
</div>
<div class="section" id="more-about-pywebio">
<h4>More about PyWebIO<a class="headerlink" href="#more-about-pywebio" title="永久链接至标题">¶</a></h4>
<p>目前为止，你已经了解了PyWebIO中最重要的特性，并且可以开始编写PyWebIO应用了。然而，有些功能前面我们并没有覆盖到，这里提供了对剩余特性的一些简短介绍，如果你在应用编写过程中需要用到这里的某个特性，你可以查阅对应的详细文档。</p>
<p>另外，你可以在 <a class="reference internal" href="index.html#document-cookbook"><span class="doc">cookbook</span></a> 页面找到一些对于编写PyWebIO应用很有帮助的代码片段。</p>
<div class="section" id="session-module">
<h5><code class="docutils literal notranslate"><span class="pre">session</span></code> 模块<a class="headerlink" href="#session-module" title="永久链接至标题">¶</a></h5>
<p><a class="reference internal" href="index.html#document-session"><span class="doc">pywebio.session</span></a> 模块提供了对会话的更多控制 。</p>
<blockquote>
<div><ul class="simple">
<li><p>使用 <a class="reference internal" href="index.html#pywebio.session.set_env" title="pywebio.session.set_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_env()</span></code></a> 来为当前会话设置标题、页面外观、输入栏等内容。</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.session.info" title="pywebio.session.info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">info</span></code></a> 对象提供了关于当前绘画的很多信息，比如用户IP地址、用户语言、用户浏览器信息等。</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.session.local" title="pywebio.session.local"><code class="xref py py-obj docutils literal notranslate"><span class="pre">local</span></code></a> 是一个session-local的存储对象, 用于存储会话独立的数据。</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.session.run_js" title="pywebio.session.run_js"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_js()</span></code></a> 让你在用户浏览器中执行JavaScript代码, <a class="reference internal" href="index.html#pywebio.session.eval_js" title="pywebio.session.eval_js"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eval_js()</span></code></a> 让你执行并获取JavaScript表达式的值。</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="pin-module">
<h5><code class="docutils literal notranslate"><span class="pre">pin</span></code> 模块<a class="headerlink" href="#pin-module" title="永久链接至标题">¶</a></h5>
<p>你已经知道，PyWebIO的输入函数是阻塞式的，并且输入表单会在成功提交后消失。在某些时候，你可能想要输入表单一直显示并可以持续性接收用户输入，这时你可以使用 <a class="reference internal" href="index.html#document-pin"><span class="doc">pywebio.pin</span></a> 模块。</p>
</div>
<div class="section" id="platform-module">
<h5><code class="docutils literal notranslate"><span class="pre">platform</span></code> 模块<a class="headerlink" href="#platform-module" title="永久链接至标题">¶</a></h5>
<p><a class="reference internal" href="index.html#document-platform"><span class="doc">pywebio.platform</span></a> 模块提供了将PyWebIO应用以多种方式部署的支持。</p>
<p>PyWebIO的服务端与浏览器可以通过两种协议(WebSocket 和 HTTP 协议)进行通信，默认使用WebSocket协议，如果你想使用HTTP协议，你可以选择本模块中的其他 <code class="docutils literal notranslate"><span class="pre">start_server()</span></code> 函数。</p>
<p>如果要为PyWebIO应用设置一些网页相关的配置，可以尝试使用 <a class="reference internal" href="index.html#pywebio.config" title="pywebio.config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.config()</span></code></a> 。</p>
</div>
<div class="section" id="advanced-features">
<h5>高级特性<a class="headerlink" href="#advanced-features" title="永久链接至标题">¶</a></h5>
<p>可以将PyWebIO应用整合到现存的Python Web项目中，PyWebIO应用和web项目使用一个web框架。详细信息参见 <a class="reference internal" href="index.html#integration-web-framework"><span class="std std-ref">Advanced Topic: Integration with Web Framework</span></a> 。</p>
<p>PyWebIO还支持基于协程的会话。具体参见 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">Advanced Topic: Coroutine-based session</span></a> 。</p>
<p>如果你想要将PyWebIO应用打包到一个单独的可执行文件里面，从而使用户可以在没有安装python解释器的情况下运行应用，你可以参考 <a class="reference internal" href="index.html#stand-alone-app"><span class="std std-ref">Build stand-alone App</span></a></p>
<p>如果你想在PyWebIO应用中进行一些数据可视化，可以参考 <a class="reference internal" href="index.html#visualization"><span class="std std-ref">Data visualization</span></a></p>
</div>
</div>
<div class="section" id="last-but-not-least">
<h4>Last but not least<a class="headerlink" href="#last-but-not-least" title="永久链接至标题">¶</a></h4>
<p>以上基本就是PyWebIO的全部功能了，你可以继续阅读接下来的文档，或者立即开始PyWebIO应用的编写了。</p>
<p>最后再提供一条建议，当你在使用PyWebIO遇到设计上的问题时，可以问一下自己：如果在是在终端程序中我会怎么做？如果你已经有答案了，那么在PyWebIO中一样可以使用这样的方式完成。如果问题依然存在或者觉得解决方案不够好，你可以考虑使用 <a class="reference internal" href="#callback"><span class="std std-ref">回掉机制</span></a> 或 <a class="reference internal" href="index.html#document-pin"><span class="doc">pin</span></a> 模块。</p>
<p>OK, Have fun with PyWebIO!</p>
</div>
</div>
<span id="document-input"></span><div class="section" id="module-pywebio.input">
<span id="pywebio-input-get-input-from-web-browser"></span><h3><code class="docutils literal notranslate"><span class="pre">pywebio.input</span></code> — 输入模块<a class="headerlink" href="#module-pywebio.input" title="永久链接至标题">¶</a></h3>
<p>本模块提供了一系列函数来从浏览器接收用户不同的形式的输入</p>
<p>输入函数大致分为两类，一类是单项输入:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;What&#39;s your name&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Your name is </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>另一类是使用 <a class="reference internal" href="#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group</span></code></a> 的输入组:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="n">input_group</span><span class="p">(</span><span class="s2">&quot;User info&quot;</span><span class="p">,[</span>
  <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Input your name&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">),</span>
  <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Input your age&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">NUMBER</span><span class="p">)</span>
<span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>输入组中需要在每一项输入函数中提供 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数来用于在结果中标识不同输入项.</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>PyWebIO 根据是否在输入函数中传入 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数来判断输入函数是在 <a class="reference internal" href="#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group</span></code></a> 中还是被单独调用。所以当你想要单独调用一个输入函数时，请不要设置 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数；而在 <a class="reference internal" href="#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group</span></code></a> 中调用输入函数时，<strong>务必提供</strong> <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数。</p>
</div>
<p>输入默认可以为空，如果需要用户必须提供值，则需要在输入函数中传入 <code class="docutils literal notranslate"><span class="pre">required=True</span></code> (部分输入函数不支持 <code class="docutils literal notranslate"><span class="pre">required</span></code> 参数)</p>
<p>本模块中的输入函数都是阻塞式的，输入表单会在成功提交后销毁。如果你想让表单可以一直显示在页面上并可以持续性接收输入，你可以考虑使用 <a class="reference internal" href="index.html#document-pin"><span class="doc">pin</span></a> 模块。</p>
<div class="section" id="functions-list">
<h4>函数清单<a class="headerlink" href="#functions-list" title="永久链接至标题">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>函数</p></td>
<td><p>简介</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a></p></td>
<td><p>文本输入</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.input.textarea" title="pywebio.input.textarea"><code class="xref py py-obj docutils literal notranslate"><span class="pre">textarea</span></code></a></p></td>
<td><p>多行文本输入</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.input.select" title="pywebio.input.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a></p></td>
<td><p>下拉选择框</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.input.checkbox" title="pywebio.input.checkbox"><code class="xref py py-obj docutils literal notranslate"><span class="pre">checkbox</span></code></a></p></td>
<td><p>勾选选项</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.input.radio" title="pywebio.input.radio"><code class="xref py py-obj docutils literal notranslate"><span class="pre">radio</span></code></a></p></td>
<td><p>单选选项</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.input.slider" title="pywebio.input.slider"><code class="xref py py-obj docutils literal notranslate"><span class="pre">slider</span></code></a></p></td>
<td><p>滑块输入</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.input.actions" title="pywebio.input.actions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">actions</span></code></a></p></td>
<td><p>按钮选项</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.input.file_upload" title="pywebio.input.file_upload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_upload</span></code></a></p></td>
<td><p>文件上传</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group</span></code></a></p></td>
<td><p>输入组</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.input.input_update" title="pywebio.input.input_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_update</span></code></a></p></td>
<td><p>更新输入项</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functions-doc">
<h4>函数文档<a class="headerlink" href="#functions-doc" title="永久链接至标题">¶</a></h4>
<dl class="py function">
<dt id="pywebio.input.input">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'text'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">placeholder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datalist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">other_html_attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#input"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.input" title="永久链接至目标">¶</a></dt>
<dd><p>文本输入</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> (<em>str</em>) – 输入框标签</p></li>
<li><p><strong>type</strong> (<em>str</em>) – <p>Input type. Currently, supported types are：<code class="xref py py-obj docutils literal notranslate"><span class="pre">TEXT</span></code> , <code class="xref py py-obj docutils literal notranslate"><span class="pre">NUMBER</span></code> , <code class="xref py py-obj docutils literal notranslate"><span class="pre">FLOAT</span></code> , <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSWORD</span></code> , <code class="xref py py-obj docutils literal notranslate"><span class="pre">URL</span></code> , <code class="xref py py-obj docutils literal notranslate"><span class="pre">DATE</span></code> , <code class="xref py py-obj docutils literal notranslate"><span class="pre">TIME</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">COLOR</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">DATETIME_LOCAL</span></code></p>
<p>其中 <code class="xref py py-obj docutils literal notranslate"><span class="pre">DATE</span></code> , <code class="xref py py-obj docutils literal notranslate"><span class="pre">TIME</span></code> 类型在某些浏览器上不被支持，详情见 <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Browser_compatibility">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Browser_compatibility</a></p>
</p></li>
<li><p><strong>validate</strong> (<em>callable</em>) – <p>输入值校验函数。 如果提供，当用户输入完毕或提交表单后校验函数将被调用。</p>
<p><code class="docutils literal notranslate"><span class="pre">validate</span></code> 接收输入值作为参数，当输入值有效时，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，当输入值无效时，返回错误提示字符串. 比如:</p>
<div class="demo-cb highlight-default notranslate" id="demo-input-valid-func-c0b83"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_age</span><span class="p">(</span><span class="n">age</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">age</span><span class="o">&gt;</span><span class="mi">30</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Too old&#39;</span>
    <span class="k">elif</span> <span class="n">age</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Too young&#39;</span>
<span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Input your age&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">NUMBER</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="n">check_age</span><span class="p">)</span>
</pre></div>
</div>
</p></li>
<li><p><strong>name</strong> (<em>str</em>) – 输入框的名字。与 <a class="reference internal" href="#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group</span></code></a> 配合使用，用于在输入组的结果中标识不同输入项。  <strong>在单个输入中，不可以设置该参数！</strong></p></li>
<li><p><strong>value</strong> (<em>str</em>) – 输入框的初始值</p></li>
<li><p><strong>action</strong> (<em>tuple</em><em>(</em><em>label:str</em><em>, </em><em>callback:callable</em><em>)</em>) – <p>在输入框右侧显示一个按钮，用户可通过点击按钮为输入框设置值。</p>
<p><code class="docutils literal notranslate"><span class="pre">label</span></code> 为按钮的显示文本， <code class="docutils literal notranslate"><span class="pre">callback</span></code> 为按钮点击的回调函数。</p>
<p>回调函数需要接收一个 <code class="docutils literal notranslate"><span class="pre">set_value</span></code> 位置参数， <code class="docutils literal notranslate"><span class="pre">set_value</span></code> 是一个可调用对象，接受单参数调用和双参数调用。</p>
<p>单参数调用时，签名为 <code class="docutils literal notranslate"><span class="pre">set_value(value:str)</span></code> ，调用set_value即可将表单项的值设置为传入的 <code class="docutils literal notranslate"><span class="pre">value</span></code> 参数。</p>
<p>双参数调用时，签名为 <code class="docutils literal notranslate"><span class="pre">set_value(value:any,</span> <span class="pre">label:str)</span></code> ，其中：</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> 参数为最终输入项的返回值，可以为任意Python对象，并不会传递给用户浏览器</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">label</span></code> 参数用于显示在用户表单项上</p></li>
</ul>
</div></blockquote>
<p>使用双参数调用 <code class="docutils literal notranslate"><span class="pre">set_value</span></code> 后，用户表单项会变为只读状态。</p>
<p>双参数调用的使用场景为：表单项的值通过回调动态生成，同时希望用户表单显示的和实际提交的数据不同(例如表单项上可以显示更人性化的内容，而表单项的值则可以保存更方便被处理的对象)</p>
<p>使用示例</p>
<div class="demo-cb highlight-default notranslate" id="demo-input-action"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">set_now_ts</span><span class="p">(</span><span class="n">set_value</span><span class="p">):</span>
    <span class="n">set_value</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>

<span class="n">ts</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">NUMBER</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Now&#39;</span><span class="p">,</span> <span class="n">set_now_ts</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span><span class="n">timedelta</span>
<span class="k">def</span> <span class="nf">select_date</span><span class="p">(</span><span class="n">set_value</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">popup</span><span class="p">(</span><span class="s1">&#39;Select Date&#39;</span><span class="p">):</span>
        <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;Today&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="p">[</span><span class="k">lambda</span><span class="p">:</span> <span class="n">set_value</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">(),</span> <span class="s1">&#39;Today&#39;</span><span class="p">)])</span>
        <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;Yesterday&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="p">[</span><span class="k">lambda</span><span class="p">:</span> <span class="n">set_value</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;Yesterday&#39;</span><span class="p">)])</span>

<span class="n">d</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Select&#39;</span><span class="p">,</span> <span class="n">select_date</span><span class="p">),</span> <span class="n">readonly</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">put_text</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p>Note: 当使用 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程的会话实现</span></a> 时，回调函数 <code class="docutils literal notranslate"><span class="pre">callback</span></code> 可以为协程函数.</p>
</p></li>
<li><p><strong>onchange</strong> (<em>callable</em>) – <p>A callback function which will be called when user change the value of this input field.</p>
<p><code class="docutils literal notranslate"><span class="pre">onchange</span></code> 回调函数接收一个参数——输入项改变后的值。 <code class="docutils literal notranslate"><span class="pre">onchange</span></code> 的典型用途是配合 <a class="reference internal" href="#pywebio.input.input_update" title="pywebio.input.input_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_update()</span></code></a> 来在一个表单中实现相互依赖的输入。</p>
</p></li>
<li><p><strong>placeholder</strong> (<em>str</em>) – 输入框的提示内容。提示内容会在输入框未输入值时以浅色字体显示在输入框中</p></li>
<li><p><strong>required</strong> (<em>bool</em>) – 当前输入是否为必填项，默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><strong>readonly</strong> (<em>bool</em>) – 输入框是否为只读</p></li>
<li><p><strong>datalist</strong> (<em>list</em>) – 输入建议内容列表，在页面上的显示效果为下拉候选列表，用户可以忽略建议内容列表而输入其他内容。仅当输入类型 <code class="docutils literal notranslate"><span class="pre">type</span></code> 为 <code class="xref py py-obj docutils literal notranslate"><span class="pre">TEXT</span></code> 时可用</p></li>
<li><p><strong>help_text</strong> (<em>str</em>) – 输入框的帮助文本。帮助文本会以小号字体显示在输入框下方</p></li>
<li><p><strong>other_html_attrs</strong> – 在输入框上附加的额外html属性。参考： <a class="reference external" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/input#%E5%B1%9E%E6%80%A7">https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/input#%E5%B1%9E%E6%80%A7</a></p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>用户输入的值</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.textarea">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">textarea</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">placeholder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">other_html_attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#textarea"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.textarea" title="永久链接至目标">¶</a></dt>
<dd><p>文本输入域（多行文本输入）</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> (<em>int</em>) – 输入框的最多可显示的文本的行数，内容超出时会显示滚动条</p></li>
<li><p><strong>maxlength</strong> (<em>int</em>) – 最大允许用户输入的字符长度 (Unicode) 。未指定表示无限长度</p></li>
<li><p><strong>minlength</strong> (<em>int</em>) – 最少需要用户输入的字符长度(Unicode)</p></li>
<li><p><strong>code</strong> (<em>dict/bool</em>) – <p>通过提供 <a class="reference external" href="https://codemirror.net/">Codemirror</a> 参数让文本输入域具有代码编辑器样式:</p>
<div class="demo-cb highlight-default notranslate" id="demo-textarea-code"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">textarea</span><span class="p">(</span><span class="s1">&#39;Text area&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
    <span class="s1">&#39;theme&#39;</span><span class="p">:</span> <span class="s1">&#39;darcula&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>可以直接使用 <code class="docutils literal notranslate"><span class="pre">code={}</span></code> 或 <code class="docutils literal notranslate"><span class="pre">code=True</span></code>  开启代码编辑样式。代码编辑区支持使用 <code class="docutils literal notranslate"><span class="pre">Esc</span></code> 或 <code class="docutils literal notranslate"><span class="pre">F11</span></code> 切换全屏。</p>
<p><a class="reference internal" href="index.html#codemirror-options"><span class="std std-ref">这里</span></a> 列举了一些常用的Codemirror选项</p>
</p></li>
<li><p><strong>label</strong><strong>, </strong><strong>validate</strong><strong>, </strong><strong>name</strong><strong>, </strong><strong>value</strong><strong>, </strong><strong>onchange</strong><strong>, </strong><strong>placeholder</strong><strong>, </strong><strong>required</strong><strong>, </strong><strong>readonly</strong><strong>, </strong><strong>help_text</strong><strong>, </strong><strong>other_html_attrs</strong> (<em>-</em>) – 与 <a class="reference internal" href="#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a> 输入函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>用户输入的文本</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.select">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">select</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiple</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">other_html_attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#select"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.select" title="永久链接至目标">¶</a></dt>
<dd><p>下拉选择框</p>
<p>默认单选，可以通过设置 <code class="docutils literal notranslate"><span class="pre">multiple</span></code> 参数来允许多选</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>options</strong> (<em>list</em>) – <p>可选项列表。列表项的可用形式有：</p>
<ul>
<li><p>dict:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;label&quot;</span><span class="p">:(</span><span class="nb">str</span><span class="p">)</span> <span class="n">选项标签</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:(</span><span class="nb">object</span><span class="p">)</span> <span class="n">选项值</span><span class="p">,</span>
    <span class="s2">&quot;selected&quot;</span><span class="p">:(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span> <span class="n">是否默认选中</span><span class="p">,</span>
    <span class="s2">&quot;disabled&quot;</span><span class="p">:(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span> <span class="n">是否禁止选中</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>tuple or list: <code class="docutils literal notranslate"><span class="pre">(label,</span> <span class="pre">value,</span> <span class="pre">[selected,]</span> <span class="pre">[disabled])</span></code></p></li>
<li><p>单值: 此时label和value使用相同的值</p></li>
</ul>
<p>注意:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">value</span></code> 可以为任意可JSON序列化对象</p></li>
<li><p>若 <code class="docutils literal notranslate"><span class="pre">multiple</span></code> 选项不为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 则可选项列表最多仅能有一项的 <code class="docutils literal notranslate"><span class="pre">selected</span></code> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p></li>
</ol>
</p></li>
<li><p><strong>multiple</strong> (<em>bool</em>) – 是否可以多选. 默认单选</p></li>
<li><p><strong>value</strong> (<em>list</em><em> or </em><em>str</em>) – 下拉选择框初始选中项的值。当 <code class="docutils literal notranslate"><span class="pre">multiple=True</span></code> 时， <code class="docutils literal notranslate"><span class="pre">value</span></code> 需为list，否则为单个选项的值。
你也可以通过设置 <code class="docutils literal notranslate"><span class="pre">options</span></code> 列表项中的 <code class="docutils literal notranslate"><span class="pre">selected</span></code> 字段来设置默认选中选项。
最终选中项为 <code class="docutils literal notranslate"><span class="pre">value</span></code> 参数和 <code class="docutils literal notranslate"><span class="pre">options</span></code> 中设置的并集。</p></li>
<li><p><strong>required</strong> (<em>bool</em>) – 是否至少选择一项，仅在 <code class="docutils literal notranslate"><span class="pre">multiple=True</span></code> 时可用</p></li>
<li><p><strong>label</strong><strong>, </strong><strong>validate</strong><strong>, </strong><strong>name</strong><strong>, </strong><strong>onchange</strong><strong>, </strong><strong>help_text</strong><strong>, </strong><strong>other_html_attrs</strong> (<em>-</em>) – 与 <a class="reference internal" href="#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a> 输入函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>如果 <code class="docutils literal notranslate"><span class="pre">multiple=True</span></code> 时，返回用户选中的 <code class="docutils literal notranslate"><span class="pre">options</span></code> 中的值的列表；否则，返回用户选中的 <code class="docutils literal notranslate"><span class="pre">options</span></code> 中的值</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.checkbox">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">checkbox</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">other_html_attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#checkbox"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.checkbox" title="永久链接至目标">¶</a></dt>
<dd><p>勾选选项。可以多选，也可以不选。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>options</strong> (<em>list</em>) – 可选项列表。格式与同 <a class="reference internal" href="#pywebio.input.select" title="pywebio.input.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select()</span></code></a> 函数的 <code class="docutils literal notranslate"><span class="pre">options</span></code> 参数</p></li>
<li><p><strong>inline</strong> (<em>bool</em>) – 是否将选项显示在一行上。默认每个选项单独占一行</p></li>
<li><p><strong>value</strong> (<em>list</em>) – 勾选选项初始选中项。为选项值的列表。你也可以通过设置 <code class="docutils literal notranslate"><span class="pre">options</span></code> 列表项中的 <code class="docutils literal notranslate"><span class="pre">selected</span></code> 字段来设置默认选中选项。</p></li>
<li><p><strong>label</strong><strong>, </strong><strong>validate</strong><strong>, </strong><strong>name</strong><strong>, </strong><strong>onchange</strong><strong>, </strong><strong>help_text</strong><strong>, </strong><strong>other_html_attrs</strong> (<em>-</em>) – 与 <a class="reference internal" href="#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a> 输入函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>用户选中的 options 中的值的列表。当用户没有勾选任何选项时，返回空列表</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.radio">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">radio</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">other_html_attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#radio"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.radio" title="永久链接至目标">¶</a></dt>
<dd><p>单选选项</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>options</strong> (<em>list</em>) – 可选项列表。格式与同 <a class="reference internal" href="#pywebio.input.select" title="pywebio.input.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select()</span></code></a> 函数的 <code class="docutils literal notranslate"><span class="pre">options</span></code> 参数</p></li>
<li><p><strong>inline</strong> (<em>bool</em>) – 是否将选项显示在一行上。默认每个选项单独占一行</p></li>
<li><p><strong>value</strong> (<em>str</em>) – 可选项列表。格式与同 <a class="reference internal" href="#pywebio.input.select" title="pywebio.input.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select()</span></code></a> 函数的 <code class="docutils literal notranslate"><span class="pre">options</span></code> 参数</p></li>
<li><p><strong>required</strong> (<em>bool</em>) – 是否一定要选择一项（默认条件下用户可以不选择任何选项）</p></li>
<li><p><strong>label</strong><strong>, </strong><strong>validate</strong><strong>, </strong><strong>name</strong><strong>, </strong><strong>onchange</strong><strong>, </strong><strong>help_text</strong><strong>, </strong><strong>other_html_attrs</strong> (<em>-</em>) – 与 <a class="reference internal" href="#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a> 输入函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>用户选中的选项的值, 如果用户没有选任何值，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.actions">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">actions</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buttons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#actions"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.actions" title="永久链接至目标">¶</a></dt>
<dd><p>按钮选项</p>
<p>在表单上显示为一组按钮，用户点击按钮后依据按钮类型的不同有不同的表现。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buttons</strong> (<em>list</em>) – <p>按钮列表。列表项的可用形式有：</p>
<blockquote>
<div><ul>
<li><p>dict:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;label&quot;</span><span class="p">:(</span><span class="nb">str</span><span class="p">)</span> <span class="n">按钮标签</span><span class="p">,</span>
   <span class="s2">&quot;value&quot;</span><span class="p">:(</span><span class="nb">object</span><span class="p">)</span> <span class="n">按钮值</span><span class="p">,</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:(</span><span class="nb">str</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span> <span class="n">按钮类型</span><span class="p">,</span>
   <span class="s2">&quot;disabled&quot;</span><span class="p">:(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span> <span class="n">是否禁止选择</span><span class="p">,</span>
   <span class="s2">&quot;color&quot;</span><span class="p">:(</span><span class="nb">str</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span> <span class="n">按钮颜色</span>

<span class="p">}</span>
</pre></div>
</div>
<p>若 <code class="docutils literal notranslate"><span class="pre">type='reset'/'cancel'</span></code> 或 <code class="docutils literal notranslate"><span class="pre">disabled=True</span></code> 可省略 <code class="docutils literal notranslate"><span class="pre">value</span></code></p>
</li>
<li><p>tuple or list: <code class="docutils literal notranslate"><span class="pre">(label,</span> <span class="pre">value,</span> <span class="pre">[type],</span> <span class="pre">[disabled])</span></code></p></li>
<li><p>单值: 此时label和value使用相同的值</p></li>
</ul>
</div></blockquote>
<p>其中， <code class="docutils literal notranslate"><span class="pre">value</span></code> 可以为任意可JSON序列化的对象。</p>
<p><code class="docutils literal notranslate"><span class="pre">type</span></code> 可选值为:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'submit'</span></code> : 点击按钮后，立即将整个表单提交，最终表单中本项的值为被点击按钮的 <code class="docutils literal notranslate"><span class="pre">value</span></code> 值。 <code class="docutils literal notranslate"><span class="pre">'submit'</span></code> 为 <code class="docutils literal notranslate"><span class="pre">type</span></code> 的默认值</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'cancel'</span></code> : 取消输入。点击按钮后，立即将整个表单提交，表单值返回 <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'reset'</span></code> : 点击按钮后，将整个表单重置，输入项将变为初始状态。
注意：点击 <code class="docutils literal notranslate"><span class="pre">type=reset</span></code> 的按钮后，并不会提交表单， <code class="docutils literal notranslate"><span class="pre">actions()</span></code> 调用也不会返回</p></li>
</ul>
<p>按钮的 <code class="docutils literal notranslate"><span class="pre">color</span></code> 值可以为：  <code class="xref py py-obj docutils literal notranslate"><span class="pre">primary</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">secondary</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">success</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">danger</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">warning</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">info</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">light</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">dark</span></code> .</p>
</div></blockquote>
</p></li>
<li><p><strong>label</strong><strong>, </strong><strong>name</strong><strong>, </strong><strong>help_text</strong> (<em>-</em>) – 与 <a class="reference internal" href="#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a> 输入函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>若用户点击点击 <code class="docutils literal notranslate"><span class="pre">type=submit</span></code> 按钮进行表单提交，返回用户点击的按钮的值；
若用户点击 <code class="docutils literal notranslate"><span class="pre">type=cancel</span></code> 按钮或通过其它方式提交表单，则返回 <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
<p>当 <code class="docutils literal notranslate"><span class="pre">actions()</span></code> 作为 <a class="reference internal" href="#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group()</span></code></a> 中的最后一个输入项、并且含有 <code class="docutils literal notranslate"><span class="pre">type='submit'</span></code> 的按钮时，<a class="reference internal" href="#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group()</span></code></a> 表单默认的提交按钮会被当前 <code class="docutils literal notranslate"><span class="pre">actions()</span></code> 替换</p>
<p><strong>actions() 的使用场景</strong></p>
<ul class="simple" id="custom-form-ctrl-btn">
<li><p>实现简单的选择操作:</p></li>
</ul>
<div class="demo-cb highlight-default notranslate" id="demo-actions-select"><div class="highlight"><pre><span></span><span class="n">confirm</span> <span class="o">=</span> <span class="n">actions</span><span class="p">(</span><span class="s1">&#39;Confirm to delete file?&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;confirm&#39;</span><span class="p">,</span> <span class="s1">&#39;cancel&#39;</span><span class="p">],</span>
                      <span class="n">help_text</span><span class="o">=</span><span class="s1">&#39;Unrecoverable after file deletion&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">confirm</span><span class="o">==</span><span class="s1">&#39;confirm&#39;</span><span class="p">:</span>  
    <span class="o">...</span>  
</pre></div>
</div>
<p>相比于其他输入项，使用 <a class="reference internal" href="#pywebio.input.actions" title="pywebio.input.actions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">actions()</span></code></a> 用户只需要点击一次就可完成提交。</p>
<ul class="simple">
<li><p>替换默认的提交按钮:</p></li>
</ul>
<div class="demo-cb highlight-default notranslate" id="demo-actions-submit"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="n">input_group</span><span class="p">(</span><span class="s1">&#39;Add user&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">TEXT</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PASSWORD</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">actions</span><span class="p">(</span><span class="s1">&#39;actions&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Save&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;save&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Save and add next&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;save_and_continue&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Reset&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;reset&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Cancel&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;cancel&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;danger&#39;</span><span class="p">},</span>
    <span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;action&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s1">&#39;actions&#39;</span><span class="p">),</span>
<span class="p">])</span>
<span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;info = &#39;</span> <span class="o">+</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="k">if</span> <span class="n">info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">save_user</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span>  
    <span class="k">if</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;save_and_continue&#39;</span><span class="p">:</span>
        <span class="n">add_next</span><span class="p">()</span>  
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.file_upload">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">file_upload</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accept</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">placeholder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Choose</span> <span class="pre">file'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiple</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_total_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">other_html_attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#file_upload"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.file_upload" title="永久链接至目标">¶</a></dt>
<dd><p>文件上传</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>accept</strong> (<em>str</em><em> or </em><em>list</em>) – <p>单值或列表, 表示可接受的文件类型。文件类型的可用形式有：</p>
<ul>
<li><p>以 <code class="docutils literal notranslate"><span class="pre">.</span></code> 字符开始的文件扩展名（例如：<code class="docutils literal notranslate"><span class="pre">.jpg,</span> <span class="pre">.png,</span> <span class="pre">.doc</span></code>）。
注意：截至本文档编写之时，微信内置浏览器还不支持这种语法</p></li>
<li><p>一个有效的 MIME 类型。
例如： <code class="docutils literal notranslate"><span class="pre">application/pdf</span></code> 、 <code class="docutils literal notranslate"><span class="pre">audio/*</span></code> 表示音频文件、<code class="docutils literal notranslate"><span class="pre">video/*</span></code> 表示视频文件、<code class="docutils literal notranslate"><span class="pre">image/*</span></code> 表示图片文件。
参考 <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types">https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types</a></p></li>
</ul>
</p></li>
<li><p><strong>placeholder</strong> (<em>str</em>) – 未上传文件时，文件上传框内显示的文本</p></li>
<li><p><strong>multiple</strong> (<em>bool</em>) – 是否允许多文件上传，默认关闭</p></li>
<li><p><strong>max_size</strong> (<em>int/str</em>) – <dl class="simple">
<dt>单个文件的最大大小，超过限制将会禁止上传。</dt><dd><p>默认为0，表示不限制上传文件的大小。</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">max_size</span></code> 值可以为数字表示的字节数，或以 <code class="xref py py-obj docutils literal notranslate"><span class="pre">K</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">M</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">G</span></code> 结尾表示的字符串(分别表示 千字节、兆字节、吉字节，大小写不敏感)。例如:
<code class="docutils literal notranslate"><span class="pre">max_size=500</span></code> , <code class="docutils literal notranslate"><span class="pre">max_size='40K'</span></code> , <code class="docutils literal notranslate"><span class="pre">max_size='3M'</span></code></p>
</p></li>
<li><p><strong>max_total_size</strong> (<em>int/str</em>) – 所有文件的最大大小，超过限制将会禁止上传。仅在 <code class="docutils literal notranslate"><span class="pre">multiple=True</span></code> 时可用，默认不限制上传文件的大小。 格式同 <code class="docutils literal notranslate"><span class="pre">max_size</span></code> 参数</p></li>
<li><p><strong>required</strong> (<em>bool</em>) – 是否必须要上传文件。默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><strong>label</strong><strong>, </strong><strong>name</strong><strong>, </strong><strong>help_text</strong><strong>, </strong><strong>other_html_attrs</strong> (<em>-</em>) – 与 <a class="reference internal" href="#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a> 输入函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p><p><code class="docutils literal notranslate"><span class="pre">multiple=False</span></code> 时(默认)，返回dict:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    &#39;filename&#39;: 文件名，
    &#39;content&#39;：文件二进制数据(bytes object),
    &#39;mime_type&#39;: 文件的MIME类型,
    &#39;last_modified&#39;: 文件上次修改时间(时间戳)
}
</pre></div>
</div>
<p>若用户没有上传文件，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> 。</p>
<p><code class="docutils literal notranslate"><span class="pre">multiple=True</span></code> 时，返回列表，列表项格式同上文 <code class="docutils literal notranslate"><span class="pre">multiple=False</span></code> 时的返回值；若用户没有上传文件，返回空列表。</p>
</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>若上传大文件请留意Web框架的文件上传大小限制设置。在使用 <a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">start_server()</span></code></a> 或 <a class="reference internal" href="index.html#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-func docutils literal notranslate"><span class="pre">path_deploy()</span></code></a> 启动PyWebIO应用时，
可通过 <code class="xref py py-obj docutils literal notranslate"><span class="pre">max_payload_size</span></code> 参数设置Web框架允许上传的最大文件大小</p>
</div>
<div class="demo-cb highlight-default notranslate" id="demo-file-upload-example"><div class="highlight"><pre><span></span><span class="c1"># Upload a file and save to server                      </span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">file_upload</span><span class="p">(</span><span class="s2">&quot;Upload a file&quot;</span><span class="p">)</span>                  
<span class="nb">open</span><span class="p">(</span><span class="s1">&#39;asset/&#39;</span><span class="o">+</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">],</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">])</span>  

<span class="n">imgs</span> <span class="o">=</span> <span class="n">file_upload</span><span class="p">(</span><span class="s2">&quot;Select some pictures:&quot;</span><span class="p">,</span> <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;image/*&quot;</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">imgs</span><span class="p">:</span>
    <span class="n">put_image</span><span class="p">(</span><span class="n">img</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.slider">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">slider</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">other_html_attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#slider"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.slider" title="永久链接至目标">¶</a></dt>
<dd><p>滑块输入</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>int/float</em>) – 滑块的初始值</p></li>
<li><p><strong>min_value</strong> (<em>int/float</em>) – 滑块最小允许的值</p></li>
<li><p><strong>max_value</strong> (<em>int/float</em>) – 滑块最大允许的值</p></li>
<li><p><strong>step</strong> (<em>int</em>) – 滑动的步长。仅当 <code class="docutils literal notranslate"><span class="pre">value</span></code>、 <code class="docutils literal notranslate"><span class="pre">min_value</span></code> 和 <code class="docutils literal notranslate"><span class="pre">max_value</span></code> 全为int时有效</p></li>
<li><p><strong>label</strong><strong>, </strong><strong>name</strong><strong>, </strong><strong>validate</strong><strong>, </strong><strong>onchange</strong><strong>, </strong><strong>required</strong><strong>, </strong><strong>help_text</strong><strong>, </strong><strong>other_html_attrs</strong> (<em>-</em>) – 与 <a class="reference internal" href="#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input</span></code></a> 输入函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">Return int/float</dt>
<dd class="field-even"><p>若 <code class="docutils literal notranslate"><span class="pre">value</span></code>, <code class="docutils literal notranslate"><span class="pre">min_value</span></code> 和 <code class="docutils literal notranslate"><span class="pre">max_value</span></code> 中含有float类型，则返回值为float，否则返回值为int类型</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.input_group">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">input_group</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cancelable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#input_group"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.input_group" title="永久链接至目标">¶</a></dt>
<dd><p>输入组。向页面上展示一组输入</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> (<em>str</em>) – 输入组标签</p></li>
<li><p><strong>inputs</strong> (<em>list</em>) – 输入项列表。列表的内容为对单项输入函数的调用，并在单项输入函数中传入 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数。</p></li>
<li><p><strong>validate</strong> (<em>callable</em>) – <p>输入组校验函数。</p>
<p>函数签名：<code class="docutils literal notranslate"><span class="pre">callback(data)</span> <span class="pre">-&gt;</span> <span class="pre">(name,</span> <span class="pre">error_msg)</span></code>
<code class="docutils literal notranslate"><span class="pre">validate</span></code> 接收整个表单的值为参数，当校验表单值有效时，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，当某项输入值无效时，返回出错输入项的 <code class="docutils literal notranslate"><span class="pre">name</span></code> 值和错误提示. 比如:</p>
</p></li>
</ul>
</dd>
</dl>
<div class="demo-cb highlight-default notranslate" id="demo-input-group-valid-func"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_form</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Name to long!&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;Age cannot be negative!&#39;</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">input_group</span><span class="p">(</span><span class="s2">&quot;Basic info&quot;</span><span class="p">,[</span>
    <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Input your name&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">),</span>
    <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Repeat your age&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">NUMBER</span><span class="p">)</span>
<span class="p">],</span> <span class="n">validate</span><span class="o">=</span><span class="n">check_form</span><span class="p">)</span>

<span class="n">put_text</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>cancelable</strong> (<em>bool</em>) – <p>表单是否可以取消。若 <code class="docutils literal notranslate"><span class="pre">cancelable=True</span></code> 则会在表单底部显示一个“取消”按钮，默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 。</p>
<p>注意：若 <code class="docutils literal notranslate"><span class="pre">inputs</span></code> 中最后一项输入为 <a class="reference internal" href="#pywebio.input.actions" title="pywebio.input.actions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">actions()</span></code></a> ，则忽略 <code class="docutils literal notranslate"><span class="pre">cancelable</span></code></p>
</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>若用户取消表单，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> ,否则返回一个 <code class="docutils literal notranslate"><span class="pre">dict</span></code> , 其键为输入项的 <code class="docutils literal notranslate"><span class="pre">name</span></code> 值，字典值为输入项的值</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.input.input_update">
<code class="sig-prename descclassname"><span class="pre">pywebio.input.</span></code><code class="sig-name descname"><span class="pre">input_update</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/input.html#input_update"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.input.input_update" title="永久链接至目标">¶</a></dt>
<dd><p>更新输入项的属性。本函数仅能在输入函数的 <code class="docutils literal notranslate"><span class="pre">onchange</span></code>  回调中使用。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – 目标输入项的  <code class="docutils literal notranslate"><span class="pre">name</span></code> 。可选，默认为当前触发 <code class="docutils literal notranslate"><span class="pre">onchange</span></code> 回调的输入项</p></li>
<li><p><strong>spec</strong> – 需要更新的输入项参数。注意一下参数无法被更新：<code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">validate</span></code>, <code class="docutils literal notranslate"><span class="pre">action</span></code>, <code class="docutils literal notranslate"><span class="pre">code</span></code>, <code class="docutils literal notranslate"><span class="pre">onchange</span></code>, <code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></li>
</ul>
</dd>
</dl>
<p>一个具有依赖关系的输入项的示例：</p>
<div class="demo-cb highlight-default notranslate" id="demo-input-update"><div class="highlight"><pre><span></span><span class="n">country2city</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;China&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Beijing&#39;</span><span class="p">,</span> <span class="s1">&#39;Shanghai&#39;</span><span class="p">,</span> <span class="s1">&#39;Hong Kong&#39;</span><span class="p">],</span>
    <span class="s1">&#39;USA&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;Los Angeles&#39;</span><span class="p">,</span> <span class="s1">&#39;San Francisco&#39;</span><span class="p">],</span>
<span class="p">}</span>
<span class="n">countries</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">country2city</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">input_group</span><span class="p">(</span><span class="s2">&quot;Select a location&quot;</span><span class="p">,</span> <span class="p">[</span>
    <span class="n">select</span><span class="p">(</span><span class="s1">&#39;Country&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">countries</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">,</span>
           <span class="n">onchange</span><span class="o">=</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">input_update</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">country2city</span><span class="p">[</span><span class="n">c</span><span class="p">])),</span>
    <span class="n">select</span><span class="p">(</span><span class="s1">&#39;City&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">country2city</span><span class="p">[</span><span class="n">countries</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;city&#39;</span><span class="p">),</span>
<span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<span id="document-output"></span><div class="section" id="module-pywebio.output">
<span id="pywebio-output-make-output-to-web-browser"></span><h3><code class="docutils literal notranslate"><span class="pre">pywebio.output</span></code> — 输出模块<a class="headerlink" href="#module-pywebio.output" title="永久链接至标题">¶</a></h3>
<p>本模块提供了一系列函数来输出不同形式的内容到用户浏览器，并支持灵活的输出控制。</p>
<div class="section" id="functions-list">
<span id="output-func-list"></span><h4>函数清单<a class="headerlink" href="#functions-list" title="永久链接至标题">¶</a></h4>
<div class="line-block">
<div class="line">下表为PyWebIO提供的输出相关的函数。</div>
<div class="line">其中标记有 <code class="docutils literal notranslate"><span class="pre">*</span></code> 的函数表示其支持接收 <code class="docutils literal notranslate"><span class="pre">put_xxx</span></code> 调用作为参数。</div>
<div class="line">标记有 <code class="docutils literal notranslate"><span class="pre">†</span></code> 的函数表示其支持作为上下文管理器使用。</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 56%" />
</colgroup>
<tbody>
<tr class="row-odd"><td></td>
<td><p><strong>函数</strong></p></td>
<td><p><strong>简介</strong></p></td>
</tr>
<tr class="row-even"><td rowspan="6"><p>输出域Scope</p></td>
<td><p><a class="reference internal" href="#pywebio.output.put_scope" title="pywebio.output.put_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_scope</span></code></a></p></td>
<td><p>创建一个新的scope.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.use_scope" title="pywebio.output.use_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_scope</span></code></a><sup>†</sup></p></td>
<td><p>进入输出域</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.get_scope" title="pywebio.output.get_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_scope</span></code></a></p></td>
<td><p>获取当前正在使用的输出域</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.clear" title="pywebio.output.clear"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear</span></code></a></p></td>
<td><p>清空scope内容</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.remove" title="pywebio.output.remove"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove</span></code></a></p></td>
<td><p>移除Scope</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.scroll_to" title="pywebio.output.scroll_to"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scroll_to</span></code></a></p></td>
<td><p>将页面滚动到 scope Scope处</p></td>
</tr>
<tr class="row-even"><td rowspan="16"><p>内容输出</p></td>
<td><p><a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a></p></td>
<td><p>输出文本</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.put_markdown" title="pywebio.output.put_markdown"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_markdown</span></code></a></p></td>
<td><p>输出Markdown</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><a class="reference internal" href="#pywebio.output.put_info" title="pywebio.output.put_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_info</span></code></a><sup>*†</sup></div>
<div class="line"><a class="reference internal" href="#pywebio.output.put_success" title="pywebio.output.put_success"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_success</span></code></a><sup>*†</sup></div>
<div class="line"><a class="reference internal" href="#pywebio.output.put_warning" title="pywebio.output.put_warning"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_warning</span></code></a><sup>*†</sup></div>
<div class="line"><a class="reference internal" href="#pywebio.output.put_error" title="pywebio.output.put_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_error</span></code></a><sup>*†</sup></div>
</div>
</td>
<td><p>输出通知消息</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.put_html" title="pywebio.output.put_html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_html</span></code></a></p></td>
<td><p>输出Html</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.put_link" title="pywebio.output.put_link"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_link</span></code></a></p></td>
<td><p>输出链接</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.put_processbar" title="pywebio.output.put_processbar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_processbar</span></code></a></p></td>
<td><p>输出进度条</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.put_loading" title="pywebio.output.put_loading"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_loading</span></code></a><sup>†</sup></p></td>
<td><p>输出加载提示</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.put_code" title="pywebio.output.put_code"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_code</span></code></a></p></td>
<td><p>输出代码块</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.put_table" title="pywebio.output.put_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_table</span></code></a><sup>*</sup></p></td>
<td><p>输出表格</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><a class="reference internal" href="#pywebio.output.put_button" title="pywebio.output.put_button"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_button</span></code></a></div>
<div class="line"><a class="reference internal" href="#pywebio.output.put_buttons" title="pywebio.output.put_buttons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_buttons</span></code></a></div>
</div>
</td>
<td><p>输出按钮，并绑定点击事件</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.put_image" title="pywebio.output.put_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_image</span></code></a></p></td>
<td><p>输出图片</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.put_file" title="pywebio.output.put_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_file</span></code></a></p></td>
<td><p>显示一个文件下载链接</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.put_tabs" title="pywebio.output.put_tabs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_tabs</span></code></a><sup>*</sup></p></td>
<td><p>输出横向标签栏Tabs</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.put_collapse" title="pywebio.output.put_collapse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_collapse</span></code></a><sup>*†</sup></p></td>
<td><p>输出可折叠的内容</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.put_scrollable" title="pywebio.output.put_scrollable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_scrollable</span></code></a><sup>*†</sup></p></td>
<td><div class="line-block">
<div class="line">固定高度内容输出区域</div>
<div class="line">内容超出则显示滚动条</div>
<div class="line">.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.put_widget" title="pywebio.output.put_widget"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_widget</span></code></a><sup>*</sup></p></td>
<td><p>输出自定义的控件</p></td>
</tr>
<tr class="row-even"><td rowspan="3"><p>其他交互</p></td>
<td><p><a class="reference internal" href="#pywebio.output.toast" title="pywebio.output.toast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">toast</span></code></a></p></td>
<td><p>显示一条通知消息</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.popup" title="pywebio.output.popup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popup</span></code></a><sup>*†</sup></p></td>
<td><p>显示弹窗</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.close_popup" title="pywebio.output.close_popup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">close_popup</span></code></a></p></td>
<td><p>关闭正在显示的弹窗</p></td>
</tr>
<tr class="row-odd"><td rowspan="5"><p>布局与样式</p></td>
<td><p><a class="reference internal" href="#pywebio.output.put_row" title="pywebio.output.put_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_row</span></code></a><sup>*†</sup></p></td>
<td><p>使用行布局输出内容</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.put_column" title="pywebio.output.put_column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_column</span></code></a><sup>*†</sup></p></td>
<td><p>使用列布局输出内容</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.put_grid" title="pywebio.output.put_grid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_grid</span></code></a><sup>*</sup></p></td>
<td><p>使用网格布局输出内容</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio.output.span" title="pywebio.output.span"><code class="xref py py-obj docutils literal notranslate"><span class="pre">span</span></code></a></p></td>
<td><p>在 <a class="reference internal" href="#pywebio.output.put_table" title="pywebio.output.put_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_table()</span></code></a> 和 <a class="reference internal" href="#pywebio.output.put_grid" title="pywebio.output.put_grid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_grid()</span></code></a> 中设置内容跨单元格</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio.output.style" title="pywebio.output.style"><code class="xref py py-obj docutils literal notranslate"><span class="pre">style</span></code></a><sup>*</sup></p></td>
<td><p>自定义输出内容的css样式</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="output-scope">
<h4>输出域Scope<a class="headerlink" href="#output-scope" title="永久链接至标题">¶</a></h4>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#output-scope"><span class="std std-ref">Use Guide: Output Scope</span></a></p></li>
</ul>
</div>
<dl class="py function">
<dt id="pywebio.output.put_scope">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_scope</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_scope"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_scope" title="永久链接至目标">¶</a></dt>
<dd><p>输出一个输出域</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – </p></li>
<li><p><strong>content</strong> (<em>list/put_xxx</em><em>(</em><em>)</em>) – 输出域里的初始内容，可以为 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用或其列表。</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.use_scope">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">use_scope</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#use_scope"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.use_scope" title="永久链接至目标">¶</a></dt>
<dd><p>scope的上下文管理器和装饰器。用于创建一个新的输出域并进入，或进入一个已经存在的输出域。</p>
<p>参见 <a class="reference internal" href="index.html#use-scope"><span class="std std-ref">用户手册-use_scope()</span></a></p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – scope名. 若为None则生成一个全局唯一的scope名.（以上下文管理器形式的调用时，上下文管理器会返回scope名）</p></li>
<li><p><strong>clear</strong> (<em>bool</em>) – 在进入scope前是否要清除scope里的内容</p></li>
</ul>
</dd>
<dt class="field-even">Usage</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="k">as</span> <span class="n">scope_name</span><span class="p">:</span>
    <span class="n">put_xxx</span><span class="p">()</span>

<span class="nd">@use_scope</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="n">put_xxx</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.get_scope">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">get_scope</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stack_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#get_scope"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.get_scope" title="永久链接至目标">¶</a></dt>
<dd><p>获取当前运行时scope栈中的scope名</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>stack_idx</strong> (<em>int</em>) – 当前运行时的scope栈索引。-1表示当前scope，-2表示进入当前scope前的scope，依次类推；0表示 <code class="xref py py-obj docutils literal notranslate"><span class="pre">ROOT</span></code> scope</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>返回Scope栈中对应索引的scope名，索引错误时返回None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.clear">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">clear</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#clear"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.clear" title="永久链接至目标">¶</a></dt>
<dd><p>清空scope内容</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>scope</strong> (<em>str</em>) – 目标scope名。默认为当前scope</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.remove">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">remove</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#remove"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.remove" title="永久链接至目标">¶</a></dt>
<dd><p>移除Scope</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>scope</strong> (<em>str</em>) – 目标scope名。默认为当前scope</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.scroll_to">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">scroll_to</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'top'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#scroll_to"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.scroll_to" title="永久链接至目标">¶</a></dt>
<dd><p>将页面滚动到 <code class="docutils literal notranslate"><span class="pre">scope</span></code> Scope处</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scope</strong> (<em>str</em>) – Target scope. Default is the current scope.</p></li>
<li><p><strong>position</strong> (<em>str</em>) – <p>将Scope置于屏幕可视区域的位置。可用值：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'top'</span></code> : 滚动页面，让Scope位于屏幕可视区域顶部</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'middle'</span></code> : 滚动页面，让Scope位于屏幕可视区域中间</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'bottom'</span></code> : 滚动页面，让Scope位于屏幕可视区域底部</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="content-outputting">
<h4>内容输出<a class="headerlink" href="#content-outputting" title="永久链接至标题">¶</a></h4>
<p id="scope-param"><strong>Scope related parameters of output function</strong></p>
<p>输出函数默认将内容输出到“当前scope”，“当前scope”可由 <a class="reference internal" href="#pywebio.output.use_scope" title="pywebio.output.use_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">use_scope()</span></code></a> 设置。</p>
<p>另外，所有输入函数都支持使用 <code class="docutils literal notranslate"><span class="pre">scope</span></code> 参数来指定输出的目的scope:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-xxx-scope"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;scope3&#39;</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text1 in scope3&#39;</span><span class="p">)</span>   <span class="c1"># output to current scope: scope3</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text in ROOT scope&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s1">&#39;ROOT&#39;</span><span class="p">)</span>   <span class="c1"># output to ROOT Scope</span>

<span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text2 in scope3&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s1">&#39;scope3&#39;</span><span class="p">)</span>   <span class="c1"># output to scope3</span>
</pre></div>
</div>
<p>以上代码运行结果如下:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">text1</span> <span class="ow">in</span> <span class="n">scope3</span>
<span class="n">text2</span> <span class="ow">in</span> <span class="n">scope3</span>
<span class="n">text</span> <span class="ow">in</span> <span class="n">ROOT</span> <span class="n">scope</span>
</pre></div>
</div>
<p>一个scope可以包含多个输出项，输出函数的默认行为是将内容追加到目标scope中。可以使用输出函数的 <code class="docutils literal notranslate"><span class="pre">position</span></code> 参数来指定输出内容在目标scope中的插入位置。</p>
<p>一个Scope中各次输出的元素具有像数组一样的索引，最前面的编号为0，以此往后递增加一；同样可以使用负数对Scope中的元素进行索引，-1表示最后面的元素，-2表示次后面的元素……</p>
<p><code class="docutils literal notranslate"><span class="pre">position</span></code> 参数类型为整形， <code class="docutils literal notranslate"><span class="pre">position&gt;=0</span></code> 时表示输出内容到目标Scope的第position号元素的前面； <code class="docutils literal notranslate"><span class="pre">position&lt;0</span></code> 时表示输出内容到目标Scope第position号元素之后:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-xxx-position"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;scope1&#39;</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># insert B before A -&gt; B A</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># insert C after B -&gt; B C A</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># insert D before C B -&gt; B D C A</span>
</pre></div>
</div>
<p><strong>Output functions</strong></p>
<dl class="py function">
<dt id="pywebio.output.put_text">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_text</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">texts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_text"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_text" title="永久链接至目标">¶</a></dt>
<dd><p>输出文本</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>texts</strong> – 要输出的内容。类型可以为任意对象，对非字符串对象会应用 <code class="xref py py-obj docutils literal notranslate"><span class="pre">str()</span></code> 函数作为输出值。</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – 输出分隔符</p></li>
<li><p><strong>inline</strong> (<em>bool</em>) – 将文本作为行内元素(连续输出的文本显示在相同的段落中)。默认每次输出的文本都作为一个独立的段落</p></li>
<li><p><strong>scope</strong> (<em>str</em>) – <p>内容输出的目标scope，若scope不存在，则不进行任何输出操作。</p>
<p>可以直接指定目标Scope名，或者使用int通过索引Scope栈来确定Scope</p>
</p></li>
<li><p><strong>position</strong> (<em>int</em>) – 在scope中输出的位置。</p></li>
</ul>
</dd>
</dl>
<p>参数 <code class="xref py py-obj docutils literal notranslate"><span class="pre">scope</span></code> 和 <code class="xref py py-obj docutils literal notranslate"><span class="pre">position</span></code> 的更多使用说明参见 <a class="reference internal" href="#scope-param"><span class="std std-ref">用户手册</span></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_markdown">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_markdown</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mdcontent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lstrip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sanitize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_markdown"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_markdown" title="永久链接至目标">¶</a></dt>
<dd><p>输出Markdown</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mdcontent</strong> (<em>str</em>) – Markdown文本</p></li>
<li><p><strong>lstrip</strong> (<em>bool</em>) – 是否自动移除 <code class="docutils literal notranslate"><span class="pre">mdcontent</span></code> 每一行的前导空白锁进</p></li>
<li><p><strong>options</strong> (<em>dict</em>) – 解析Markdown时的配置参数。
PyWebIO使用 <a class="reference external" href="https://marked.js.org/">marked</a> 解析Markdown, 可配置项参见: <a class="reference external" href="https://marked.js.org/using_advanced#options">https://marked.js.org/using_advanced#options</a> (仅支持配置string和boolean类型的项)</p></li>
<li><p><strong>sanitize</strong> (<em>bool</em>) – 是否使用 <a class="reference external" href="https://github.com/cure53/DOMPurify">DOMPurify</a> 对内容进行过滤来防止XSS攻击。</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p>当使用python三引号语法在函数中输出多行Markdown内容时，你可以缩进Markdown内容来使代码保持美观。PyWebIO会智能地移除Markdown中的缩进:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># good code format</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="n">put_markdown</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&quot;&quot; # H1</span>
<span class="s2">    This is content.</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.5 版更改: </span>Enable <code class="xref py py-obj docutils literal notranslate"><span class="pre">lstrip</span></code> by default.
Deprecate <code class="xref py py-obj docutils literal notranslate"><span class="pre">strip_indent</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_info">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Output:</span><a class="reference internal" href="_modules/pywebio/output.html#put_info"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_info" title="永久链接至目标">¶</a></dt>
<dt id="pywebio.output.put_success">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_success</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Output:</span><a class="reference internal" href="_modules/pywebio/output.html#put_success"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_success" title="永久链接至目标">¶</a></dt>
<dt id="pywebio.output.put_warning">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_warning</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Output:</span><a class="reference internal" href="_modules/pywebio/output.html#put_warning"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_warning" title="永久链接至目标">¶</a></dt>
<dt id="pywebio.output.put_error">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_error</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Output:</span><a class="reference internal" href="_modules/pywebio/output.html#put_error"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_error" title="永久链接至目标">¶</a></dt>
<dd><p>输出通知消息</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contents</strong> – 消息内容. 元素为 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用，其他类型会被转换成 <code class="docutils literal notranslate"><span class="pre">put_text(content)</span></code></p></li>
<li><p><strong>closable</strong> (<em>bool</em>) – 是否在消息框右侧展示一个关闭按钮。</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">1.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_html">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_html</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">html</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sanitize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_html"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_html" title="永久链接至目标">¶</a></dt>
<dd><p>输出Html内容</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>html</strong> – html字符串</p></li>
<li><p><strong>sanitize</strong> (<em>bool</em>) – 是否使用 <a class="reference external" href="https://github.com/cure53/DOMPurify">DOMPurify</a> 对内容进行过滤来防止XSS攻击。</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_link">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_link</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_link"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_link" title="永久链接至目标">¶</a></dt>
<dd><p>输出链接到其他网页或PyWebIO App的超链接</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – 链接名称</p></li>
<li><p><strong>url</strong> (<em>str</em>) – 链接到的页面地址</p></li>
<li><p><strong>app</strong> (<em>str</em>) – 链接到的PyWebIO应用名。参见 <a class="reference internal" href="index.html#server-and-script-mode"><span class="std std-ref">Server模式</span></a></p></li>
<li><p><strong>new_window</strong> (<em>bool</em>) – 是否在新窗口打开链接</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">url</span></code> 和 <code class="docutils literal notranslate"><span class="pre">app</span></code> 参数必须指定一个但不可以同时指定</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_processbar">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_processbar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_close</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_processbar"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_processbar" title="永久链接至目标">¶</a></dt>
<dd><p>输出进度条</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – 进度条名称，为进度条的唯一标识</p></li>
<li><p><strong>init</strong> (<em>float</em>) – 进度条初始值. 进度条的值在 0 ~ 1 之间</p></li>
<li><p><strong>label</strong> (<em>str</em>) – 进度条显示的标签. 默认为当前进度的百分比</p></li>
<li><p><strong>auto_close</strong> (<em>bool</em>) – 是否在进度完成后关闭进度条</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-processbar"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="n">put_processbar</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
    <span class="n">set_processbar</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>使用 <a class="reference internal" href="#pywebio.output.set_processbar" title="pywebio.output.set_processbar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_processbar()</span></code></a> 设置进度条进度</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.set_processbar">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">set_processbar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#set_processbar"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.set_processbar" title="永久链接至目标">¶</a></dt>
<dd><p>设置进度条进度</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – 设置进度条进度</p></li>
<li><p><strong>value</strong> (<em>float</em>) – 进度条的值. 范围在 0 ~ 1 之间</p></li>
<li><p><strong>label</strong> (<em>str</em>) – 进度条显示的标签. 默认为当前进度的百分比</p></li>
</ul>
</dd>
</dl>
<p>参见 <a class="reference internal" href="#pywebio.output.put_processbar" title="pywebio.output.put_processbar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_processbar()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_loading">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_loading</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'border'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dark'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_loading"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_loading" title="永久链接至目标">¶</a></dt>
<dd><p>输出加载提示</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shape</strong> (<em>str</em>) – 加载提示的形状, 可选值: <code class="xref py py-obj docutils literal notranslate"><span class="pre">'border'</span></code> (默认，旋转的圆环)、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'grow'</span></code> (大小渐变的圆点)</p></li>
<li><p><strong>color</strong> (<em>str</em>) – 加载提示的颜色, 可选值: <code class="xref py py-obj docutils literal notranslate"><span class="pre">'primary'</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'secondary'</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'success'</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'danger'</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'warning'</span></code> 、<code class="xref py py-obj docutils literal notranslate"><span class="pre">'info'</span></code>  、<code class="xref py py-obj docutils literal notranslate"><span class="pre">'light'</span></code>  、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'dark'</span></code> (默认)</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p><a class="reference internal" href="#pywebio.output.put_loading" title="pywebio.output.put_loading"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_loading()</span></code></a> 支持直接调用和上下文管理器：</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-loading"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">shape</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;grow&#39;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;primary&#39;</span><span class="p">,</span> <span class="s1">&#39;secondary&#39;</span><span class="p">,</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="s1">&#39;danger&#39;</span><span class="p">,</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="s1">&#39;light&#39;</span><span class="p">,</span> <span class="s1">&#39;dark&#39;</span><span class="p">):</span>
        <span class="n">put_text</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
        <span class="n">put_loading</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

<span class="c1"># Use as context manager, the loading prompt will disappear automatically when the context block exits.</span>
<span class="k">with</span> <span class="n">put_loading</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Some time-consuming operations</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;The answer of the universe is 42&quot;</span><span class="p">)</span>

<span class="c1"># using style() to set the size of the loading prompt</span>
<span class="n">put_loading</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;width:4rem; height:4rem&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_code">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_code</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_code"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_code" title="永久链接至目标">¶</a></dt>
<dd><p>输出代码块</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<em>str</em>) – 代码内容</p></li>
<li><p><strong>language</strong> (<em>str</em>) – 代码语言</p></li>
<li><p><strong>rows</strong> (<em>int</em>) – 代码块最多可显示的文本行数，默认不限制。内容超出时会使用滚动条。</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_table">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_table</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_table"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_table" title="永久链接至目标">¶</a></dt>
<dd><p>输出表格</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdata</strong> (<em>list</em>) – 表格数据。列表项可以为 <code class="docutils literal notranslate"><span class="pre">list</span></code> 或者 <code class="docutils literal notranslate"><span class="pre">dict</span></code> , 单元格的内容可以为字符串或 <code class="docutils literal notranslate"><span class="pre">put_xxx</span></code> 类型的输出函数。
数组项可以使用 <a class="reference internal" href="#pywebio.output.span" title="pywebio.output.span"><code class="xref py py-func docutils literal notranslate"><span class="pre">span()</span></code></a> 函数来设定单元格跨度。</p></li>
<li><p><strong>header</strong> (<em>list</em>) – <p>表头。当 <code class="docutils literal notranslate"><span class="pre">tdata</span></code> 的列表项为 <code class="docutils literal notranslate"><span class="pre">list</span></code> 类型时，若省略 <code class="docutils literal notranslate"><span class="pre">header</span></code> 参数，则使用 <code class="docutils literal notranslate"><span class="pre">tdata</span></code> 的第一项作为表头。表头项可以使用 <a class="reference internal" href="#pywebio.output.span" title="pywebio.output.span"><code class="xref py py-func docutils literal notranslate"><span class="pre">span()</span></code></a> 函数来设定单元格跨度。</p>
<p>当 <code class="docutils literal notranslate"><span class="pre">tdata</span></code> 为字典列表时，使用 <code class="docutils literal notranslate"><span class="pre">header</span></code> 指定表头顺序，不可省略。此时， <code class="docutils literal notranslate"><span class="pre">header</span></code> 格式可以为 &lt;字典键&gt;列表 或者 <code class="docutils literal notranslate"><span class="pre">(&lt;显示文本&gt;,</span> <span class="pre">&lt;字典键&gt;)</span></code> 列表。</p>
</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-table"><div class="highlight"><pre><span></span><span class="c1"># &#39;Name&#39; cell across 2 rows, &#39;Address&#39; cell across 2 columns</span>
<span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="n">span</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">span</span><span class="p">(</span><span class="s1">&#39;Address&#39;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)],</span>
    <span class="p">[</span><span class="s1">&#39;City&#39;</span><span class="p">,</span> <span class="s1">&#39;Country&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;Wang&#39;</span><span class="p">,</span> <span class="s1">&#39;Beijing&#39;</span><span class="p">,</span> <span class="s1">&#39;China&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;Liu&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;America&#39;</span><span class="p">],</span>
<span class="p">])</span>

<span class="c1"># Use `put_xxx()` in `put_table()`</span>
<span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Content&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">put_html</span><span class="p">(</span><span class="s1">&#39;X&lt;sup&gt;2&lt;/sup&gt;&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;hr/&gt;&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;buttons&#39;</span><span class="p">,</span> <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=...</span><span class="p">)],</span>  
    <span class="p">[</span><span class="s1">&#39;markdown&#39;</span><span class="p">,</span> <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;`Awesome PyWebIO!`&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">put_file</span><span class="p">(</span><span class="s1">&#39;hello.text&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;hello world&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">put_table</span><span class="p">([[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">]])]</span>
<span class="p">])</span>

<span class="c1"># Set table header</span>
<span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;Wang&#39;</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;China&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;Liu&#39;</span><span class="p">,</span> <span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="s1">&#39;America&#39;</span><span class="p">],</span>
<span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Gender&#39;</span><span class="p">,</span> <span class="s1">&#39;Address&#39;</span><span class="p">])</span>

<span class="c1"># When ``tdata`` is list of dict</span>
<span class="n">put_table</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">&quot;Course&quot;</span><span class="p">:</span><span class="s2">&quot;OS&quot;</span><span class="p">,</span> <span class="s2">&quot;Score&quot;</span><span class="p">:</span> <span class="s2">&quot;80&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;Course&quot;</span><span class="p">:</span><span class="s2">&quot;DB&quot;</span><span class="p">,</span> <span class="s2">&quot;Score&quot;</span><span class="p">:</span> <span class="s2">&quot;93&quot;</span><span class="p">},</span>
<span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Course&quot;</span><span class="p">,</span> <span class="s2">&quot;Score&quot;</span><span class="p">])</span>  <span class="c1"># or header=[(put_markdown(&quot;*Course*&quot;), &quot;Course&quot;), (put_markdown(&quot;*Score*&quot;) ,&quot;Score&quot;)]</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">0.3 新版功能: </span>单元格的内容支持 <code class="docutils literal notranslate"><span class="pre">put_xxx</span></code> 类型的输出函数</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.span">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">span</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#span"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.span" title="永久链接至目标">¶</a></dt>
<dd><p>用于在 <a class="reference internal" href="#pywebio.output.put_table" title="pywebio.output.put_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">put_table()</span></code></a> 和 <a class="reference internal" href="#pywebio.output.put_grid" title="pywebio.output.put_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">put_grid()</span></code></a> 中设置内容跨单元格</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> – 单元格内容。可以为字符串或 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用。</p></li>
<li><p><strong>row</strong> (<em>int</em>) – 竖直方向跨度, 即：跨行的数目</p></li>
<li><p><strong>col</strong> (<em>int</em>) – 水平方向跨度, 即：跨列的数目</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="demo-cb highlight-default notranslate" id="demo-span"><div class="highlight"><pre><span></span><span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="n">span</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)],</span>  <span class="c1"># &#39;E&#39; across 2 columns</span>
<span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="n">span</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;B&#39;</span><span class="p">])</span>  <span class="c1"># &#39;A&#39; across 2 rows</span>

<span class="n">put_grid</span><span class="p">([</span>
    <span class="p">[</span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">span</span><span class="p">(</span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">)],</span>  <span class="c1"># &#39;A&#39; across 2 columns</span>
<span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_buttons">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_buttons</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buttons</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onclick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">small</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">callback_options</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_buttons"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_buttons" title="永久链接至目标">¶</a></dt>
<dd><p>输出一组按钮，并绑定点击事件</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buttons</strong> (<em>list</em>) – <p>按钮列表。列表项的可用形式有：</p>
<ul>
<li><p>dict:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;label&quot;</span><span class="p">:(</span><span class="nb">str</span><span class="p">)</span> <span class="n">按钮标签</span><span class="p">,,</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:(</span><span class="nb">str</span><span class="p">)</span> <span class="n">按钮值</span><span class="p">,</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:(</span><span class="nb">str</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span> <span class="n">按钮颜色</span><span class="p">,</span>
    <span class="s2">&quot;disabled&quot;</span><span class="p">:(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span> <span class="n">按钮时否被禁用</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>tuple or list: <code class="docutils literal notranslate"><span class="pre">(label,</span> <span class="pre">value)</span></code></p></li>
<li><p>单值: 此时label和value使用相同的值</p></li>
</ul>
<p>其中， <code class="docutils literal notranslate"><span class="pre">value</span></code> 可以为任意对象。使用dict类型的列表项时，支持使用 <code class="docutils literal notranslate"><span class="pre">color</span></code> key设置按钮颜色，可选值为 <code class="xref py py-obj docutils literal notranslate"><span class="pre">primary</span></code> 、<code class="xref py py-obj docutils literal notranslate"><span class="pre">secondary</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">success</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">danger</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">warning</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">info</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">light</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">dark</span></code> .</p>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-buttons-btn-class"><div class="highlight"><pre><span></span><span class="n">put_buttons</span><span class="p">([</span><span class="nb">dict</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;success&#39;</span><span class="p">)],</span> <span class="n">onclick</span><span class="o">=...</span><span class="p">)</span>  
</pre></div>
</div>
</p></li>
<li><p><strong>onclick</strong> (<em>callable / list</em>) – <p>按钮点击回调函数. <code class="docutils literal notranslate"><span class="pre">onclick</span></code> 可以是函数或者函数组成的列表.</p>
<p><code class="docutils literal notranslate"><span class="pre">onclick</span></code> 为函数时， 签名为 <code class="docutils literal notranslate"><span class="pre">onclick(btn_value)</span></code>. <code class="docutils literal notranslate"><span class="pre">btn_value</span></code> 为被点击的按钮的 <code class="docutils literal notranslate"><span class="pre">value</span></code> 值</p>
<p><code class="docutils literal notranslate"><span class="pre">onclick</span></code> 为列表时，列表内函数的签名为 <code class="docutils literal notranslate"><span class="pre">func()</span></code>. 此时，回调函数与 <code class="docutils literal notranslate"><span class="pre">buttons</span></code> 一一对应</p>
<p>Tip: 可以使用 <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> 来在 <code class="docutils literal notranslate"><span class="pre">onclick</span></code> 中保存更多上下文信息.</p>
<p>Note: 当使用 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程的会话实现</span></a> 时，回调函数可以为协程函数.</p>
</p></li>
<li><p><strong>small</strong> (<em>bool</em>) – 是否使用小号按钮，默认为False</p></li>
<li><p><strong>link_style</strong> (<em>bool</em>) – 是否将按钮显示为链接样式，默认为False</p></li>
<li><p><strong>outline</strong> (<em>bool</em>) – 是否将按钮显示为镂空样式，默认为False</p></li>
<li><p><strong>group</strong> (<em>bool</em>) – 是否将按钮合并在一起，默认为False</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
<li><p><strong>callback_options</strong> – <p>回调函数的其他参数。根据选用的 session 实现有不同参数</p>
<dl>
<dt>CoroutineBasedSession 实现</dt><dd><ul>
<li><p>mutex_mode: 互斥模式。默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 。若为 <code class="docutils literal notranslate"><span class="pre">True</span></code> ，则在运行回调函数过程中，无法响应当前按钮组的新点击事件，仅当 <code class="docutils literal notranslate"><span class="pre">onclick</span></code> 为协程函数时有效</p></li>
</ul>
</dd>
<dt>ThreadBasedSession 实现</dt><dd><ul>
<li><p>serial_mode: 串行模式模式。默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code> ，此时每次触发回调，回调函数会在新线程中立即执行。</p></li>
</ul>
<p>开启serial_mode后，该按钮的回调会在会话内的一个固定线程内串行执行，且其他所有新的点击事件的回调(包括 <code class="docutils literal notranslate"><span class="pre">serial_mode=False</span></code> 的回调)都将排队等待当前点击事件运行完成。如果回调函数运行时间很短，可以开启 <code class="docutils literal notranslate"><span class="pre">serial_mode</span></code> 来提高性能。</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-buttons-a8edc"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="k">def</span> <span class="nf">row_action</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;You click </span><span class="si">%s</span><span class="s2"> button with id: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>

<span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;edit&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">row_action</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">edit</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;You click edit button&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;You click delete button&quot;</span><span class="p">)</span>

<span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;edit&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="p">[</span><span class="n">edit</span><span class="p">,</span> <span class="n">delete</span><span class="p">])</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.5 版更改: </span>Add <code class="docutils literal notranslate"><span class="pre">disabled</span></code> button support.
The <code class="docutils literal notranslate"><span class="pre">value</span></code> of button can be any object.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_button">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_button</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onclick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">small</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disabled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_button"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_button" title="永久链接至目标">¶</a></dt>
<dd><p>输出一个按钮，并绑定点击事件</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> (<em>str</em>) – Button label</p></li>
<li><p><strong>onclick</strong> (<em>callable</em>) – 按钮点击回调函数</p></li>
<li><p><strong>color</strong> (<em>str</em>) – 按钮颜色。可选值为 <code class="xref py py-obj docutils literal notranslate"><span class="pre">primary</span></code> 、<code class="xref py py-obj docutils literal notranslate"><span class="pre">secondary</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">success</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">danger</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">warning</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">info</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">light</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">dark</span></code> .</p></li>
<li><p><strong>disabled</strong> (<em>bool</em>) – Whether the button is disabled</p></li>
<li><p><strong>small</strong><strong>, </strong><strong>link_style</strong><strong>, </strong><strong>outline</strong><strong>, </strong><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>-</em>) – 与 <a class="reference internal" href="#pywebio.output.put_buttons" title="pywebio.output.put_buttons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_buttons()</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-button"><div class="highlight"><pre><span></span><span class="n">put_button</span><span class="p">(</span><span class="s2">&quot;click me&quot;</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">toast</span><span class="p">(</span><span class="s2">&quot;Clicked&quot;</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="n">outline</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.4 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.5 版更改: </span>add <code class="docutils literal notranslate"><span class="pre">disabled</span></code> parameter</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_image">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_image"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_image" title="永久链接至目标">¶</a></dt>
<dd><p>输出图片</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> – 图片内容. 可以为: 字符串类型的URL, bytes-like object 表示的图片二进制内容, <code class="docutils literal notranslate"><span class="pre">PIL.Image.Image</span></code> 实例</p></li>
<li><p><strong>title</strong> (<em>str</em>) – 图片描述</p></li>
<li><p><strong>width</strong> (<em>str</em>) – 图像的宽度，可以是CSS像素(数字px)或者百分比(数字%)。</p></li>
<li><p><strong>height</strong> (<em>str</em>) – 图像的高度，可以是CSS像素(数字px)或者百分比(数字%)。可以只指定 width 和 height 中的一个值，浏览器会根据原始图像进行缩放。</p></li>
<li><p><strong>format</strong> (<em>str</em>) – 图片格式，非必须。如 <code class="docutils literal notranslate"><span class="pre">png</span></code> , <code class="docutils literal notranslate"><span class="pre">jpeg</span></code> , <code class="docutils literal notranslate"><span class="pre">gif</span></code> 等, 仅在 <code class="xref py py-obj docutils literal notranslate"><span class="pre">src</span></code> 为非URL时有效</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-image"><div class="highlight"><pre><span></span><span class="n">img</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/path/to/some/image.png&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  
<span class="n">put_image</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;50px&#39;</span><span class="p">)</span>

<span class="n">put_image</span><span class="p">(</span><span class="s1">&#39;https://www.python.org/static/img/python-logo.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_file">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_file"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_file" title="永久链接至目标">¶</a></dt>
<dd><p>显示一个文件下载链接</p>
<p>在浏览器上的显示为一个以文件名为名的链接，点击链接后浏览器自动下载文件。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – 下载保存为的文件名</p></li>
<li><p><strong>content</strong> – 文件内容. 类型为 bytes-like object</p></li>
<li><p><strong>label</strong> (<em>str</em>) – 下载链接的显示文本，默认和文件名相同</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-file"><div class="highlight"><pre><span></span><span class="n">content</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./some-file&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  
<span class="n">put_file</span><span class="p">(</span><span class="s1">&#39;hello-world.txt&#39;</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="s1">&#39;download me&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_tabs">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_tabs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tabs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_tabs"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_tabs" title="永久链接至目标">¶</a></dt>
<dd><p>输出横向标签栏Tabs</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tabs</strong> (<em>list</em>) – 标签列表，列表项为一个 dict: <code class="docutils literal notranslate"><span class="pre">{&quot;title&quot;:</span> <span class="pre">&quot;Title&quot;,</span> <span class="pre">&quot;content&quot;:</span> <span class="pre">...}</span></code> ，其中 <code class="docutils literal notranslate"><span class="pre">content</span></code> 表示标签内容，可以为字符串、 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用或由它们组成的列表。</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<div class="demo-cb highlight-default notranslate" id="demo-put-tabs"><div class="highlight"><pre><span></span><span class="n">put_tabs</span><span class="p">([</span>
    <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Text&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Hello world&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Markdown&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;~~Strikethrough~~&#39;</span><span class="p">)},</span>
    <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;More content&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">put_table</span><span class="p">([</span>
            <span class="p">[</span><span class="s1">&#39;Commodity&#39;</span><span class="p">,</span> <span class="s1">&#39;Price&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;5.5&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">&#39;Banana&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">],</span>
        <span class="p">]),</span>
        <span class="n">put_link</span><span class="p">(</span><span class="s1">&#39;pywebio&#39;</span><span class="p">,</span> <span class="s1">&#39;https://github.com/wang0618/PyWebIO&#39;</span><span class="p">)</span>
    <span class="p">]},</span>
<span class="p">])</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_collapse">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_collapse</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_collapse"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_collapse" title="永久链接至目标">¶</a></dt>
<dd><p>输出可折叠的内容</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – 内容标题</p></li>
<li><p><strong>content</strong> (<em>list/str/put_xxx</em><em>(</em><em>)</em>) – 内容可以为字符串或 <code class="docutils literal notranslate"><span class="pre">put_xxx</span></code> 类输出函数的返回值，或者由它们组成的列表。</p></li>
<li><p><strong>open</strong> (<em>bool</em>) – 是否默认展开折叠内容。默认不展开内容</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-collapse"><div class="highlight"><pre><span></span><span class="n">put_collapse</span><span class="p">(</span><span class="s1">&#39;Collapse title&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;text&#39;</span><span class="p">,</span>
    <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;~~Strikethrough~~&#39;</span><span class="p">),</span>
    <span class="n">put_table</span><span class="p">([</span>
        <span class="p">[</span><span class="s1">&#39;Commodity&#39;</span><span class="p">,</span> <span class="s1">&#39;Price&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;5.5&#39;</span><span class="p">],</span>
    <span class="p">])</span>
<span class="p">],</span> <span class="nb">open</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">put_collapse</span><span class="p">(</span><span class="s1">&#39;Large text&#39;</span><span class="p">,</span> <span class="s1">&#39;Awesome PyWebIO! &#39;</span><span class="o">*</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_scrollable">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_scrollable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_scrollable"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_scrollable" title="永久链接至目标">¶</a></dt>
<dd><p>固定高度内容输出区域，内容超出则显示滚动条</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<em>list/str/put_xxx</em><em>(</em><em>)</em>) – 内容可以为字符串或 <code class="docutils literal notranslate"><span class="pre">put_xxx</span></code> 类输出函数的返回值，或者由它们组成的列表。</p></li>
<li><p><strong>height</strong> (<em>int/tuple</em>) – 区域的高度（像素），内容超出此高度则使用滚动条。可以传入 <code class="docutils literal notranslate"><span class="pre">(min_height,</span> <span class="pre">max_height)</span></code> 来表示高度的范围，比如 <code class="docutils literal notranslate"><span class="pre">(100,</span> <span class="pre">200)</span></code> 表示区域高度最小100像素、最高200像素。若不想限制高度，则传入 <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><strong>keep_bottom</strong> (<em>bool</em>) – Whether to keep the content area scrolled to the bottom when updated.</p></li>
<li><p><strong>border</strong> (<em>bool</em>) – 是否显示边框</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-put-scrollable"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="n">put_scrollable</span><span class="p">(</span><span class="n">put_scope</span><span class="p">(</span><span class="s1">&#39;scrollable&#39;</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">keep_bottom</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;You can click the area to prevent auto scroll.&quot;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s1">&#39;scrollable&#39;</span><span class="p">)</span>

<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">put_text</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span> <span class="n">scope</span><span class="o">=</span><span class="s1">&#39;scrollable&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.1 版更改: </span>添加 <code class="docutils literal notranslate"><span class="pre">height</span></code> 参数，移除 <code class="docutils literal notranslate"><span class="pre">max_height</span></code> 参数；添加 <code class="docutils literal notranslate"><span class="pre">keep_bottom</span></code> 参数</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.5 版更改: </span>remove <code class="docutils literal notranslate"><span class="pre">horizon_scroll</span></code> parameter</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_widget">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_widget</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_widget"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_widget" title="永久链接至目标">¶</a></dt>
<dd><p>输出自定义的控件</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> – html模版，使用 <a class="reference external" href="https://github.com/janl/mustache.js">mustache.js</a> 语法</p></li>
<li><p><strong>data</strong> (<em>dict</em>) – <p>渲染模版使用的数据.</p>
<p>数据可以包含输出函数( <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> )的返回值, 可以使用 <code class="docutils literal notranslate"><span class="pre">pywebio_output_parse</span></code> 函数来解析 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 内容；对于字符串输入， <code class="docutils literal notranslate"><span class="pre">pywebio_output_parse</span></code> 会将解析成文本.</p>
<p>⚠️：使用 <code class="docutils literal notranslate"><span class="pre">pywebio_output_parse</span></code> 函数时，需要关闭mustache的html转义: <code class="docutils literal notranslate"><span class="pre">{{&amp;</span> <span class="pre">pywebio_output_parse}}</span></code> , 参见下文示例.</p>
</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="demo-cb highlight-default notranslate" id="demo-put-widget"><div class="highlight"><pre><span></span><span class="n">tpl</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">&lt;details {{#open}}open{{/open}}&gt;</span>
<span class="s1">    &lt;summary&gt;{{title}}&lt;/summary&gt;</span>
<span class="s1">    {{#contents}}</span>
<span class="s1">        {{&amp; pywebio_output_parse}}</span>
<span class="s1">    {{/contents}}</span>
<span class="s1">&lt;/details&gt;</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="n">put_widget</span><span class="p">(</span><span class="n">tpl</span><span class="p">,</span> <span class="p">{</span>
    <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s1">&#39;More content&#39;</span><span class="p">,</span>
    <span class="s2">&quot;contents&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;text&#39;</span><span class="p">,</span>
        <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;~~Strikethrough~~&#39;</span><span class="p">),</span>
        <span class="n">put_table</span><span class="p">([</span>
            <span class="p">[</span><span class="s1">&#39;Commodity&#39;</span><span class="p">,</span> <span class="s1">&#39;Price&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;5.5&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">&#39;Banana&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">],</span>
        <span class="p">])</span>
    <span class="p">]</span>
<span class="p">})</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="other-interactions">
<h4>其他交互<a class="headerlink" href="#other-interactions" title="永久链接至标题">¶</a></h4>
<dl class="py function">
<dt id="pywebio.output.toast">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">toast</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'center'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'info'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onclick</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#toast"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.toast" title="永久链接至目标">¶</a></dt>
<dd><p>显示一条通知消息</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<em>str</em>) – 通知内容</p></li>
<li><p><strong>duration</strong> (<em>float</em>) – 通知显示持续的时间，单位为秒。 <code class="xref py py-obj docutils literal notranslate"><span class="pre">0</span></code> 表示不自动关闭(此时消息旁会显示一个关闭图标，用户可以手动关闭消息)</p></li>
<li><p><strong>position</strong> (<em>str</em>) – 通知消息显示的位置，可以为 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'left'</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">'center'</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">'right'</span></code></p></li>
<li><p><strong>color</strong> (<em>str</em>) – 通知消息的背景颜色，可以为 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'info'</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">'error'</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">'warn'</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">'success'</span></code> 或以 <code class="xref py py-obj docutils literal notranslate"><span class="pre">'#'</span></code> 开始的十六进制颜色值</p></li>
<li><p><strong>onclick</strong> (<em>callable</em>) – <p>点击通知消息时的回调函数，回调函数不接受任何参数。</p>
<p>Note: 当使用 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程的会话实现</span></a> 时，回调函数可以为协程函数.</p>
</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-toast"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">show_msg</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;You clicked the notification.&quot;</span><span class="p">)</span>

<span class="n">toast</span><span class="p">(</span><span class="s1">&#39;New messages&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#2188ff&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="n">show_msg</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.popup">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">popup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'normal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">implicit_close</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#popup"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.popup" title="永久链接至目标">¶</a></dt>
<dd><p>显示弹窗</p>
<p>⚠️: PyWebIO不允许同时显示多个弹窗，在显示新弹窗前，会自动关闭页面上存在的弹窗。可以使用 <a class="reference internal" href="#pywebio.output.close_popup" title="pywebio.output.close_popup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">close_popup()</span></code></a> 主动关闭弹窗</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – 弹窗标题</p></li>
<li><p><strong>content</strong> (<em>list/str/put_xxx</em><em>(</em><em>)</em>) – 弹窗内容. 可以为字符串或 <code class="docutils literal notranslate"><span class="pre">put_xxx</span></code> 类输出函数的返回值，或者为它们组成的列表。</p></li>
<li><p><strong>size</strong> (<em>str</em>) – 弹窗窗口大小，可选值: <code class="docutils literal notranslate"><span class="pre">'large'</span></code>, <code class="docutils literal notranslate"><span class="pre">'normal'</span></code> and <code class="docutils literal notranslate"><span class="pre">'small'</span></code>.</p></li>
<li><p><strong>implicit_close</strong> (<em>bool</em>) – 是否可以通过点击弹窗外的内容或按下 <code class="docutils literal notranslate"><span class="pre">Esc</span></code> 键来关闭弹窗，默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><strong>closable</strong> (<em>bool</em>) – 是否可由用户关闭弹窗. 默认情况下，用户可以通过点击弹窗右上角的关闭按钮来关闭弹窗。
设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时弹窗仅能通过 <code class="xref py py-func docutils literal notranslate"><span class="pre">popup_close()</span></code> 关闭，此时 <code class="docutils literal notranslate"><span class="pre">implicit_close</span></code> 参数将被忽略.</p></li>
</ul>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">popup()</span></code> 支持直接传入内容、上下文管理器、装饰器三种形式的调用</p>
<ul class="simple">
<li><p>直接传入内容:</p></li>
</ul>
<div class="demo-cb highlight-default notranslate" id="demo-popup-110f9"><div class="highlight"><pre><span></span><span class="n">popup</span><span class="p">(</span><span class="s1">&#39;popup title&#39;</span><span class="p">,</span> <span class="s1">&#39;popup text content&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">PopupSize</span><span class="o">.</span><span class="n">SMALL</span><span class="p">)</span>

<span class="n">popup</span><span class="p">(</span><span class="s1">&#39;Popup title&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="n">put_html</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Popup Content&lt;/h3&gt;&#39;</span><span class="p">),</span>
    <span class="s1">&#39;html: &lt;br/&gt;&#39;</span><span class="p">,</span>
    <span class="n">put_table</span><span class="p">([[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">]]),</span>
    <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;close_popup()&#39;</span><span class="p">],</span> <span class="n">onclick</span><span class="o">=</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">close_popup</span><span class="p">())</span>
<span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>作为上下文管理器使用:</p></li>
</ul>
<div class="demo-cb highlight-default notranslate" id="demo-popup-context"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">popup</span><span class="p">(</span><span class="s1">&#39;Popup title&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">put_html</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Popup Content&lt;/h3&gt;&#39;</span><span class="p">)</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;html: &lt;br/&gt;&#39;</span><span class="p">)</span>
    <span class="n">put_buttons</span><span class="p">([(</span><span class="s1">&#39;clear()&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)],</span> <span class="n">onclick</span><span class="o">=</span><span class="n">clear</span><span class="p">)</span>

<span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Also work!&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>上下文管理器会开启一个新的输出scope并返回scope名。在上下文管理器中的输出内容默认会输出到popup窗口中。在上下文管理器退出后，popup窗口并不会随之关闭，你可以继续使用输出函数的 <code class="docutils literal notranslate"><span class="pre">scope</span></code> 参数来输出内容到popup窗口内。</p>
<ul class="simple">
<li><p>作为装饰器使用:</p></li>
</ul>
<div class="demo-cb highlight-default notranslate" id="demo-popup-decorator"><div class="highlight"><pre><span></span><span class="nd">@popup</span><span class="p">(</span><span class="s1">&#39;Popup title&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_popup</span><span class="p">():</span>
    <span class="n">put_html</span><span class="p">(</span><span class="s1">&#39;&lt;h3&gt;Popup Content&lt;/h3&gt;&#39;</span><span class="p">)</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;I&#39;m in a popup!&quot;</span><span class="p">)</span>
    <span class="o">...</span>

<span class="n">show_popup</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.close_popup">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">close_popup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/output.html#close_popup"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.close_popup" title="永久链接至目标">¶</a></dt>
<dd><p>关闭正在显示的弹窗</p>
<p>See also: <a class="reference internal" href="#pywebio.output.popup" title="pywebio.output.popup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popup()</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="layout-and-style">
<span id="style-and-layout"></span><h4>布局与样式<a class="headerlink" href="#layout-and-style" title="永久链接至标题">¶</a></h4>
<dl class="py function">
<dt id="pywebio.output.put_row">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_row</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_row"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_row" title="永久链接至目标">¶</a></dt>
<dd><p>使用行布局输出内容. 内容在水平方向从左往右排列成一行</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<em>list</em>) – 子元素列表, 列表项为 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用或者 <code class="docutils literal notranslate"><span class="pre">None</span></code> , <code class="docutils literal notranslate"><span class="pre">None</span></code> 表示空白行间距</p></li>
<li><p><strong>size</strong> (<em>str</em>) – <div class="line-block">
<div class="line">用于指示子元素的宽度, 为空格分割的宽度值列表.</div>
<div class="line">宽度值需要和 <code class="docutils literal notranslate"><span class="pre">content</span></code> 中子元素一一对应( <code class="docutils literal notranslate"><span class="pre">None</span></code> 子元素也要对应宽度值).</div>
<div class="line">size 默认给 <code class="docutils literal notranslate"><span class="pre">None</span></code> 元素分配10像素宽度，并为剩余元素平均分配宽度.</div>
</div>
<p>宽度值可用格式:</p>
<blockquote>
<div><ul>
<li><p>像素值: 例如: <code class="docutils literal notranslate"><span class="pre">100px</span></code></p></li>
<li><p>百分比: 表示占可用宽度的百分比. 例如: <code class="docutils literal notranslate"><span class="pre">33.33%</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fr</span></code> 关键字: 表示比例关系, 2fr 表示的宽度为 1fr 的两倍</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code> 关键字: 表示由浏览器自己决定长度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minmax(min,</span> <span class="pre">max)</span></code> : 产生一个长度范围，表示长度就在这个范围之中。它接受两个参数，分别为最小值和最大值。
例如: <code class="docutils literal notranslate"><span class="pre">minmax(100px,</span> <span class="pre">1fr)</span></code> 表示长度不小于100px，不大于1fr</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="demo-cb highlight-default notranslate" id="demo-put-row"><div class="highlight"><pre><span></span><span class="c1"># Two code blocks of equal width, separated by 10 pixels</span>
<span class="n">put_row</span><span class="p">([</span><span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)])</span>

<span class="c1"># The width ratio of the left and right code blocks is 2:3, which is equivalent to size=&#39;2fr 10px 3fr&#39;</span>
<span class="n">put_row</span><span class="p">([</span><span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="n">put_code</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)],</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;40% 10px 60%&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_column">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_column"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_column" title="永久链接至目标">¶</a></dt>
<dd><p>使用列布局输出内容. 内容在竖直方向从上往下排列成一列</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<em>list</em>) – 子元素列表, 列表项为 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用或者 <code class="docutils literal notranslate"><span class="pre">None</span></code> , <code class="docutils literal notranslate"><span class="pre">None</span></code> 表示空白行间距</p></li>
<li><p><strong>size</strong> (<em>str</em>) – 用于指示子元素的高度, 为空格分割的高度值列表. 可用格式参考 <a class="reference internal" href="#pywebio.output.put_row" title="pywebio.output.put_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_row()</span></code></a> 函数的 <code class="docutils literal notranslate"><span class="pre">size</span></code> 参数注释.</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.put_grid">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">put_grid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell_widths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell_heights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'row'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/output.html#put_grid"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.put_grid" title="永久链接至目标">¶</a></dt>
<dd><p>使用网格布局输出内容</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> – 输出内容. <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> / None 组成的二维数组, None 表示空白. 数组项可以使用 <a class="reference internal" href="#pywebio.output.span" title="pywebio.output.span"><code class="xref py py-func docutils literal notranslate"><span class="pre">span()</span></code></a> 函数设置元素在网格的跨度.</p></li>
<li><p><strong>cell_width</strong> (<em>str</em>) – 网格元素的宽度.</p></li>
<li><p><strong>cell_height</strong> (<em>str</em>) – 网格元素的高度.</p></li>
<li><p><strong>cell_widths</strong> (<em>str</em>) – 网格每一列的宽度. 宽度值用空格分隔. 不可以和 <code class="xref py py-obj docutils literal notranslate"><span class="pre">cell_width</span></code> 参数同时使用.</p></li>
<li><p><strong>cell_heights</strong> (<em>str</em>) – 网格每一行的高度. 高度值用空格分隔. 不可以和 <code class="xref py py-obj docutils literal notranslate"><span class="pre">cell_height</span></code> 参数同时使用.</p></li>
<li><p><strong>direction</strong> (<em>str</em>) – <p>排列方向. 为 <code class="docutils literal notranslate"><span class="pre">'row'</span></code> 或 <code class="docutils literal notranslate"><span class="pre">'column'</span></code> .</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">'row'</span></code> 时表示，content中的每一个子数组代表网格的一行;</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">'column'</span></code> 时表示，content中的每一个子数组代表网格的一列.</div>
</div>
</div></blockquote>
</p></li>
<li><p><strong>scope</strong><strong>, </strong><strong>position</strong> (<em>int</em>) – 与 <a class="reference internal" href="#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text</span></code></a> 函数的同名参数含义一致</p></li>
</ul>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">cell_width</span></code>,``cell_height``,``cell_widths``,``cell_heights`` 参数中的宽度/高度值格式参考 <a class="reference internal" href="#pywebio.output.put_row" title="pywebio.output.put_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_row()</span></code></a> 函数的 <code class="docutils literal notranslate"><span class="pre">size</span></code> 参数注释.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="demo-cb highlight-default notranslate" id="demo-put-grid"><div class="highlight"><pre><span></span><span class="n">put_grid</span><span class="p">([</span>
    <span class="p">[</span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">),</span> <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">),</span> <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">span</span><span class="p">(</span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">),</span> <span class="n">col</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">),</span> <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">),</span> <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;G&#39;</span><span class="p">)],</span>
<span class="p">],</span> <span class="n">cell_width</span><span class="o">=</span><span class="s1">&#39;100px&#39;</span><span class="p">,</span> <span class="n">cell_height</span><span class="o">=</span><span class="s1">&#39;100px&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.output.style">
<code class="sig-prename descclassname"><span class="pre">pywebio.output.</span></code><code class="sig-name descname"><span class="pre">style</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">css_style</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pywebio.io_ctrl.Output</span><span class="p"><span class="pre">,</span> </span><span class="pre">pywebio.io_ctrl.OutputList</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/pywebio/output.html#style"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.output.style" title="永久链接至目标">¶</a></dt>
<dd><p>自定义输出内容的css样式</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">1.3 版后已移除: </span>为输出设置样式的新方式参见 <a class="reference internal" href="index.html#style"><span class="std std-ref">User Guide</span></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputs</strong> (<em>list/put_xxx</em><em>(</em><em>)</em>) – 输出内容，可以为 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 调用或其列表。outputs为列表时将为每个列表项都添加自定义的css样式。</p></li>
<li><p><strong>css_style</strong> (<em>str</em>) – css样式字符串</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p><p>添加了css样式的输出内容</p>
<p>Note: 若 <code class="docutils literal notranslate"><span class="pre">outputs</span></code> 为list，则 <code class="docutils literal notranslate"><span class="pre">outputs</span></code> 中每一项都会被添加css样式, 其返回值可用于任何接受 <code class="docutils literal notranslate"><span class="pre">put_xxx()</span></code> 列表的地方。</p>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="demo-cb highlight-default notranslate" id="demo-style-deprecated-c684d"><div class="highlight"><pre><span></span><span class="n">style</span><span class="p">(</span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Red&#39;</span><span class="p">),</span> <span class="s1">&#39;color:red&#39;</span><span class="p">)</span>

<span class="n">style</span><span class="p">([</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Red&#39;</span><span class="p">),</span>
    <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;~~del~~&#39;</span><span class="p">)</span>
<span class="p">],</span> <span class="s1">&#39;color:red&#39;</span><span class="p">)</span>

<span class="n">put_table</span><span class="p">([</span>
    <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="n">style</span><span class="p">(</span><span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Red&#39;</span><span class="p">),</span> <span class="s1">&#39;color:red&#39;</span><span class="p">)],</span>
<span class="p">])</span>

<span class="n">put_collapse</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="n">style</span><span class="p">([</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">),</span>
    <span class="n">put_markdown</span><span class="p">(</span><span class="s1">&#39;~~del~~&#39;</span><span class="p">),</span>
<span class="p">],</span> <span class="s1">&#39;margin-left:20px&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<span id="document-session"></span><div class="section" id="module-pywebio.session">
<span id="pywebio-session-more-control-to-session"></span><h3><code class="docutils literal notranslate"><span class="pre">pywebio.session</span></code> — 会话相关<a class="headerlink" href="#module-pywebio.session" title="永久链接至标题">¶</a></h3>
<dl class="py function">
<dt id="pywebio.session.download">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">download</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#download"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.download" title="永久链接至目标">¶</a></dt>
<dd><p>向用户推送文件，用户浏览器会将文件下载到本地</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – 下载保存为的文件名</p></li>
<li><p><strong>content</strong> – 文件内容. 类型为 bytes-like object</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-download"><div class="highlight"><pre><span></span><span class="n">put_button</span><span class="p">(</span><span class="s1">&#39;Click to download&#39;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">download</span><span class="p">(</span><span class="s1">&#39;hello-world.txt&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;hello world!&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.session.run_js">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">run_js</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#run_js"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.run_js" title="永久链接至目标">¶</a></dt>
<dd><p>在用户浏览器中运行JavaScript代码.</p>
<p>代码运行在浏览器的JS全局作用域中</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> (<em>str</em>) – js代码</p></li>
<li><p><strong>args</strong> – 传递给js代码的局部变量。变量值需要可以被json序列化</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">run_js</span><span class="p">(</span><span class="s1">&#39;console.log(a + b)&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.session.eval_js">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">eval_js</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expression_</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#eval_js"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.eval_js" title="永久链接至目标">¶</a></dt>
<dd><p>在用户浏览器中执行JavaScript表达式，并获取表达式的值</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expression</strong> (<em>str</em>) – JavaScript表达式。表达式的值需要可以被JSON序列化。如果表达式的值是一个 <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a> ， <code class="docutils literal notranslate"><span class="pre">eval_js()</span></code> 会一直等待promise被resolve，然后返回它的值，若promise被reject，则返回 <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> 。</p></li>
<li><p><strong>args</strong> – 传递给js代码的局部变量。变量值需要可以被json序列化</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>js表达式的值</p>
</dd>
</dl>
<p>注意⚠️：在 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程</span></a> 的会话上下文中，需要使用 <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">eval_js(expression)</span></code> 语法来进行调用。</p>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-eval-js"><div class="highlight"><pre><span></span><span class="n">current_url</span> <span class="o">=</span> <span class="n">eval_js</span><span class="p">(</span><span class="s2">&quot;window.location.href&quot;</span><span class="p">)</span>

<span class="n">function_res</span> <span class="o">=</span> <span class="n">eval_js</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;(function(){</span>
<span class="s1">    var a = 1;</span>
<span class="s1">    a += b;</span>
<span class="s1">    return a;</span>
<span class="s1">})()&#39;&#39;&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">promise_res</span> <span class="o">=</span> <span class="n">eval_js</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;new Promise(resolve =&gt; {</span>
<span class="s1">    setTimeout(() =&gt; {</span>
<span class="s1">        resolve(&#39;Returned inside callback.&#39;);</span>
<span class="s1">    }, 2000);</span>
<span class="s1">});&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.3 版更改: </span>The JS expression support return promise.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.session.register_thread">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">register_thread</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thread</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">threading.Thread</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#register_thread"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.register_thread" title="永久链接至目标">¶</a></dt>
<dd><p>注册线程，以便在线程内调用 PyWebIO 交互函数。</p>
<p>仅能在默认的基于线程的会话上下文中调用。</p>
<p>参见 <a class="reference internal" href="index.html#thread-in-server-mode"><span class="std std-ref">Server模式下并发与会话的结束</span></a></p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>thread</strong> (<em>threading.Thread</em>) – 线程对象</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.session.defer_call">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">defer_call</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#defer_call"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.defer_call" title="永久链接至目标">¶</a></dt>
<dd><p>设置会话结束时调用的函数。</p>
<p>无论是用户主动关闭会话还是任务结束会话关闭，设置的函数都会被运行。</p>
<p>在会话中可以多次调用 <a class="reference internal" href="#pywebio.session.defer_call" title="pywebio.session.defer_call"><code class="xref py py-obj docutils literal notranslate"><span class="pre">defer_call()</span></code></a> ,会话结束后将会顺序执行设置的函数。</p>
<p><a class="reference internal" href="#pywebio.session.defer_call" title="pywebio.session.defer_call"><code class="xref py py-obj docutils literal notranslate"><span class="pre">defer_call</span></code></a> 同样支持以装饰器的方式使用:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@defer_call</span>
<span class="k">def</span> <span class="nf">cleanup</span><span class="p">():</span>
   <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>通过 <a class="reference internal" href="#pywebio.session.defer_call" title="pywebio.session.defer_call"><code class="xref py py-obj docutils literal notranslate"><span class="pre">defer_call()</span></code></a> 设置的函数被调用时会话已经关闭，所以在函数体内不可以调用 PyWebIO 的交互函数</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="pywebio.session.local">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">local</span></code><a class="headerlink" href="#pywebio.session.local" title="永久链接至目标">¶</a></dt>
<dd><p>当前会话的数据对象(session-local object)。</p>
<p><code class="docutils literal notranslate"><span class="pre">local</span></code> 是一个可以通过属性取值的字典，它的目标是用来存储应用中会话独立的状态。 <code class="docutils literal notranslate"><span class="pre">local</span></code> 中存储的内容不会在会话之间共享，每个会话只能访问到自己存储在其中的数据。</p>
<dl class="field-list simple">
<dt class="field-odd">使用场景</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>当需要在多个函数中保存一些会话独立的数据时，使用session-local对象保存状态会比通过函数参数传递更方便。</p>
<p>以下是一个会话独立的计数器的实现示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywebio.session</span> <span class="kn">import</span> <span class="n">local</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">():</span>
    <span class="n">local</span><span class="o">.</span><span class="n">cnt</span> <span class="o">=</span> <span class="p">(</span><span class="n">local</span><span class="o">.</span><span class="n">cnt</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="n">local</span><span class="o">.</span><span class="n">cnt</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;Add counter&#39;</span><span class="p">,</span> <span class="s1">&#39;Show counter&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">add</span><span class="p">,</span> <span class="n">show</span><span class="p">])</span>
</pre></div>
</div>
<p>而通过函数参数传递状态的实现方式为:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">cnt</span><span class="p">):</span>
    <span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="n">cnt</span><span class="p">):</span>
    <span class="n">put_text</span><span class="p">(</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">cnt</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Trick: to pass by reference</span>
    <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;Add counter&#39;</span><span class="p">,</span> <span class="s1">&#39;Show counter&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">partial</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">cnt</span><span class="p">),</span> <span class="n">partial</span><span class="p">(</span><span class="n">show</span><span class="p">,</span> <span class="n">cnt</span><span class="p">)])</span>
</pre></div>
</div>
<p>当然，还可以通过函数闭包来实现相同的功能:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">cnt</span>
        <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">():</span>
        <span class="n">put_text</span><span class="p">(</span><span class="n">cnt</span><span class="p">)</span>

    <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;Add counter&#39;</span><span class="p">,</span> <span class="s1">&#39;Show counter&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">add</span><span class="p">,</span> <span class="n">show</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">local对象支持的操作</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">local</span></code> 是一个可以通过属性访问的字典，访问不存在的属性时会返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> 而不是抛出异常。<code class="docutils literal notranslate"><span class="pre">local</span></code> 不支持字典的方法，支持使用 <code class="docutils literal notranslate"><span class="pre">in</span></code> 操作符来判断键是否存在，可以使用 <code class="docutils literal notranslate"><span class="pre">local._dict</span></code> 获取底层的字典表示。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Wang&quot;</span>
<span class="n">local</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">22</span>
<span class="k">assert</span> <span class="n">local</span><span class="o">.</span><span class="n">foo</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="n">local</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;10&quot;</span>

<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">local</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="k">assert</span> <span class="s1">&#39;bar&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">local</span>
<span class="k">assert</span> <span class="s1">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">local</span>

<span class="nb">print</span><span class="p">(</span><span class="n">local</span><span class="o">.</span><span class="n">_dict</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.session.set_env">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">set_env</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">env_info</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#set_env"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.set_env" title="永久链接至目标">¶</a></dt>
<dd><p>当前会话的环境设置</p>
<p>可配置项有:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code> (str): 当前页面的标题</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_animation</span></code> (bool): 是否启用输出动画（在输出内容时，使用过渡动画），默认启用</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto_scroll_bottom</span></code> (bool): 是否在内容输出时将页面自动滚动到底部，默认关闭。注意，开启后，只有输出到ROOT Scope才可以触发自动滚动。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">http_pull_interval</span></code> (int): HTTP轮询后端消息的周期（单位为毫秒，默认1000ms），仅在基于HTTP连接的会话（使用Flask或Django后端）中可用</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_panel_fixed</span></code> (bool): 是否将输入栏固定在页面底部, 默认启用。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_panel_min_height</span></code> (int): 输入栏的最小高度(像素, 默认为300px，最小允许 75px)。仅当 <code class="docutils literal notranslate"><span class="pre">input_panel_fixed=True</span></code> 时可用。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_panel_init_height</span></code> (int): 输入栏的初始高度(像素, 默认为300px，最小允许 175px)。仅当 <code class="docutils literal notranslate"><span class="pre">input_panel_fixed=True</span></code> 时可用。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_auto_focus</span></code> (bool): 输入栏是否自动获取输入焦点，默认为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_max_width</span></code> (str): 页面内容区域的最大宽度（像素或百分比，例如： <code class="docutils literal notranslate"><span class="pre">'1080px'</span></code>, <code class="docutils literal notranslate"><span class="pre">'80%'</span></code>. 默认为 <code class="docutils literal notranslate"><span class="pre">'880px'</span></code>）</p></li>
</ul>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">set_env</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Awesome PyWebIO!!&#39;</span><span class="p">,</span> <span class="n">output_animation</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版更改: </span>Added the <code class="docutils literal notranslate"><span class="pre">output_max_width</span></code> parameter</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.session.go_app">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">go_app</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#go_app"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.go_app" title="永久链接至目标">¶</a></dt>
<dd><p>在同一PyWebIO应用的不同服务之间跳转。仅在PyWebIO Server模式下可用</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – 目标 PyWebIO 任务名</p></li>
<li><p><strong>new_window</strong> (<em>bool</em>) – 是否在新窗口打开，默认为 <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></p></li>
</ul>
</dd>
</dl>
<p>参见： <a class="reference internal" href="index.html#server-and-script-mode"><span class="std std-ref">Server 模式</span></a></p>
</dd></dl>

<dl class="py data">
<dt id="pywebio.session.info">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">info</span></code><a class="headerlink" href="#pywebio.session.info" title="永久链接至目标">¶</a></dt>
<dd><p>表示会话信息的对象，属性有：</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">user_agent</span></code> : 表示用户浏览器信息的对象，属性有</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_mobile</span></code> (bool): 用户使用的设备是否为手机 (比如 iPhone, Android phones, Blackberry, Windows Phone 等设备)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_tablet</span></code> (bool): 用户使用的设备是否为平板 (比如 iPad, Kindle Fire, Nexus 7 等设备)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_pc</span></code> (bool): 用户使用的设备是否为桌面电脑 (比如运行 Windows, OS X, Linux 的设备)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_touch_capable</span></code> (bool): 用户使用的设备是否支持触控</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">browser.family</span></code> (str): 浏览器家族. 比如 ‘Mobile Safari’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">browser.version</span></code> (tuple): 浏览器版本元组. 比如 (5, 1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">browser.version_string</span></code> (str): 浏览器版本字符串. 比如  ‘5.1’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">os.family</span></code> (str): 操作系统家族. 比如 ‘iOS’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">os.version</span></code> (tuple): 操作系统版本元组. 比如 (5, 1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">os.version_string</span></code> (str): 操作系统版本字符串. 比如 ‘5.1’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device.family</span></code> (str): 设备家族. 比如 ‘iPhone’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device.brand</span></code> (str): 设备品牌. 比如 ‘Apple’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device.model</span></code> (str): 设备型号. 比如 ‘iPhone’</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_language</span></code> (str): 用户操作系统使用的语言. 比如 <code class="docutils literal notranslate"><span class="pre">'zh-CN'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">server_host</span></code> (str): 当前会话的服务器host，包含域名和端口，端口为80时可以被省略</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin</span></code> (str): 当前用户的页面地址. 包含 协议、主机、端口 部分. 比如 <code class="docutils literal notranslate"><span class="pre">'http://localhost:8080'</span></code> .
可能为空，但保证当用户的页面地址不在当前服务器下(即 主机、端口部分和 <code class="docutils literal notranslate"><span class="pre">server_host</span></code> 不一致)时有值.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_ip</span></code> (str): 用户的ip地址.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">backend</span></code> (str): 当前PyWebIO使用的后端Server实现. 可能出现的值有 <code class="docutils literal notranslate"><span class="pre">'tornado'</span></code> , <code class="docutils literal notranslate"><span class="pre">'flask'</span></code> , <code class="docutils literal notranslate"><span class="pre">'django'</span></code> , <code class="docutils literal notranslate"><span class="pre">'aiohttp'</span></code> , <code class="docutils literal notranslate"><span class="pre">'starlette'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">protocol</span></code> (str): PyWebIO服务器与浏览器之间的通信协议。可能的值为 <code class="docutils literal notranslate"><span class="pre">'websocket'</span></code> 或 <code class="docutils literal notranslate"><span class="pre">'http'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">request</span></code> (object): 创建当前会话时的Web请求对象. 根据PyWebIO使用的后端Server不同，<code class="docutils literal notranslate"><span class="pre">request</span></code> 的类型也不同:</p>
<blockquote>
<div><ul class="simple">
<li><p>使用Tornado后端时, <code class="docutils literal notranslate"><span class="pre">request</span></code> 为 <a class="reference external" href="https://www.tornadoweb.org/en/stable/httputil.html#tornado.httputil.HTTPServerRequest">tornado.httputil.HTTPServerRequest</a> 实例</p></li>
<li><p>使用Flask后端时, <code class="docutils literal notranslate"><span class="pre">request</span></code> 为 <a class="reference external" href="https://flask.palletsprojects.com/en/1.1.x/api/#incoming-request-data">flask.Request</a> 实例</p></li>
<li><p>使用Django后端时, <code class="docutils literal notranslate"><span class="pre">request</span></code> 为 <a class="reference external" href="https://docs.djangoproject.com/en/3.0/ref/request-response/#django.http.HttpRequest">django.http.HttpRequest</a> 实例</p></li>
<li><p>使用aiohttp后端时, <code class="docutils literal notranslate"><span class="pre">request</span></code> 为 <a class="reference external" href="https://docs.aiohttp.org/en/stable/web_reference.html#aiohttp.web.BaseRequest">aiohttp.web.BaseRequest</a> 实例</p></li>
<li><p>当使用FastAPI或Starlette时， <code class="docutils literal notranslate"><span class="pre">request</span></code> 属性为 <a class="reference external" href="https://www.starlette.io/websockets/">starlette.websockets.WebSocket</a> 实例</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>会话信息对象的 <code class="docutils literal notranslate"><span class="pre">user_agent</span></code> 属性是通过 user-agents 库进行解析生成的。参见 <a class="reference external" href="https://github.com/selwin/python-user-agents#usage">https://github.com/selwin/python-user-agents#usage</a></p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.2 版更改: </span>Added the <code class="docutils literal notranslate"><span class="pre">protocol</span></code> attribute.</p>
</div>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-get-info"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pywebio.session</span> <span class="kn">import</span> <span class="n">info</span> <span class="k">as</span> <span class="n">session_info</span>

<span class="n">put_code</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="n">k</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">session_info</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;user_agent&#39;</span><span class="p">,</span> <span class="s1">&#39;user_language&#39;</span><span class="p">,</span> <span class="s1">&#39;server_host&#39;</span><span class="p">,</span>
              <span class="s1">&#39;origin&#39;</span><span class="p">,</span> <span class="s1">&#39;user_ip&#39;</span><span class="p">,</span> <span class="s1">&#39;backend&#39;</span><span class="p">,</span> <span class="s1">&#39;protocol&#39;</span><span class="p">,</span> <span class="s1">&#39;request&#39;</span><span class="p">]</span>
<span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="pywebio.session.coroutinebased.TaskHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">pywebio.session.coroutinebased.</span></code><code class="sig-name descname"><span class="pre">TaskHandler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session/coroutinebased.html#TaskHandler"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.coroutinebased.TaskHandler" title="永久链接至目标">¶</a></dt>
<dd><p>协程任务句柄</p>
<p>See also: <a class="reference internal" href="#pywebio.session.run_async" title="pywebio.session.run_async"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_async()</span></code></a></p>
<dl class="py method">
<dt id="pywebio.session.coroutinebased.TaskHandler.close">
<code class="sig-name descname"><span class="pre">close</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session/coroutinebased.html#TaskHandler.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.coroutinebased.TaskHandler.close" title="永久链接至目标">¶</a></dt>
<dd><p>关闭协程任务</p>
</dd></dl>

<dl class="py method">
<dt id="pywebio.session.coroutinebased.TaskHandler.closed">
<code class="sig-name descname"><span class="pre">closed</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="reference internal" href="_modules/pywebio/session/coroutinebased.html#TaskHandler.closed"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.coroutinebased.TaskHandler.closed" title="永久链接至目标">¶</a></dt>
<dd><p>任务是否关闭</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pywebio.session.hold">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">hold</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#hold"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.hold" title="永久链接至目标">¶</a></dt>
<dd><p>保持会话，直到用户关闭浏览器。</p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>从PyWebIO v1.4之后，在 <a class="reference internal" href="index.html#server-mode"><span class="std std-ref">server模式</span></a> 下，不再需要手动调用本函数，PyWebIO会在需要时自动调用。本函数的唯一使用场景为在script模式下阻止脚本退出。</p>
</div>
<p>如果你还在使用旧版本的PyWebIO(强烈建议你升级版本)，这是 <code class="docutils literal notranslate"><span class="pre">hold()</span></code> 函数旧版本的文档:</p>
<blockquote>
<div><p>在PyWebIO会话结束后，页面和服务端的连接便会断开，
页面上需要和服务端通信才可实现的功能(比如：下载通过 <a class="reference internal" href="index.html#pywebio.output.put_file" title="pywebio.output.put_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_file()</span></code></a> 输出的文件，
<a class="reference internal" href="index.html#pywebio.output.put_buttons" title="pywebio.output.put_buttons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_buttons()</span></code></a> 按钮回调)便无法使用。
可以在任务函数末尾处调用 <code class="docutils literal notranslate"><span class="pre">hold()</span></code> 函数来将会话保持，这样在用户关闭浏览器页面前，会话将一直保持连接。</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="pywebio.session.run_async">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">run_async</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coro_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#run_async"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.run_async" title="永久链接至目标">¶</a></dt>
<dd><p>异步运行协程对象。协程中依然可以调用 PyWebIO 交互函数。</p>
<p><code class="docutils literal notranslate"><span class="pre">run_async()</span></code> 仅能在 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程</span></a> 的会话上下文中调用</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>coro_obj</strong> – 协程对象</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">TaskHandle</span></code> 实例。 通过 TaskHandle 可以查询协程运行状态和关闭协程。</p>
</dd>
</dl>
<p>参见：<a class="reference internal" href="index.html#coroutine-based-concurrency"><span class="std std-ref">协程会话的并发</span></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.session.run_asyncio_coroutine">
<code class="sig-prename descclassname"><span class="pre">pywebio.session.</span></code><code class="sig-name descname"><span class="pre">run_asyncio_coroutine</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coro_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/session.html#run_asyncio_coroutine"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.session.run_asyncio_coroutine" title="永久链接至目标">¶</a></dt>
<dd><p>若会话线程和运行asyncio事件循环的线程不是同一个线程，需要用 <a class="reference internal" href="#pywebio.session.run_asyncio_coroutine" title="pywebio.session.run_asyncio_coroutine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_asyncio_coroutine()</span></code></a> 来运行asyncio中的协程。</p>
<p>仅能在 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程</span></a> 的会话上下文中调用。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>coro_obj</strong> – <code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code> 库中的协程对象</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">run_asyncio_coroutine</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>

<span class="n">pywebio</span><span class="o">.</span><span class="n">platform</span><span class="o">.</span><span class="n">flask</span><span class="o">.</span><span class="n">start_server</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<span id="document-platform"></span><div class="section" id="module-pywebio.platform">
<span id="pywebio-platform-deploy-applications"></span><h3><code class="docutils literal notranslate"><span class="pre">pywebio.platform</span></code> — 应用部署<a class="headerlink" href="#module-pywebio.platform" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">platform</span></code> 模块提供了以不同方式部署PyWebIO应用的支持。</p>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#directory-deploy" id="id2">Directory Deploy</a></p></li>
<li><p><a class="reference internal" href="#application-deploy" id="id3">Application Deploy</a></p>
<ul>
<li><p><a class="reference internal" href="#tornado-support" id="id4">Tornado相关</a></p>
<ul>
<li><p><a class="reference internal" href="#websocket" id="id5">WebSocket</a></p></li>
<li><p><a class="reference internal" href="#http" id="id6">HTTP</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#flask-support" id="id7">Flask support</a></p></li>
<li><p><a class="reference internal" href="#django-support" id="id8">Django support</a></p></li>
<li><p><a class="reference internal" href="#aiohttp-support" id="id9">aiohttp support</a></p></li>
<li><p><a class="reference internal" href="#fastapi-starlette-support" id="id10">FastAPI/Starlette support</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#other" id="id11">其他</a></p></li>
</ul>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#server-and-script-mode"><span class="std std-ref">Server模式与Script模式</span></a></p></li>
<li><p><a class="reference internal" href="index.html#integration-web-framework"><span class="std std-ref">与Web框架集成</span></a></p></li>
</ul>
</div>
<div class="section" id="directory-deploy">
<span id="dir-deploy"></span><h4><a class="toc-backref" href="#id2">Directory Deploy</a><a class="headerlink" href="#directory-deploy" title="永久链接至标题">¶</a></h4>
<p>可以使用 <code class="docutils literal notranslate"><span class="pre">path_deploy()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">path_deploy_http()</span></code> 来从一个目录中部署PyWebIO应用。该目录下的python文件需要包含一个名为 <code class="docutils literal notranslate"><span class="pre">main</span></code> 的函数作为PyWebIO应用。服务端会根据用户访问的URL来确定需要加载的文件并从中读取PyWebIO应用来运行。</p>
<p>用户无法访问该目录下以下划线开始的文件和目录。</p>
<p>例如，给定如下文件结构:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
├── A
│   └── a.py
├── B
│   └── b.py
└── c.py
</pre></div>
</div>
<p>三个python文件都含有 <code class="docutils literal notranslate"><span class="pre">main</span></code> PyWebIO应用函数。</p>
<p>如果使用以上路径调用 <a class="reference internal" href="#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_deploy()</span></code></a> ，你可以通过 URL <code class="xref py py-obj docutils literal notranslate"><span class="pre">http://&lt;host&gt;:&lt;port&gt;/A/b`</span></code> 来访问 <code class="docutils literal notranslate"><span class="pre">b.py</span></code> 文件中的PyWebIO应用。若文件在运行 <a class="reference internal" href="#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_deploy()</span></code></a> 之后被修改，可以使用 <code class="docutils literal notranslate"><span class="pre">reload</span></code> URL参数来重载文件: <code class="docutils literal notranslate"><span class="pre">http://&lt;host&gt;:&lt;port&gt;/A/b?reload</span></code></p>
<p>你还可以使用 <code class="docutils literal notranslate"><span class="pre">pywebio-path-deploy</span></code> 命令来启动一个和 <a class="reference internal" href="#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_deploy()</span></code></a> 效果一样的server。关于命令的更多信息请查阅命令帮助： <code class="docutils literal notranslate"><span class="pre">pywebio-path-deploy</span> <span class="pre">--help</span></code></p>
<dl class="py function">
<dt id="pywebio.platform.path_deploy">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.</span></code><code class="sig-name descname"><span class="pre">path_deploy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reconnect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payload_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'200M'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tornado_app_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/path_deploy.html#path_deploy"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.path_deploy" title="永久链接至目标">¶</a></dt>
<dd><p>从一个路径中部署PyWebIO应用</p>
<p>服务端使用WebSocket协议与浏览器进行通讯。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base</strong> (<em>str</em>) – 用于加载PyWebIO应用的根目录</p></li>
<li><p><strong>port</strong> (<em>int</em>) – 服务器监听的端口</p></li>
<li><p><strong>host</strong> (<em>str</em>) – 服务绑定的地址</p></li>
<li><p><strong>index</strong> (<em>bool/callable</em>) – 当请求一个文件夹时是否显示默认的索引页面，默认为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 。 <code class="docutils literal notranslate"><span class="pre">index</span></code> 也可以为一个函数来自定义索引页面，其接收请求的文件夹路径作为参数，返回页面HTML字符串。你可以在文件夹中创建一个 <code class="xref py py-obj docutils literal notranslate"><span class="pre">index.py</span></code> PyWebIO应用文件来重写文件夹的索引页。</p></li>
<li><p><strong>static_dir</strong> (<em>str</em>) – 应用静态文件目录。目录下的文件可以通过 <code class="docutils literal notranslate"><span class="pre">http://&lt;host&gt;:&lt;port&gt;/static/files</span></code> 访问。例如 <code class="docutils literal notranslate"><span class="pre">static_dir</span></code> 路径下存在文件 <code class="docutils literal notranslate"><span class="pre">A/B.jpg</span></code> ，则其URL为 <code class="docutils literal notranslate"><span class="pre">http://&lt;host&gt;:&lt;port&gt;/static/A/B.jpg</span></code>。</p></li>
<li><p><strong>reconnect_timeout</strong> (<em>int</em>) – 客户端重连超时时间(秒)。客户端若意外与服务端断开连接，在 <code class="docutils literal notranslate"><span class="pre">reconnect_timeout</span></code> 秒内可以重新连接并自动恢复会话。</p></li>
</ul>
</dd>
</dl>
<p>剩余参数的详细说明见 <a class="reference internal" href="#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.tornado.start_server()</span></code></a> 的同名参数。</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.path_deploy_http">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.</span></code><code class="sig-name descname"><span class="pre">path_deploy_http</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payload_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'200M'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tornado_app_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/path_deploy.html#path_deploy_http"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.path_deploy_http" title="永久链接至目标">¶</a></dt>
<dd><p>从一个路径中部署PyWebIO应用</p>
<p>服务端使用HTTP协议与浏览器进行通讯。</p>
<p>关于 <code class="docutils literal notranslate"><span class="pre">path_deploy_http()</span></code> 的 <code class="docutils literal notranslate"><span class="pre">base</span></code>, <code class="docutils literal notranslate"><span class="pre">port</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>, <code class="docutils literal notranslate"><span class="pre">static_dir</span></code> 参数的详细说明见 <a class="reference internal" href="#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.path_deploy()</span></code></a> 的同名参数。</p>
<p>剩余参数的详细说明见 <a class="reference internal" href="#pywebio.platform.tornado_http.start_server" title="pywebio.platform.tornado_http.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.tornado_http.start_server()</span></code></a> 的同名参数。</p>
</dd></dl>

</div>
<div class="section" id="application-deploy">
<span id="app-deploy"></span><h4><a class="toc-backref" href="#id3">Application Deploy</a><a class="headerlink" href="#application-deploy" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">start_server()</span></code> 函数可以启动一个Web服务器来将PyWebIO应用作为Web服务运行。</p>
<p><code class="docutils literal notranslate"><span class="pre">webio_handler()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">webio_view()</span></code> 函数用于将PyWebIO应用整合到现有的Python Web项目中。</p>
<p><code class="docutils literal notranslate"><span class="pre">wsgi_app()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">asgi_app()</span></code> 用于获取运行PyWebIO应用的 WSGI 或 ASGI app。很适合当你不想使用Web框架内置的server来启动服务的情况。比如，你想使用其他WSGI server来启动应用，或者你正在将应用部署到一些云环境中。目前仅在Flask、Django 和 FastApi后端中支持 <code class="docutils literal notranslate"><span class="pre">wsgi_app()</span></code> / <code class="docutils literal notranslate"><span class="pre">asgi_app()</span></code></p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.1 版更改: </span>Added the <code class="docutils literal notranslate"><span class="pre">cdn</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">start_server()</span></code>, <code class="docutils literal notranslate"><span class="pre">webio_handler()</span></code> and <code class="docutils literal notranslate"><span class="pre">webio_view()</span></code>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.2 版更改: </span>Added the <code class="docutils literal notranslate"><span class="pre">static_dir</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">start_server()</span></code>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.3 版更改: </span>Added the <code class="docutils literal notranslate"><span class="pre">wsgi_app()</span></code> and <code class="docutils literal notranslate"><span class="pre">asgi_app()</span></code>.</p>
</div>
<div class="section" id="tornado-support">
<h5><a class="toc-backref" href="#id4">Tornado相关</a><a class="headerlink" href="#tornado-support" title="永久链接至标题">¶</a></h5>
<p>服务端可以通过两种协议（WebSocket 和 HTTP）来与用户浏览器通信。</p>
<div class="section" id="websocket">
<h6><a class="toc-backref" href="#id5">WebSocket</a><a class="headerlink" href="#websocket" title="永久链接至标题">¶</a></h6>
<dl class="py function">
<dt id="pywebio.platform.tornado.start_server">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.tornado.</span></code><code class="sig-name descname"><span class="pre">start_server</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_access</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reconnect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_open_webbrowser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payload_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'200M'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tornado_app_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/tornado.html#start_server"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.tornado.start_server" title="永久链接至目标">¶</a></dt>
<dd><p>启动一个 Tornado server 将PyWebIO应用作为Web服务提供。</p>
<p>Tornado server 使用WebSocket协议与浏览器进行通讯。</p>
<p>Tornado为PyWebIO应用的默认后端Server，可以直接使用 <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">pywebio</span> <span class="pre">import</span> <span class="pre">start_server</span></code> 导入。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>applications</strong> (<em>list/dict/callable</em>) – <p>PyWebIO应用. 可以是任务函数或者任务函数的字典或列表。详细用法参见 <a class="reference internal" href="index.html#multiple-app"><span class="std std-ref">使用start_server()部署多应用</span></a> 。</p>
<p>任务函数为协程函数时，使用 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程的会话实现</span></a> ；任务函数为普通函数时，使用基于线程的会话实现。</p>
</p></li>
<li><p><strong>port</strong> (<em>int</em>) – 服务监听的端口。设置为 <code class="docutils literal notranslate"><span class="pre">0</span></code> 时，表示自动选择可用端口。</p></li>
<li><p><strong>host</strong> (<em>str</em>) – 服务绑定的地址。 <code class="docutils literal notranslate"><span class="pre">host</span></code> 可以是IP地址或者为hostname。如果为hostname，服务会监听所有与该hostname关联的IP地址。
通过设置 <code class="docutils literal notranslate"><span class="pre">host</span></code> 为空字符串或 <code class="docutils literal notranslate"><span class="pre">None</span></code> 来将服务绑定到所有可用的地址上。</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – 是否开启Tornado Server的debug模式，开启后，代码发生修改后服务器会自动重启。
详情请参阅 <a class="reference external" href="https://www.tornadoweb.org/en/stable/guide/running.html#debug-mode">tornado 文档</a></p></li>
<li><p><strong>cdn</strong> (<em>bool/str</em>) – 是否从CDN加载前端静态资源，默认为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 。支持传入自定义的URL来指定静态资源的部署地址</p></li>
<li><p><strong>static_dir</strong> (<em>str</em>) – 应用静态文件目录。目录下的文件可以通过 <code class="docutils literal notranslate"><span class="pre">http://&lt;host&gt;:&lt;port&gt;/static/files</span></code> 访问。例如 <code class="docutils literal notranslate"><span class="pre">static_dir</span></code> 路径下存在文件 <code class="docutils literal notranslate"><span class="pre">A/B.jpg</span></code> ，则其URL为 <code class="docutils literal notranslate"><span class="pre">http://&lt;host&gt;:&lt;port&gt;/static/A/B.jpg</span></code>。</p></li>
<li><p><strong>remote_access</strong> (<em>bool</em>) – 是否开启远程接入的功能。开启后，你将得到一个你当前应用的临时公网访问地址，其他人可以通过此地址访问你的应用。</p></li>
<li><p><strong>auto_open_webbrowser</strong> (<em>bool</em>) – 当服务启动后，是否自动打开浏览器来访问服务。（该操作需要操作系统支持）</p></li>
<li><p><strong>reconnect_timeout</strong> (<em>int</em>) – 客户端重连超时时间(秒)。客户端若意外与服务端断开连接，在 <code class="docutils literal notranslate"><span class="pre">reconnect_timeout</span></code> 秒内可以重新连接并自动恢复会话。</p></li>
<li><p><strong>allowed_origins</strong> (<em>list</em>) – <p>除当前域名外，服务器还允许的请求的来源列表。来源包含协议、域名和端口部分，允许使用 Unix shell 风格的匹配模式:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code> 为通配符</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">?</span></code> 匹配单个字符</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[seq]</span></code> 匹配seq中的任何字符</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[!seq]</span></code> 匹配任何不在seq中的字符</p></li>
</ul>
<p>比如 <code class="docutils literal notranslate"><span class="pre">https://*.example.com</span></code> 、 <code class="docutils literal notranslate"><span class="pre">*://*.example.com</span></code></p>
<p>全部规则参见 <a class="reference external" href="https://docs.python.org/zh-tw/3/library/fnmatch.html">Python文档</a></p>
</div></blockquote>
</p></li>
<li><p><strong>check_origin</strong> (<em>callable</em>) – 请求来源检查函数。接收请求来源(包含协议、域名和端口部分)字符串作为参数，
返回 <code class="docutils literal notranslate"><span class="pre">True/False</span></code> 指示服务器接受/拒绝该请求。若设置了 <code class="docutils literal notranslate"><span class="pre">check_origin</span></code> ， <code class="docutils literal notranslate"><span class="pre">allowed_origins</span></code> 参数将被忽略</p></li>
<li><p><strong>auto_open_webbrowser</strong> – 当服务启动后，是否自动打开浏览器来访问服务。（该操作需要操作系统支持）</p></li>
<li><p><strong>max_payload_size</strong> (<em>int/str</em>) – Tornado Server可以接受的最大websocket消息的大小。超过 <code class="docutils literal notranslate"><span class="pre">max_payload_size</span></code> (默认 200MB) 的消息会被拒绝接受。 <code class="docutils literal notranslate"><span class="pre">max_payload_size</span></code> 可以是整形表示的字节数或以 <code class="xref py py-obj docutils literal notranslate"><span class="pre">K</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">M</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">G</span></code> 结尾的字符串，比如: <code class="docutils literal notranslate"><span class="pre">500</span></code>, <code class="docutils literal notranslate"><span class="pre">'40K'</span></code>, <code class="docutils literal notranslate"><span class="pre">'3M'</span></code></p></li>
<li><p><strong>tornado_app_settings</strong> – 传递给 <code class="docutils literal notranslate"><span class="pre">tornado.web.Application</span></code> 构造函数的额外的关键字参数
可设置项参考: <a class="reference external" href="https://www.tornadoweb.org/en/stable/web.html#tornado.web.Application.settings">https://www.tornadoweb.org/en/stable/web.html#tornado.web.Application.settings</a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.tornado.webio_handler">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.tornado.</span></code><code class="sig-name descname"><span class="pre">webio_handler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reconnect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/tornado.html#webio_handler"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.tornado.webio_handler" title="永久链接至目标">¶</a></dt>
<dd><p>获取在Tornado中运行PyWebIO应用的RequestHandler类。RequestHandler类基于WebSocket协议与浏览器进行通讯。</p>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.tornado.start_server()</span></code></a> 的同名参数。</p>
</dd></dl>

</div>
<div class="section" id="http">
<h6><a class="toc-backref" href="#id6">HTTP</a><a class="headerlink" href="#http" title="永久链接至标题">¶</a></h6>
<dl class="py function">
<dt id="pywebio.platform.tornado_http.start_server">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.tornado_http.</span></code><code class="sig-name descname"><span class="pre">start_server</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8080</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_open_webbrowser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payload_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'200M'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tornado_app_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/tornado_http.html#start_server"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.tornado_http.start_server" title="永久链接至目标">¶</a></dt>
<dd><p>启动一个 Tornado server 将PyWebIO应用作为Web服务提供。</p>
<p>服务端使用HTTP协议与浏览器进行通讯。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session_expire_seconds</strong> (<em>int</em>) – 会话过期时间，单位为秒（默认60秒）。若 session_expire_seconds 秒内没有收到客户端的请求，则认为会话过期。</p></li>
<li><p><strong>session_cleanup_interval</strong> (<em>int</em>) – 会话清理间隔，单位为秒(默认12秒)。服务端会周期性清理过期的会话，释放会话占用的资源。</p></li>
<li><p><strong>max_payload_size</strong> (<em>int/str</em>) – Tornado Server可以接受的最大单个HTTP请求的大小</p></li>
</ul>
</dd>
</dl>
<p>剩余参数的详细说明见 <a class="reference internal" href="#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.tornado.start_server()</span></code></a> 的同名参数。</p>
<div class="versionadded">
<p><span class="versionmodified added">1.2 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.tornado_http.webio_handler">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.tornado_http.</span></code><code class="sig-name descname"><span class="pre">webio_handler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/tornado_http.html#webio_handler"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.tornado_http.webio_handler" title="永久链接至目标">¶</a></dt>
<dd><p>获取在Tornado中运行PyWebIO应用的RequestHandler类。RequestHandler类基于HTTP协议与浏览器进行通讯。</p>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.tornado_http.start_server" title="pywebio.platform.tornado_http.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.tornado_http.start_server()</span></code></a> 的同名参数。</p>
<div class="versionadded">
<p><span class="versionmodified added">1.2 新版功能.</span></p>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="flask-support">
<h5><a class="toc-backref" href="#id7">Flask support</a><a class="headerlink" href="#flask-support" title="永久链接至标题">¶</a></h5>
<p>使用Flask后端作为PyWebIO应用Server时，需要您自行安装Flask，并确保版本大于等于 <code class="docutils literal notranslate"><span class="pre">0.10</span></code> 。
可通过以下命令安装:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">flask</span><span class="o">&gt;=</span><span class="mf">0.10</span>
</pre></div>
</div>
<dl class="py function">
<dt id="pywebio.platform.flask.webio_view">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.flask.</span></code><code class="sig-name descname"><span class="pre">webio_view</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/flask.html#webio_view"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.flask.webio_view" title="永久链接至目标">¶</a></dt>
<dd><p>获取在Flask中运行PyWebIO任务的视图函数。基于http请求与前端页面进行通讯</p>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.flask.start_server" title="pywebio.platform.flask.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.flask.start_server()</span></code></a> 的同名参数。</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.flask.wsgi_app">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.flask.</span></code><code class="sig-name descname"><span class="pre">wsgi_app</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payload_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'200M'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/flask.html#wsgi_app"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.flask.wsgi_app" title="永久链接至目标">¶</a></dt>
<dd><p>将PyWebIO应用转换为Flask WSGI 应用</p>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.flask.start_server" title="pywebio.platform.flask.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.flask.start_server()</span></code></a> 的同名参数。</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.flask.start_server">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.flask.</span></code><code class="sig-name descname"><span class="pre">start_server</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8080</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_access</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payload_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'200M'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">flask_options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/flask.html#start_server"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.flask.start_server" title="永久链接至目标">¶</a></dt>
<dd><p>启动一个 Flask server 将PyWebIO应用作为Web服务提供。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session_expire_seconds</strong> (<em>int</em>) – 会话过期时间，单位为秒（默认600秒）。若 session_expire_seconds 秒内没有收到客户端的请求，则认为会话过期。</p></li>
<li><p><strong>session_cleanup_interval</strong> (<em>int</em>) – 会话清理间隔，单位为秒(默认300秒)。服务端会周期性清理过期的会话，释放会话占用的资源。</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – 是否开启Flask Server的debug模式，开启后，代码发生修改后服务器会自动重启。</p></li>
<li><p><strong>max_payload_size</strong> (<em>int/str</em>) – Flask Server可以接受的最大单个HTTP请求的大小</p></li>
<li><p><strong>flask_options</strong> – 传递给 <code class="docutils literal notranslate"><span class="pre">flask.Flask.run</span></code> 函数的额外的关键字参数
可设置项参考: <a class="reference external" href="https://flask.palletsprojects.com/en/1.1.x/api/#flask.Flask.run">https://flask.palletsprojects.com/en/1.1.x/api/#flask.Flask.run</a></p></li>
</ul>
</dd>
</dl>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.tornado.start_server()</span></code></a> 的同名参数</p>
</dd></dl>

</div>
<div class="section" id="django-support">
<h5><a class="toc-backref" href="#id8">Django support</a><a class="headerlink" href="#django-support" title="永久链接至标题">¶</a></h5>
<p>使用Django后端作为PyWebIO应用Server时，需要您自行安装Django，并确保版本大于等于 <code class="docutils literal notranslate"><span class="pre">2.2</span></code> 。
可通过以下命令安装:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">django</span><span class="o">&gt;=</span><span class="mf">2.2</span>
</pre></div>
</div>
<dl class="py function">
<dt id="pywebio.platform.django.webio_view">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.django.</span></code><code class="sig-name descname"><span class="pre">webio_view</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/django.html#webio_view"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.django.webio_view" title="永久链接至目标">¶</a></dt>
<dd><p>获取在django中运行PyWebIO任务的视图函数。 基于http请求与前端进行通讯</p>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.flask.webio_view" title="pywebio.platform.flask.webio_view"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.flask.webio_view()</span></code></a> 的同名参数。</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.django.wsgi_app">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.django.</span></code><code class="sig-name descname"><span class="pre">wsgi_app</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payload_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'200M'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">django_options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/django.html#wsgi_app"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.django.wsgi_app" title="永久链接至目标">¶</a></dt>
<dd><p>将PyWebIO应用转换为Django WSGI 应用</p>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.django.start_server" title="pywebio.platform.django.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.django.start_server()</span></code></a> 的同名参数。</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.django.start_server">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.django.</span></code><code class="sig-name descname"><span class="pre">start_server</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8080</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_access</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_expire_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_cleanup_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_payload_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'200M'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">django_options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/django.html#start_server"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.django.start_server" title="永久链接至目标">¶</a></dt>
<dd><p>启动一个 Django server 将PyWebIO应用作为Web服务提供。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>debug</strong> (<em>bool</em>) – 开启 Django debug mode。参见 <a class="reference external" href="https://docs.djangoproject.com/en/3.0/ref/settings/#debug">Django doc</a> .</p></li>
<li><p><strong>django_options</strong> – django应用的其他设置，见 <a class="reference external" href="https://docs.djangoproject.com/en/3.0/ref/settings/">https://docs.djangoproject.com/en/3.0/ref/settings/</a> .
其中 <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> 、 <code class="docutils literal notranslate"><span class="pre">ALLOWED_HOSTS</span></code> 、 <code class="docutils literal notranslate"><span class="pre">ROOT_URLCONF</span></code> 、 <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code> 被PyWebIO设置，无法在 <code class="docutils literal notranslate"><span class="pre">django_options</span></code> 中指定</p></li>
</ul>
</dd>
</dl>
<p>剩余参数的详细说明见 <a class="reference internal" href="#pywebio.platform.flask.start_server" title="pywebio.platform.flask.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.flask.start_server()</span></code></a> 的同名参数。</p>
</dd></dl>

</div>
<div class="section" id="aiohttp-support">
<h5><a class="toc-backref" href="#id9">aiohttp support</a><a class="headerlink" href="#aiohttp-support" title="永久链接至标题">¶</a></h5>
<p>使用aiohttp后端作为PyWebIO应用Server时，需要您自行安装aiohttp，并确保版本大于等于 <code class="docutils literal notranslate"><span class="pre">3.1</span></code> 。
可通过以下命令安装:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">aiohttp</span><span class="o">&gt;=</span><span class="mf">3.1</span>
</pre></div>
</div>
<dl class="py function">
<dt id="pywebio.platform.aiohttp.webio_handler">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.aiohttp.</span></code><code class="sig-name descname"><span class="pre">webio_handler</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">websocket_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/aiohttp.html#webio_handler"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.aiohttp.webio_handler" title="永久链接至目标">¶</a></dt>
<dd><p>Get the <a class="reference external" href="https://docs.aiohttp.org/en/stable/web_quickstart.html#aiohttp-web-handler">Request Handler</a> coroutine for running PyWebIO applications in aiohttp.
The handler communicates with the browser by WebSocket protocol.</p>
<p>The arguments of <code class="docutils literal notranslate"><span class="pre">webio_handler()</span></code> have the same meaning as for <a class="reference internal" href="#pywebio.platform.aiohttp.start_server" title="pywebio.platform.aiohttp.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.aiohttp.start_server()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p>aiohttp Request Handler</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.aiohttp.start_server">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.aiohttp.</span></code><code class="sig-name descname"><span class="pre">start_server</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_access</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_open_webbrowser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">websocket_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">aiohttp_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/aiohttp.html#start_server"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.aiohttp.start_server" title="永久链接至目标">¶</a></dt>
<dd><p>Start a aiohttp server to provide the PyWebIO application as a web service.</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>websocket_settings</strong> (<em>dict</em>) – The  parameters passed to the constructor of <code class="docutils literal notranslate"><span class="pre">aiohttp.web.WebSocketResponse</span></code>.
For details, please refer: <a class="reference external" href="https://docs.aiohttp.org/en/stable/web_reference.html#websocketresponse">https://docs.aiohttp.org/en/stable/web_reference.html#websocketresponse</a></p></li>
<li><p><strong>aiohttp_settings</strong> – Additional keyword arguments passed to the constructor of <code class="docutils literal notranslate"><span class="pre">aiohttp.web.Application</span></code>.
For details, please refer: <a class="reference external" href="https://docs.aiohttp.org/en/stable/web_reference.html#application">https://docs.aiohttp.org/en/stable/web_reference.html#application</a></p></li>
</ul>
</dd>
</dl>
<p>剩余参数的详细说明见 <a class="reference internal" href="#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.tornado.start_server()</span></code></a> 的同名参数。</p>
</dd></dl>

</div>
<div class="section" id="fastapi-starlette-support">
<h5><a class="toc-backref" href="#id10">FastAPI/Starlette support</a><a class="headerlink" href="#fastapi-starlette-support" title="永久链接至标题">¶</a></h5>
<p>当使用FastAPI/Starlette作为PyWebIO的后端server时，你需要手动安装 <code class="docutils literal notranslate"><span class="pre">fastapi</span></code> 或 <code class="docutils literal notranslate"><span class="pre">starlette</span></code> ，另外还需要安装一些其他的依赖库，可以使用以下命令安装:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">fastapi</span> <span class="n">starlette</span> <span class="n">uvicorn</span> <span class="n">aiofiles</span> <span class="n">websockets</span>
</pre></div>
</div>
<dl class="py function">
<dt id="pywebio.platform.fastapi.webio_routes">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.fastapi.</span></code><code class="sig-name descname"><span class="pre">webio_routes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/fastapi.html#webio_routes"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.fastapi.webio_routes" title="永久链接至目标">¶</a></dt>
<dd><p>获取在FastAPI/Starlette中运行PyWebIO的路由组件。</p>
<p>服务端使用WebSocket协议与浏览器进行通讯。</p>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.fastapi.start_server" title="pywebio.platform.fastapi.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.fastapi.start_server()</span></code></a> 的同名参数。</p>
<div class="versionadded">
<p><span class="versionmodified added">1.3 新版功能.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p>FastAPI/Starlette routes</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.fastapi.asgi_app">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.fastapi.</span></code><code class="sig-name descname"><span class="pre">asgi_app</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/fastapi.html#asgi_app"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.fastapi.asgi_app" title="永久链接至目标">¶</a></dt>
<dd><p>将PyWebIO应用转换为starlette/Fastapi ASGI应用</p>
<p>如果你需要自己托管静态文件，请使用 <a class="reference internal" href="#pywebio.platform.fastapi.webio_routes" title="pywebio.platform.fastapi.webio_routes"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.fastapi.webio_routes()</span></code></a></p>
<p>关于各参数的详细说明见 <a class="reference internal" href="#pywebio.platform.fastapi.start_server" title="pywebio.platform.fastapi.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.fastapi.start_server()</span></code></a> 的同名参数。</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>与 <code class="docutils literal notranslate"><span class="pre">FastAPI.mount()</span></code> 一起使用以将 pywebio 作为子应用包含到现有的 Starlette/FastAPI 应用程序中:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">pywebio.platform.fastapi</span> <span class="kn">import</span> <span class="n">asgi_app</span>
<span class="kn">from</span> <span class="nn">pywebio.output</span> <span class="kn">import</span> <span class="n">put_text</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
<span class="n">subapp</span> <span class="o">=</span> <span class="n">asgi_app</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;hello from pywebio&quot;</span><span class="p">))</span>
<span class="n">app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;/pywebio&quot;</span><span class="p">,</span> <span class="n">subapp</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Starlette/Fastapi ASGI app</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">1.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.fastapi.start_server">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.fastapi.</span></code><code class="sig-name descname"><span class="pre">start_server</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">applications</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_access</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_origins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_open_webbrowser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">uvicorn_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/fastapi.html#start_server"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.fastapi.start_server" title="永久链接至目标">¶</a></dt>
<dd><p>启动一个 FastAPI/Starlette server 将PyWebIO应用作为Web服务提供。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>debug</strong> (<em>bool</em>) – 发生异常时是否打印调用栈。</p></li>
<li><p><strong>uvicorn_settings</strong> – 传递给 <code class="docutils literal notranslate"><span class="pre">uvicorn.run()</span></code> 的额外关键字参数
可设置项参考: <a class="reference external" href="https://www.uvicorn.org/settings/">https://www.uvicorn.org/settings/</a></p></li>
</ul>
</dd>
</dl>
<p>剩余参数的详细说明见 <a class="reference internal" href="#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.platform.tornado.start_server()</span></code></a> 的同名参数。</p>
<div class="versionadded">
<p><span class="versionmodified added">1.3 新版功能.</span></p>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="other">
<h4><a class="toc-backref" href="#id11">其他</a><a class="headerlink" href="#other" title="永久链接至标题">¶</a></h4>
<dl class="py function">
<dt id="pywebio.config">
<code class="sig-prename descclassname"><span class="pre">pywebio.</span></code><code class="sig-name descname"><span class="pre">config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theme</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">js_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">js_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">css_style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">css_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/page.html#config"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.config" title="永久链接至目标">¶</a></dt>
<dd><p>PyWebIO应用配置</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – 应用标题</p></li>
<li><p><strong>description</strong> (<em>str</em>) – 应用简介</p></li>
<li><p><strong>theme</strong> (<em>str</em>) – <p>主题设置。可用主题有： <code class="docutils literal notranslate"><span class="pre">dark</span></code>, <code class="docutils literal notranslate"><span class="pre">sketchy</span></code>, <code class="docutils literal notranslate"><span class="pre">minty</span></code>, <code class="docutils literal notranslate"><span class="pre">yeti</span></code> 。同样可以使用环境变量 <code class="docutils literal notranslate"><span class="pre">PYWEBIO_THEME</span></code> 来设置主题(有更高优先级)。</p>
<p><a class="reference external" href="http://pywebio-demos.pywebio.online/theme">主题预览</a></p>
<details class="summary-open-source-credits">
<summary>None</summary><p>dark主题更改自 <a class="reference external" href="https://github.com/ForEvolve/bootstrap-dark">bootstrap-dark</a> ， sketchy, minty和yeti 主题来自 <a class="reference external" href="https://bootswatch.com/4/">bootswatch</a> 。</p>
</details></p></li>
<li><p><strong>js_code</strong> (<em>str</em>) – 需要注入到页面上的Javascript代码</p></li>
<li><p><strong>js_file</strong> (<em>str/list</em>) – 需要添加到页面上的Javascript脚本文件，可以是文件的URL或URL列表。</p></li>
<li><p><strong>css_style</strong> (<em>str</em>) – 需要注入到页面上的CSS样式规则。</p></li>
<li><p><strong>css_file</strong> (<em>str/list</em>) – 需要添加到页面上的CSS样式文件，可以是文件的URL或URL列表。</p></li>
</ul>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">config()</span></code> 可以通过两种方式使用：直接调用或作为装饰器使用。如果直接调用 <code class="docutils literal notranslate"><span class="pre">config()</span></code> ，将会作用于全局；如果使用装饰器，配置进将作用于被装饰的PyWebIO应用函数:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;My application&quot;</span><span class="p">)</span>  <span class="c1"># global configuration</span>

<span class="nd">@config</span><span class="p">(</span><span class="n">css_style</span><span class="o">=</span><span class="s2">&quot;* { color:red }&quot;</span><span class="p">)</span>  <span class="c1"># only works on this application</span>
<span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;hello PyWebIO&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>The configuration will affect all sessions</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">title</span></code> 和 <code class="docutils literal notranslate"><span class="pre">description</span></code>  被用来设置SEO(在被搜索引擎索引时提供的网页信息)。如果没有提供 <code class="docutils literal notranslate"><span class="pre">title</span></code> 或 <code class="docutils literal notranslate"><span class="pre">description</span></code> ，PyWebIO默认会将任务函数的 <a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">函数注释</a> 作为SEO信息:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;应用标题</span>

<span class="sd">    应用简介...</span>
<span class="sd">    (应用简介和标题之间使用一个空行分隔)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>以上代码等价于:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@config</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Application title&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Application description...&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.4 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.5 版更改: </span>add <code class="docutils literal notranslate"><span class="pre">theme</span></code> parameter</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio.platform.run_event_loop">
<code class="sig-prename descclassname"><span class="pre">pywebio.platform.</span></code><code class="sig-name descname"><span class="pre">run_event_loop</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/platform/httpbased.html#run_event_loop"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.platform.run_event_loop" title="永久链接至目标">¶</a></dt>
<dd><p>运行 asyncio 事件循环</p>
<p>See also: <a class="reference internal" href="index.html#coroutine-web-integration"><span class="std std-ref">Integration coroutine-based session with Web framework</span></a></p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>debug</strong> – Set the debug mode of the event loop.
See also: <a class="reference external" href="https://docs.python.org/3/library/asyncio-dev.html#asyncio-debug-mode">https://docs.python.org/3/library/asyncio-dev.html#asyncio-debug-mode</a></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<span id="document-pin"></span><span class="target" id="module-pywebio.pin"></span><div class="section" id="pywebio-pin-persistent-input">
<h3><code class="docutils literal notranslate"><span class="pre">pywebio.pin</span></code> — 持续性输入<a class="headerlink" href="#pywebio-pin-persistent-input" title="永久链接至标题">¶</a></h3>
<p><em>pin == Persistent input == Pinning input widget to the page</em></p>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="永久链接至标题">¶</a></h4>
<p>我们已经知道，PyWebIO中的输入函数是阻塞式的，输入表单会在成功提交后被销毁。在大多数场景下，使用这种方式接收用户输入已经够用了。但在一些场景下，你或许希望输入表单在提交后不消失，并且可以继续接收输入。</p>
<p>所以，PyWebIO提供了 <code class="docutils literal notranslate"><span class="pre">pin</span></code> 模块来实现持续性输入。</p>
<p><code class="docutils literal notranslate"><span class="pre">pin</span></code> 模块主要有3部分内容:</p>
<p>首先， <code class="docutils literal notranslate"><span class="pre">pin</span></code> 模块提供了一些 pin 组件(widgets)。Pin 组件和 <code class="docutils literal notranslate"><span class="pre">pywebio.output</span></code> 模块中的输出组件并没有什么不同，只不过它还可以接收输入。</p>
<p>以下代码输出了一个最基本的文本框pin组件:</p>
<div class="demo-cb highlight-default notranslate" id="demo-pin-put-input"><div class="highlight"><pre><span></span><span class="n">put_input</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;This is a input widget&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>实际上, pin 组件函数的调用方式和输出函数是一致的，你可以将其作为组合输出的一部分, 也可以将其输出到某个scope中:</p>
<div class="demo-cb highlight-default notranslate" id="demo-pin-basic"><div class="highlight"><pre><span></span><span class="n">put_row</span><span class="p">([</span>
    <span class="n">put_input</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">),</span>
    <span class="n">put_select</span><span class="p">(</span><span class="s1">&#39;select&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span>
<span class="p">])</span>

<span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;search-area&#39;</span><span class="p">):</span>
    <span class="n">put_input</span><span class="p">(</span><span class="s1">&#39;search&#39;</span><span class="p">,</span> <span class="n">placeholder</span><span class="o">=</span><span class="s1">&#39;Search&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>然后，你可以使用 <a class="reference internal" href="#pywebio.pin.pin" title="pywebio.pin.pin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin</span></code></a> 对象来获取pin组件的值：</p>
<div class="demo-cb highlight-default notranslate" id="demo-get-pin-value"><div class="highlight"><pre><span></span><span class="n">put_input</span><span class="p">(</span><span class="s1">&#39;pin_name&#39;</span><span class="p">)</span>
<span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;Get Pin Value&#39;</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">put_text</span><span class="p">(</span><span class="n">pin</span><span class="o">.</span><span class="n">pin_name</span><span class="p">))</span>
</pre></div>
</div>
<p>Pin组件函数的第一个参数为pin组件的 <code class="docutils literal notranslate"><span class="pre">name</span></code> 。你可以使用 <a class="reference internal" href="#pywebio.pin.pin" title="pywebio.pin.pin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin</span></code></a> 对象的同名属性来获取对应pin组件的当前值。</p>
<p>另外， <a class="reference internal" href="#pywebio.pin.pin" title="pywebio.pin.pin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin</span></code></a> 对象同样支持以索引的方式获取pin组件的值，即:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pin</span><span class="p">[</span><span class="s1">&#39;pin_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">pin</span><span class="o">.</span><span class="n">pin_name</span>
</pre></div>
</div>
<p>Pin模块中还有两个有用的函数: <a class="reference internal" href="#pywebio.pin.pin_wait_change" title="pywebio.pin.pin_wait_change"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin_wait_change()</span></code></a> 和 <a class="reference internal" href="#pywebio.pin.pin_update" title="pywebio.pin.pin_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin_update()</span></code></a>。</p>
<p>由于pin组件输出函数是非阻塞的， 所以使用 <a class="reference internal" href="#pywebio.pin.pin_wait_change" title="pywebio.pin.pin_wait_change"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin_wait_change()</span></code></a> 来等待一组pin组件的值发生变化，它是一个阻塞式函数。</p>
<p><a class="reference internal" href="#pywebio.pin.pin_update" title="pywebio.pin.pin_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin_update()</span></code></a> 可以用来更新pin组件的输出属性。</p>
</div>
<div class="section" id="pin-widgets">
<h4>Pin widgets<a class="headerlink" href="#pin-widgets" title="永久链接至标题">¶</a></h4>
<p>每个pin组件函数都对应一个 <a class="reference internal" href="index.html#document-input"><span class="doc">input</span></a> 模块中的输入函数。(出于性能原因，没有提供 <a class="reference internal" href="index.html#pywebio.input.file_upload" title="pywebio.input.file_upload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_upload()</span></code></a> 函数对应的pin组件)</p>
<p>Pin组件函数支持大多数对应的输入函数的参数。这里列举了两者之间的一些不同：</p>
<blockquote>
<div><ul class="simple">
<li><p>Pin组件函数的第一个参数始终是Pin组件的 <code class="docutils literal notranslate"><span class="pre">name</span></code> ，且当输出了同名的pin组件时，旧的pin组件会不可用。</p></li>
<li><p>Pin functions don’t support the <code class="docutils literal notranslate"><span class="pre">on_change</span></code> and <code class="docutils literal notranslate"><span class="pre">validate</span></code> callbacks, and the <code class="docutils literal notranslate"><span class="pre">required</span></code> parameter.
(There is a <a class="reference internal" href="#pywebio.pin.pin_on_change" title="pywebio.pin.pin_on_change"><code class="xref py py-func docutils literal notranslate"><span class="pre">pin_on_change()</span></code></a> function as an alternative to <code class="docutils literal notranslate"><span class="pre">on_change</span></code>)</p></li>
<li><p>Pin组件函数多了用于输出控制的 <code class="docutils literal notranslate"><span class="pre">scope</span></code> 和 <code class="docutils literal notranslate"><span class="pre">position</span></code> 参数。</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt id="pywebio.pin.put_input">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">put_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'text'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">placeholder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datalist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/pin.html#put_input"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.put_input" title="永久链接至目标">¶</a></dt>
<dd><p>输出一个文本输入组件。参见 <a class="reference internal" href="index.html#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.input()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.put_textarea">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">put_textarea</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minlength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">placeholder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/pin.html#put_textarea"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.put_textarea" title="永久链接至目标">¶</a></dt>
<dd><p>输出一个文本域输入组件。参见 <a class="reference internal" href="index.html#pywebio.input.textarea" title="pywebio.input.textarea"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.textarea()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.put_select">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">put_select</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiple</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/pin.html#put_select"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.put_select" title="永久链接至目标">¶</a></dt>
<dd><p>输出一个下拉选择输入组件。参见 <a class="reference internal" href="index.html#pywebio.input.select" title="pywebio.input.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.select()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.put_checkbox">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">put_checkbox</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/pin.html#put_checkbox"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.put_checkbox" title="永久链接至目标">¶</a></dt>
<dd><p>输出一个多选框组件。参见 <a class="reference internal" href="index.html#pywebio.input.checkbox" title="pywebio.input.checkbox"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.checkbox()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.put_radio">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">put_radio</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/pin.html#put_radio"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.put_radio" title="永久链接至目标">¶</a></dt>
<dd><p>输出一个单选按钮组件。参见 <a class="reference internal" href="index.html#pywebio.input.radio" title="pywebio.input.radio"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.radio()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.put_slider">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">put_slider</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/pin.html#put_slider"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.put_slider" title="永久链接至目标">¶</a></dt>
<dd><p>输出一个滑块输入组件。参见 <a class="reference internal" href="index.html#pywebio.input.slider" title="pywebio.input.slider"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.slider()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.put_actions">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">put_actions</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buttons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio/pin.html#put_actions"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.put_actions" title="永久链接至目标">¶</a></dt>
<dd><p>输出一组action按钮。参见 <a class="reference internal" href="index.html#pywebio.input.actions" title="pywebio.input.actions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.actions()</span></code></a></p>
<p>不像 <code class="docutils literal notranslate"><span class="pre">actions()`</span> <span class="pre">函数，``put_actions()</span></code> 不会提交任何表单，它只会设置pin组件的值。 <code class="docutils literal notranslate"><span class="pre">put_actions()</span></code> 只接受 ‘submit’ 类型的按钮。</p>
<div class="versionadded">
<p><span class="versionmodified added">1.4 新版功能.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="pin-utils">
<h4>Pin utils<a class="headerlink" href="#pin-utils" title="永久链接至标题">¶</a></h4>
<dl class="py data">
<dt id="pywebio.pin.pin">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">pin</span></code><a class="headerlink" href="#pywebio.pin.pin" title="永久链接至目标">¶</a></dt>
<dd><p>获取与设置Pin组件的值</p>
<p>You can use attribute or key index of <code class="docutils literal notranslate"><span class="pre">pin</span></code> object to get the current value of a pin widget.
By default, when accessing the value of a widget that does not exist, it returns <code class="docutils literal notranslate"><span class="pre">None</span></code> instead of
throwing an exception.</p>
<p>还可以使用 <code class="docutils literal notranslate"><span class="pre">pin</span></code> 对象设置pin组件的值:</p>
<div class="demo-cb highlight-default notranslate" id="demo-set-pin-value"><div class="highlight"><pre><span></span><span class="n">put_input</span><span class="p">(</span><span class="s1">&#39;counter&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">pin</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">pin</span><span class="o">.</span><span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># Equivalent to: pin[&#39;counter&#39;] = pin[&#39;counter&#39;] + 1</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>注：当使用 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程的会话</span></a> 时，你需要使用 <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">pin.name</span></code> (或 <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">pin['name']</span></code>) 语法来获取pin组件的值。</p>
<p>Use <code class="xref py py-obj docutils literal notranslate"><span class="pre">pin.pin.use_strict()</span></code> to enable strict mode for getting pin widget value.
An <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> will be raised when try to get value of pin widgets that are currently not in the page.</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.pin_wait_change">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">pin_wait_change</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/pin.html#pin_wait_change"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.pin_wait_change" title="永久链接至目标">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">pin_wait_change()</span></code> 监听一组pin组件，当其中任意一个的值发生变化后，函数返回发生变化的组件的 <code class="docutils literal notranslate"><span class="pre">name</span></code> 和值。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>names</strong> (<em>str</em>) – Pin组件 <code class="docutils literal notranslate"><span class="pre">name</span></code> 列表</p></li>
<li><p><strong>timeout</strong> (<em>int/None</em>) – 当 <code class="docutils literal notranslate"><span class="pre">timeout</span></code> 为正数时， <code class="docutils literal notranslate"><span class="pre">pin_wait_change()</span></code> 会最多阻塞 <code class="docutils literal notranslate"><span class="pre">timeout</span></code> 秒然后返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> 如果这段时间内监听的pin组件的值没有发生变化的话。 将 <code class="docutils literal notranslate"><span class="pre">timeout</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">None</span></code> （默认）来关闭超时。</p></li>
</ul>
</dd>
<dt class="field-even">Return dict/None</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">{&quot;name&quot;:</span> <span class="pre">发生变化的pin组件的name,</span> <span class="pre">&quot;value&quot;:</span> <span class="pre">发生变化的pin组件的当前值}</span></code> ， 当超时发生后，返回 <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
<p>Example:</p>
<div class="demo-cb highlight-default notranslate" id="demo-pin-wait-change"><div class="highlight"><pre><span></span><span class="n">put_input</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">put_input</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">changed</span> <span class="o">=</span> <span class="n">pin_wait_change</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">use_scope</span><span class="p">(</span><span class="s1">&#39;res&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">put_code</span><span class="p">(</span><span class="n">changed</span><span class="p">)</span>
        <span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;a + b = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pin</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">pin</span><span class="o">.</span><span class="n">b</span><span class="p">))</span>
</pre></div>
</div>
<p><a class="reference external" href="http://pywebio-demos.pywebio.online/markdown_previewer">这里</a> 有一个使用 <a class="reference internal" href="#pywebio.pin.pin_wait_change" title="pywebio.pin.pin_wait_change"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin_wait_change()</span></code></a> 实现markdown实时预览的demo。</p>
<p>注：使用 <a class="reference internal" href="#pywebio.pin.pin" title="pywebio.pin.pin"><code class="xref py py-data docutils literal notranslate"><span class="pre">pin</span></code></a> 对象或 <a class="reference internal" href="#pywebio.pin.pin_update" title="pywebio.pin.pin_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin_update()</span></code></a> 更新pin组件的值不会引发 <a class="reference internal" href="#pywebio.pin.pin_wait_change" title="pywebio.pin.pin_wait_change"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin_wait_change()</span></code></a> 返回</p>
<p>当使用 <a class="reference internal" href="index.html#coroutine-based-session"><span class="std std-ref">基于协程的会话</span></a> 时，你需要使用 <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">pin_wait_change()</span></code> 语法来调用此函数。</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.pin_update">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">pin_update</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/pin.html#pin_update"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.pin_update" title="永久链接至目标">¶</a></dt>
<dd><p>更新pin组件的输出属性。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – 目标pin组件的 <code class="docutils literal notranslate"><span class="pre">name</span></code> 。</p></li>
<li><p><strong>spec</strong> – 需要被更新的pin组件的参数。注意以下参数无法被更新： <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">code</span></code>, <code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio.pin.pin_on_change">
<code class="sig-prename descclassname"><span class="pre">pywebio.pin.</span></code><code class="sig-name descname"><span class="pre">pin_on_change</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">callback_options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio/pin.html#pin_on_change"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio.pin.pin_on_change" title="永久链接至目标">¶</a></dt>
<dd><p>Bind a callback function to pin widget, the function will be called when user change the value of the pin widget.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">onchange</span></code> callback is invoked with one argument, the changed value of the pin widget.
You can bind multiple functions to one pin widget, those functions will be invoked sequentially
(default behavior, can be changed by <code class="xref py py-obj docutils literal notranslate"><span class="pre">clear</span></code> parameter).</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – pin widget name</p></li>
<li><p><strong>onchange</strong> (<em>callable</em>) – callback function</p></li>
<li><p><strong>clear</strong> (<em>bool</em>) – whether to clear the previous callbacks bound to this pin widget.
If you just want to clear callbacks and not set new callback, use <code class="docutils literal notranslate"><span class="pre">pin_on_change(name,</span> <span class="pre">clear=True)</span></code>.</p></li>
<li><p><strong>init_run</strong> (<em>bool</em>) – whether to run the <code class="docutils literal notranslate"><span class="pre">onchange</span></code> callback once immediately before the pin widget changed.
This parameter can be used to initialize the output.</p></li>
<li><p><strong>callback_options</strong> – Other options of the <code class="docutils literal notranslate"><span class="pre">onclick</span></code> callback.
Refer to the <code class="docutils literal notranslate"><span class="pre">callback_options</span></code> parameter of <a class="reference internal" href="index.html#pywebio.output.put_buttons" title="pywebio.output.put_buttons"><code class="xref py py-func docutils literal notranslate"><span class="pre">put_buttons()</span></code></a></p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">1.6 新版功能.</span></p>
</div>
</dd></dl>

</div>
</div>
<span id="document-advanced"></span><div class="section" id="advanced-topic">
<h3>高级特性<a class="headerlink" href="#advanced-topic" title="永久链接至标题">¶</a></h3>
<p>本部分介绍PyWebIO的高级特性。</p>
<div class="section" id="start-multiple-applications-with-start-server">
<span id="multiple-app"></span><h4>使用start_server()启动多应用<a class="headerlink" href="#start-multiple-applications-with-start-server" title="永久链接至标题">¶</a></h4>
<p><a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code></a> 接收一个函数作为PyWebIO应用，另外， <a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code></a>  还支持传入函数列表或字典，从而启动多个PyWebIO应用，应用之间可以通过 <a class="reference internal" href="index.html#pywebio.session.go_app" title="pywebio.session.go_app"><code class="xref py py-obj docutils literal notranslate"><span class="pre">go_app()</span></code></a> 或 <a class="reference internal" href="index.html#pywebio.output.put_link" title="pywebio.output.put_link"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_link()</span></code></a> 进行跳转:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">task_1</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;task_1&#39;</span><span class="p">)</span>
    <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;Go task 2&#39;</span><span class="p">],</span> <span class="p">[</span><span class="k">lambda</span><span class="p">:</span> <span class="n">go_app</span><span class="p">(</span><span class="s1">&#39;task_2&#39;</span><span class="p">)])</span>

<span class="k">def</span> <span class="nf">task_2</span><span class="p">():</span>
    <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;task_2&#39;</span><span class="p">)</span>
    <span class="n">put_buttons</span><span class="p">([</span><span class="s1">&#39;Go task 1&#39;</span><span class="p">],</span> <span class="p">[</span><span class="k">lambda</span><span class="p">:</span> <span class="n">go_app</span><span class="p">(</span><span class="s1">&#39;task_1&#39;</span><span class="p">)])</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">put_link</span><span class="p">(</span><span class="s1">&#39;Go task 1&#39;</span><span class="p">,</span> <span class="n">app</span><span class="o">=</span><span class="s1">&#39;task_1&#39;</span><span class="p">)</span>  <span class="c1"># Use `app` parameter to specify the task name</span>
    <span class="n">put_link</span><span class="p">(</span><span class="s1">&#39;Go task 2&#39;</span><span class="p">,</span> <span class="n">app</span><span class="o">=</span><span class="s1">&#39;task_2&#39;</span><span class="p">)</span>

<span class="c1"># equal to `start_server({&#39;index&#39;: index, &#39;task_1&#39;: task_1, &#39;task_2&#39;: task_2})`</span>
<span class="n">start_server</span><span class="p">([</span><span class="n">index</span><span class="p">,</span> <span class="n">task_1</span><span class="p">,</span> <span class="n">task_2</span><span class="p">])</span>
</pre></div>
</div>
<p>当 <a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code></a> 的第一个参数的类型为字典时，字典键为应用名，类型为列表时，函数名为应用名。</p>
<p>可以通过 <code class="docutils literal notranslate"><span class="pre">app</span></code> URL参数选择要访问的应用(例如使用 <code class="docutils literal notranslate"><span class="pre">http://host:port/?app=foo</span></code> 来访问 <code class="docutils literal notranslate"><span class="pre">foo</span></code> 应用)， 为提供了 <code class="docutils literal notranslate"><span class="pre">app</span></code> URL参数时默认使用运行 <code class="docutils literal notranslate"><span class="pre">index</span></code> 应用，当 <code class="docutils literal notranslate"><span class="pre">index</span></code> 应用不存在时，PyWebIO会提供一个默认的索引页作为 <code class="docutils literal notranslate"><span class="pre">index</span></code> 应用。</p>
</div>
<div class="section" id="integration-with-web-framework">
<span id="integration-web-framework"></span><h4>与Web框架整合<a class="headerlink" href="#integration-with-web-framework" title="永久链接至标题">¶</a></h4>
<p>可以将PyWebIO应用集成到现有的Python Web项目中，PyWebIO应用与Web项目共用一个Web框架。目前支持与Flask、Tornado、Django、aiohttp和FastAPI(Starlette) Web框架的集成。</p>
<p>不同Web框架的集成方法如下：</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Tornado</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Flask</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Django</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1">aiohttp</button><button aria-controls="panel-0-0-4" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-4" name="0-4" role="tab" tabindex="-1">FastAPI/Starlette</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>使用 <a class="reference internal" href="index.html#pywebio.platform.tornado.webio_handler" title="pywebio.platform.tornado.webio_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform.tornado.webio_handler()</span></code></a> 来获取在Tornado中运行PyWebIO应用的 <a class="reference external" href="https://www.tornadoweb.org/en/stable/websocket.html#tornado.websocket.WebSocketHandler">WebSocketHandler</a> 类:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tornado.ioloop</span>
<span class="kn">import</span> <span class="nn">tornado.web</span>
<span class="kn">from</span> <span class="nn">pywebio.platform.tornado</span> <span class="kn">import</span> <span class="n">webio_handler</span>

<span class="k">class</span> <span class="nc">MainHandler</span><span class="p">(</span><span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Hello, world&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">application</span> <span class="o">=</span> <span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">Application</span><span class="p">([</span>
        <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">MainHandler</span><span class="p">),</span>
        <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;/tool&quot;</span><span class="p">,</span> <span class="n">webio_handler</span><span class="p">(</span><span class="n">task_func</span><span class="p">)),</span>  <span class="c1"># `task_func` is PyWebIO task function</span>
    <span class="p">])</span>
    <span class="n">application</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">)</span>
    <span class="n">tornado</span><span class="o">.</span><span class="n">ioloop</span><span class="o">.</span><span class="n">IOLoop</span><span class="o">.</span><span class="n">current</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>以上代码将 PyWebIO 应用的 <code class="docutils literal notranslate"><span class="pre">WebSocketHandler</span></code> 绑定到了 <code class="docutils literal notranslate"><span class="pre">/tool</span></code> 路径下。 启动Tornado后，访问 <code class="docutils literal notranslate"><span class="pre">http://localhost/tool</span></code> 即可打开PyWebIO应用。</p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>当使用Tornado后端时，PyWebIO使用WebSocket协议和浏览器进行通讯，如果你的Tornado应用处在反向代理(比如Nginx)之后，可能需要特别配置反向代理来支持WebSocket协议，<a class="reference internal" href="index.html#nginx-ws-config"><span class="std std-ref">这里</span></a> 有一个Nginx配置WebSocket的例子。</p>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>使用 <a class="reference internal" href="index.html#pywebio.platform.flask.webio_view" title="pywebio.platform.flask.webio_view"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform.flask.webio_view()</span></code></a> 来获取在Flask中运行PyWebIO应用的视图函数:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywebio.platform.flask</span> <span class="kn">import</span> <span class="n">webio_view</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># `task_func` is PyWebIO task function</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span><span class="s1">&#39;/tool&#39;</span><span class="p">,</span> <span class="s1">&#39;webio_view&#39;</span><span class="p">,</span> <span class="n">webio_view</span><span class="p">(</span><span class="n">task_func</span><span class="p">),</span>
            <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;OPTIONS&#39;</span><span class="p">])</span>  <span class="c1"># need GET,POST and OPTIONS methods</span>

<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>以上代码使用添加了一条路由规则将PyWebIO应用的视图函数绑定到 <code class="docutils literal notranslate"><span class="pre">/tool</span></code> 路径下。
启动Flask应用后，访问 <code class="docutils literal notranslate"><span class="pre">http://localhost/tool</span></code> 即可打开PyWebIO应用</p>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><p>使用 <a class="reference internal" href="index.html#pywebio.platform.django.webio_view" title="pywebio.platform.django.webio_view"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform.django.webio_view()</span></code></a> 来获取在Django中运行PyWebIO应用的视图函数:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># urls.py</span>

<span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">pywebio.platform.django</span> <span class="kn">import</span> <span class="n">webio_view</span>

<span class="c1"># `task_func` is PyWebIO task function</span>
<span class="n">webio_view_func</span> <span class="o">=</span> <span class="n">webio_view</span><span class="p">(</span><span class="n">task_func</span><span class="p">)</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;tool&quot;</span><span class="p">,</span> <span class="n">webio_view_func</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>以上代码使用添加了一条路由规则将PyWebIO应用的视图函数绑定到 <code class="docutils literal notranslate"><span class="pre">/tool</span></code> 路径下。
启动Django应用后，访问 <code class="docutils literal notranslate"><span class="pre">http://localhost/tool</span></code> 即可打开PyWebIO应用</p>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><p>使用 <a class="reference internal" href="index.html#pywebio.platform.aiohttp.webio_handler" title="pywebio.platform.aiohttp.webio_handler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform.aiohttp.webio_handler()</span></code></a> 来获取在aiohttp中运行PyWebIO应用的 <a class="reference external" href="https://docs.aiohttp.org/en/stable/web_quickstart.html#aiohttp-web-handler">Request Handler</a> 协程:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiohttp</span> <span class="kn">import</span> <span class="n">web</span>
<span class="kn">from</span> <span class="nn">pywebio.platform.aiohttp</span> <span class="kn">import</span> <span class="n">webio_handler</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">Application</span><span class="p">()</span>
<span class="c1"># `task_func` is PyWebIO task function</span>
<span class="n">app</span><span class="o">.</span><span class="n">add_routes</span><span class="p">([</span><span class="n">web</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/tool&#39;</span><span class="p">,</span> <span class="n">webio_handler</span><span class="p">(</span><span class="n">task_func</span><span class="p">))])</span>

<span class="n">web</span><span class="o">.</span><span class="n">run_app</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>启动aiohttp应用后，访问 <code class="docutils literal notranslate"><span class="pre">http://localhost/tool</span></code> 即可打开PyWebIO应用</p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>当使用aiohttp后端时，PyWebIO使用WebSocket协议和浏览器进行通讯，如果你的aiohttp应用处在反向代理(比如Nginx)之后，
可能需要特别配置反向代理来支持WebSocket协议，<a class="reference internal" href="index.html#nginx-ws-config"><span class="std std-ref">这里</span></a> 有一个Nginx配置WebSocket的例子。</p>
</div>
</div><div aria-labelledby="tab-0-0-4" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-4" name="0-4" role="tabpanel" tabindex="0"><p>使用 <a class="reference internal" href="index.html#pywebio.platform.fastapi.webio_routes" title="pywebio.platform.fastapi.webio_routes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform.fastapi.webio_routes()</span></code></a> 来获取在FastAPI/Starlette中运行PyWebIO应用的路由组件，你可以将其挂载在到FastAPI/Starlette应用中。</p>
<p>FastAPI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">pywebio.platform.fastapi</span> <span class="kn">import</span> <span class="n">webio_routes</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/app&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">read_main</span><span class="p">():</span>
   <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello World from main app&quot;</span><span class="p">}</span>

<span class="c1"># `task_func` is PyWebIO task function</span>
<span class="n">app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;/tool&quot;</span><span class="p">,</span> <span class="n">FastAPI</span><span class="p">(</span><span class="n">routes</span><span class="o">=</span><span class="n">webio_routes</span><span class="p">(</span><span class="n">task_func</span><span class="p">)))</span>
</pre></div>
</div>
<p>Starlette:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">starlette.applications</span> <span class="kn">import</span> <span class="n">Starlette</span>
<span class="kn">from</span> <span class="nn">starlette.responses</span> <span class="kn">import</span> <span class="n">JSONResponse</span>
<span class="kn">from</span> <span class="nn">starlette.routing</span> <span class="kn">import</span> <span class="n">Route</span><span class="p">,</span> <span class="n">Mount</span>
<span class="kn">from</span> <span class="nn">pywebio.platform.fastapi</span> <span class="kn">import</span> <span class="n">webio_routes</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">homepage</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
   <span class="k">return</span> <span class="n">JSONResponse</span><span class="p">({</span><span class="s1">&#39;hello&#39;</span><span class="p">:</span> <span class="s1">&#39;world&#39;</span><span class="p">})</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Starlette</span><span class="p">(</span><span class="n">routes</span><span class="o">=</span><span class="p">[</span>
   <span class="n">Route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">homepage</span><span class="p">),</span>
   <span class="n">Mount</span><span class="p">(</span><span class="s1">&#39;/tool&#39;</span><span class="p">,</span> <span class="n">routes</span><span class="o">=</span><span class="n">webio_routes</span><span class="p">(</span><span class="n">task_func</span><span class="p">))</span>  <span class="c1"># `task_func` is PyWebIO task function</span>
<span class="p">])</span>
</pre></div>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">uvicorn</span> <span class="pre">&lt;module&gt;:app</span></code> 启动server后，访问 <code class="docutils literal notranslate"><span class="pre">http://localhost:8000/tool/</span></code> 即可打开PyWebIO应用</p>
<p>参见: <a class="reference external" href="https://fastapi.tiangolo.com/advanced/sub-applications/">FastAPI doc</a> , <a class="reference external" href="https://www.starlette.io/routing/#submounting-routes">Starlette doc</a></p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>当使用FastAPI或Starlette后端时，PyWebIO使用WebSocket协议和浏览器进行通讯，如果你的aiohttp应用处在反向代理(比如Nginx)之后，
可能需要特别配置反向代理来支持WebSocket协议，<a class="reference internal" href="index.html#nginx-ws-config"><span class="std std-ref">这里</span></a> 有一个Nginx配置WebSocket的例子。</p>
</div>
</div></div>
<div class="section" id="notes">
<span id="integration-web-framework-note"></span><h5>Notes<a class="headerlink" href="#notes" title="永久链接至标题">¶</a></h5>
<p><strong>生产环境部署</strong></p>
<p>在生产环境中，你可能会使用一些 WSGI/ASGI 服务器（如 uWSGI、Gunicorn、Uvicorn）部署 Web 应用程序。由于 PyWebIO 应用程序会在进程中存储会话状态，当使用基于 HTTP 的会话（使用Flask 和 Django后端时）并生成多个进程来处理请求时，请求可能会被分发到错误的进程中。因此，在使用基于 HTTP 的会话时，只能启动一个进程来处理请求。</p>
<p>如果仍然希望使用多进程来提高并发，一种方式是使用 Uvicorn+FastAPI，或者你也可以启动多个Tornado/aiohttp进程，并在它们之前添加外部的负载均衡软件（如 HAProxy 或 nginx）。这些后端使用 WebSocket 协议与浏览器进行通信，所以不存在上述问题。</p>
<p><strong>PyWebIO静态资源的托管</strong></p>
<p>PyWebIO默认使用CDN来获取前端的静态资源，如果要将PyWebIO应用部署到离线环境中，需要自行托管静态文件，
并将 <code class="docutils literal notranslate"><span class="pre">webio_view()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">webio_handler()</span></code> 的 <code class="docutils literal notranslate"><span class="pre">cdn</span></code> 参数设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 。</p>
<p><code class="docutils literal notranslate"><span class="pre">cdn=False</span></code>  时需要将静态资源托管在和PyWebIO应用同级的目录下。
同时，也可以通过 <code class="docutils literal notranslate"><span class="pre">cdn</span></code> 参数直接设置PyWebIO静态资源的URL目录。</p>
<p>PyWebIO的静态文件的路径保存在 <code class="docutils literal notranslate"><span class="pre">pywebio.STATIC_PATH</span></code> 中，可使用命令 <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-c</span> <span class="pre">&quot;import</span> <span class="pre">pywebio;</span> <span class="pre">print(pywebio.STATIC_PATH)&quot;</span></code> 将其打印出来。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>使用 <code class="docutils literal notranslate"><span class="pre">start_server()</span></code> 启动的应用，如果将 <code class="docutils literal notranslate"><span class="pre">cdn</span></code> 参数设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code> ，会自动启动一个本地的静态资源托管服务，无需手动托管。</p>
</div>
</div>
</div>
<div class="section" id="coroutine-based-session">
<span id="id1"></span><h4>基于协程的会话<a class="headerlink" href="#coroutine-based-session" title="永久链接至标题">¶</a></h4>
<p>在大部分情况下，你并不需要使用基于协程的会话。PyWebIO中所有仅用于协程会话的函数或方法都在文档中均有特别说明。</p>
<p>PyWebIO的会话实现默认是基于线程的，用户每打开一个和服务端的会话连接，PyWebIO会启动一个线程来运行任务函数。
除了基于线程的会话，PyWebIO还提供了基于协程的会话。基于协程的会话接受协程函数作为任务函数。</p>
<p>基于协程的会话为单线程模型，所有会话都运行在一个线程内。对于IO密集型的任务，协程比线程占用更少的资源同时又拥有媲美于线程的性能。
另外，协程的上下文切换具有可预测性，能够减少程序同步与加锁的需要，可以有效避免大多数临界区问题。</p>
<div class="section" id="using-coroutine-session">
<h5>使用协程会话<a class="headerlink" href="#using-coroutine-session" title="永久链接至标题">¶</a></h5>
<p>要使用基于协程的会话，需要使用 <code class="docutils literal notranslate"><span class="pre">async</span></code> 关键字将任务函数声明为协程函数，并使用 <code class="docutils literal notranslate"><span class="pre">await</span></code> 语法调用PyWebIO输入函数:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">pywebio.input</span> <span class="kn">import</span> <span class="o">*</span>
 <span class="kn">from</span> <span class="nn">pywebio.output</span> <span class="kn">import</span> <span class="o">*</span>
 <span class="kn">from</span> <span class="nn">pywebio</span> <span class="kn">import</span> <span class="n">start_server</span>

<span class="hll"> <span class="k">async</span> <span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
</span><span class="hll">     <span class="n">name</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;what&#39;s your name?&quot;</span><span class="p">)</span>
</span>     <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Hello, </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>

 <span class="n">start_server</span><span class="p">(</span><span class="n">say_hello</span><span class="p">,</span> <span class="n">auto_open_webbrowser</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>在协程任务函数中，也可以使用 <code class="docutils literal notranslate"><span class="pre">await</span></code> 调用其他协程或标准库 <a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a> 中的可等待对象( <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio-awaitables">awaitable objects</a> ):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">import</span> <span class="nn">asyncio</span>
 <span class="kn">from</span> <span class="nn">pywebio</span> <span class="kn">import</span> <span class="n">start_server</span>

 <span class="k">async</span> <span class="k">def</span> <span class="nf">hello_word</span><span class="p">():</span>
     <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Hello ...&#39;</span><span class="p">)</span>
<span class="hll">     <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># await awaitable objects in asyncio</span>
</span>     <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;... World!&#39;</span><span class="p">)</span>

 <span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="hll">     <span class="k">await</span> <span class="n">hello_word</span><span class="p">()</span>  <span class="c1"># await coroutine</span>
</span>     <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Bye, bye&#39;</span><span class="p">)</span>

 <span class="n">start_server</span><span class="p">(</span><span class="n">main</span><span class="p">,</span> <span class="n">auto_open_webbrowser</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>在基于协程的会话中， <a class="reference internal" href="index.html#document-input"><span class="doc">pywebio.input</span></a> 模块中的定义输入函数都需要使用 <code class="docutils literal notranslate"><span class="pre">await</span></code> 语法来获取返回值，忘记使用 <code class="docutils literal notranslate"><span class="pre">await</span></code> 将会是在使用基于协程的会话时常出现的错误。</p>
<p>其他在协程会话中也需要使用 <code class="docutils literal notranslate"><span class="pre">await</span></code> 语法来进行调用函数有:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="index.html#pywebio.session.run_asyncio_coroutine" title="pywebio.session.run_asyncio_coroutine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session.run_asyncio_coroutine(coro_obj)</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#pywebio.session.eval_js" title="pywebio.session.eval_js"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session.eval_js(expression)</span></code></a></p></li>
</ul>
</div></blockquote>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>虽然PyWebIO的协程会话兼容标准库 <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">awaitable</span> <span class="pre">objects</span></code> ，但 <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> 库不兼容PyWebIO协程会话中的 <code class="docutils literal notranslate"><span class="pre">awaitable</span> <span class="pre">objects</span></code> .</p>
<p>也就是说，无法将PyWebIO中的 <code class="docutils literal notranslate"><span class="pre">awaitable</span> <span class="pre">objects</span></code> 传入 <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> 中的接受 <code class="docutils literal notranslate"><span class="pre">awaitable</span> <span class="pre">objects</span></code> 作为参数的函数中，比如如下调用是 <strong>不被支持的</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="n">pywebio</span><span class="o">.</span><span class="n">input</span><span class="p">())</span>
<span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">pywebio</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">eval_js</span><span class="p">(</span><span class="s1">&#39;1+1&#39;</span><span class="p">))</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">pywebio</span><span class="o">.</span><span class="n">input</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="concurrency-in-coroutine-based-sessions">
<span id="coroutine-based-concurrency"></span><h5>协程会话的并发<a class="headerlink" href="#concurrency-in-coroutine-based-sessions" title="永久链接至标题">¶</a></h5>
<p>在基于协程的会话中，你可以启动线程，但是无法在其中调用PyWebIO交互函数（ <a class="reference internal" href="index.html#pywebio.session.register_thread" title="pywebio.session.register_thread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register_thread()</span></code></a> 在协程会话中不可用）。
但你可以使用 <a class="reference internal" href="index.html#pywebio.session.run_async" title="pywebio.session.run_async"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_async(coro)</span></code></a> 来异步执行一个协程对象，新协程内可以使用PyWebIO交互函数:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">pywebio</span> <span class="kn">import</span> <span class="n">start_server</span>
 <span class="kn">from</span> <span class="nn">pywebio.session</span> <span class="kn">import</span> <span class="n">run_async</span>

 <span class="k">async</span> <span class="k">def</span> <span class="nf">counter</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
         <span class="n">put_text</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
         <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

 <span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="hll">     <span class="n">run_async</span><span class="p">(</span><span class="n">counter</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</span>     <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Main coroutine function exited.&#39;</span><span class="p">)</span>


 <span class="n">start_server</span><span class="p">(</span><span class="n">main</span><span class="p">,</span> <span class="n">auto_open_webbrowser</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="index.html#pywebio.session.run_async" title="pywebio.session.run_async"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_async(coro)</span></code></a> 返回一个 <a class="reference internal" href="index.html#pywebio.session.coroutinebased.TaskHandler" title="pywebio.session.coroutinebased.TaskHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TaskHandler</span></code></a> ，通过该 <a class="reference internal" href="index.html#pywebio.session.coroutinebased.TaskHandler" title="pywebio.session.coroutinebased.TaskHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TaskHandler</span></code></a> 可以查询协程运行状态和关闭协程。</p>
</div>
<div class="section" id="close-of-session">
<h5>会话的结束<a class="headerlink" href="#close-of-session" title="永久链接至标题">¶</a></h5>
<p>和基于线程的会话一样，当用户关闭浏览器页面后，会话也随之关闭。</p>
<p>浏览器页面关闭后，当前会话内还未返回的PyWebIO输入函数调用将抛出 <a class="reference internal" href="index.html#pywebio.exceptions.SessionClosedException" title="pywebio.exceptions.SessionClosedException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionClosedException</span></code></a> 异常，之后对于PyWebIO交互函数的调用将会产生 <a class="reference internal" href="index.html#pywebio.exceptions.SessionNotFoundException" title="pywebio.exceptions.SessionNotFoundException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionNotFoundException</span></code></a> 或 <a class="reference internal" href="index.html#pywebio.exceptions.SessionClosedException" title="pywebio.exceptions.SessionClosedException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionClosedException</span></code></a> 异常。</p>
<p>协程会话也同样支持使用 <a class="reference internal" href="index.html#pywebio.session.defer_call" title="pywebio.session.defer_call"><code class="xref py py-obj docutils literal notranslate"><span class="pre">defer_call(func)</span></code></a> 来设置会话结束时需要调用的函数。</p>
</div>
<div class="section" id="coroutine-web-integration">
<span id="id2"></span><h5>协程会话与Web框架集成<a class="headerlink" href="#coroutine-web-integration" title="永久链接至标题">¶</a></h5>
<p>基于协程的会话同样可以与Web框架进行集成，只需要在原来传入任务函数的地方改为传入协程函数即可。</p>
<p>但当前在使用基于协程的会话集成进Flask或Django时，存在一些限制：</p>
<p>一是协程函数内还无法直接通过 <code class="docutils literal notranslate"><span class="pre">await</span></code> 直接等待asyncio库中的协程对象，目前需要使用 <a class="reference internal" href="index.html#pywebio.session.run_asyncio_coroutine" title="pywebio.session.run_asyncio_coroutine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_asyncio_coroutine()</span></code></a> 进行包装。</p>
<p>二是，在启动Flask/Django这类基于线程的服务器之前需要启动一个单独的线程来运行事件循环。</p>
<p>使用基于协程的会话集成进Flask的示例:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">import</span> <span class="nn">asyncio</span>
 <span class="kn">import</span> <span class="nn">threading</span>
 <span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">send_from_directory</span>
 <span class="kn">from</span> <span class="nn">pywebio</span> <span class="kn">import</span> <span class="n">STATIC_PATH</span>
 <span class="kn">from</span> <span class="nn">pywebio.output</span> <span class="kn">import</span> <span class="o">*</span>
 <span class="kn">from</span> <span class="nn">pywebio.platform.flask</span> <span class="kn">import</span> <span class="n">webio_view</span>
 <span class="kn">from</span> <span class="nn">pywebio.platform</span> <span class="kn">import</span> <span class="n">run_event_loop</span>
 <span class="kn">from</span> <span class="nn">pywebio.session</span> <span class="kn">import</span> <span class="n">run_asyncio_coroutine</span>

 <span class="k">async</span> <span class="k">def</span> <span class="nf">hello_word</span><span class="p">():</span>
     <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;Hello ...&#39;</span><span class="p">)</span>
<span class="hll">     <span class="k">await</span> <span class="n">run_asyncio_coroutine</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>  <span class="c1"># can&#39;t just &quot;await asyncio.sleep(1)&quot;</span>
</span>     <span class="n">put_text</span><span class="p">(</span><span class="s1">&#39;... World!&#39;</span><span class="p">)</span>

 <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
 <span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span><span class="s1">&#39;/hello&#39;</span><span class="p">,</span> <span class="s1">&#39;webio_view&#39;</span><span class="p">,</span> <span class="n">webio_view</span><span class="p">(</span><span class="n">hello_word</span><span class="p">),</span>
                             <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;OPTIONS&#39;</span><span class="p">])</span>

 <span class="c1"># thread to run event loop</span>
<span class="hll"> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run_event_loop</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span> <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>最后，使用PyWebIO编写的协程函数不支持Script模式，总是需要使用 <code class="docutils literal notranslate"><span class="pre">start_server</span></code> 来启动一个服务或者集成进Web框架来调用。</p>
</div>
</div>
</div>
<span id="document-libraries_support"></span><div class="section" id="libraries-support">
<h3>第三方库生态<a class="headerlink" href="#libraries-support" title="永久链接至标题">¶</a></h3>
<div class="section" id="build-stand-alone-app">
<span id="stand-alone-app"></span><h4>构建stand-alone App<a class="headerlink" href="#build-stand-alone-app" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="https://pyinstaller.readthedocs.io/en/stable/">PyInstaller</a>  用于将一个Python应用及其依赖打包到文件夹或可执行文件中，用户可以在不安装Python解释器以及任何模块的情况下运行打包后的应用程序。</p>
<p>可以使用PyInstaller来将PyWebIO应用打包成一个单独的可执行文件或文件夹:</p>
<ol class="arabic">
<li><p>创建pyinstaller spec (specification) 文件:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyi</span><span class="o">-</span><span class="n">makespec</span> <span class="o">&lt;</span><span class="n">options</span><span class="o">&gt;</span> <span class="n">app</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>你需要将 <code class="docutils literal notranslate"><span class="pre">app.py</span></code> 替换成你PyWebIO应用的文件名。</p>
</li>
<li><p>编辑生成的spec文件，将其中 <code class="docutils literal notranslate"><span class="pre">Analysis</span></code> 的 <code class="docutils literal notranslate"><span class="pre">data</span></code> 参数修改为:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywebio.utils</span> <span class="kn">import</span> <span class="n">pyinstaller_datas</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">Analysis</span><span class="p">(</span>
    <span class="o">...</span>
    <span class="n">datas</span><span class="o">=</span><span class="n">pyinstaller_datas</span><span class="p">(),</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>使用spec文件来构建可执行文件:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyinstaller</span> <span class="n">app</span><span class="o">.</span><span class="n">spec</span>
</pre></div>
</div>
</li>
</ol>
<p>如果你希望生成一个单独的可执行文件而不是文件夹，你需要在第一步时传入 <code class="docutils literal notranslate"><span class="pre">--onefile</span></code> 选项。</p>
<p>更多PyInstaller用法请见: <a class="reference external" href="https://pyinstaller.readthedocs.io/en/stable/spec-files.html">https://pyinstaller.readthedocs.io/en/stable/spec-files.html</a></p>
</div>
<div class="section" id="data-visualization">
<span id="visualization"></span><h4>数据可视化<a class="headerlink" href="#data-visualization" title="永久链接至标题">¶</a></h4>
<p>PyWebIO支持使用第三方库进行数据可视化</p>
<div class="section" id="bokeh">
<h5>Bokeh<a class="headerlink" href="#bokeh" title="永久链接至标题">¶</a></h5>
<p><a class="reference external" href="https://github.com/bokeh/bokeh">Bokeh</a> 是一个支持创建实时交互的数据可视化库。</p>
<p>在 PyWebIO 会话中调用 <code class="docutils literal notranslate"><span class="pre">bokeh.io.output_notebook(notebook_type='pywebio')</span></code> 来设置Bokeh输出到PyWebIO:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_notebook</span>
<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">show</span>

<span class="n">output_notebook</span><span class="p">(</span><span class="n">notebook_type</span><span class="o">=</span><span class="s1">&#39;pywebio&#39;</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">show</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<p>相应demo见 <a class="reference external" href="http://pywebio-charts.pywebio.online/?app=bokeh">bokeh demo</a></p>
<p>除了创建普通图表，Bokeh还可以通过启动Bokeh server来显示Bokeh app，Bokeh app支持向图表的添加按钮、输入框等交互组件，并向组件注册Python回调，从而创建可以与Python代码交互的图表。</p>
<p>在PyWebIO中，你也可以使用 <code class="docutils literal notranslate"><span class="pre">bokeh.io.show()</span></code> 来显示一个Bokeh App，代码示例见 <a class="reference external" href="https://github.com/wang0618/PyWebIO/blob/master/demos/bokeh_app.py">bokeh_app.py</a>。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>Bokeh App当前仅支持默认的Tornado后端</p>
</div>
<img alt="https://cdn.jsdelivr.net/gh/wang0618/pywebio-chart-gallery&#64;master/assets/bokeh.png" src="https://cdn.jsdelivr.net/gh/wang0618/pywebio-chart-gallery&#64;master/assets/bokeh.png" />
</div>
<div class="section" id="pyecharts">
<h5>pyecharts<a class="headerlink" href="#pyecharts" title="永久链接至标题">¶</a></h5>
<p><a class="reference external" href="https://github.com/pyecharts/pyecharts">pyecharts</a> 是一个使用Python创建 <a class="reference external" href="https://github.com/ecomfe/echarts">Echarts</a> 可视化图表的库。</p>
<p>在 PyWebIO 中使用 <a class="reference internal" href="index.html#pywebio.output.put_html" title="pywebio.output.put_html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_html()</span></code></a> 可以输出 pyecharts 库创建的图表:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># `chart` is pyecharts chart instance</span>
<span class="n">pywebio</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">put_html</span><span class="p">(</span><span class="n">chart</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">())</span>
</pre></div>
</div>
<p>相应demo见 <a class="reference external" href="http://pywebio-charts.pywebio.online/?app=pyecharts">pyecharts demo</a></p>
<img alt="https://cdn.jsdelivr.net/gh/wang0618/pywebio-chart-gallery&#64;master/assets/pyecharts.gif" src="https://cdn.jsdelivr.net/gh/wang0618/pywebio-chart-gallery&#64;master/assets/pyecharts.gif" />
</div>
<div class="section" id="plotly">
<h5>plotly<a class="headerlink" href="#plotly" title="永久链接至标题">¶</a></h5>
<p><a class="reference external" href="https://github.com/plotly/plotly.py">plotly.py</a> 是一个非常流行的Python数据可视化库，可以生成高质量的交互式图表。</p>
<p>PyWebIO 支持输出使用 plotly 库创建的图表。使用方式为在PyWebIO会话中调用:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># `fig` is plotly chart instance</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">include_plotlyjs</span><span class="o">=</span><span class="s2">&quot;require&quot;</span><span class="p">,</span> <span class="n">full_html</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">pywebio</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">put_html</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</pre></div>
</div>
<p>相应demo见 <a class="reference external" href="http://pywebio-charts.pywebio.online/?app=plotly">plotly demo</a></p>
<img alt="https://cdn.jsdelivr.net/gh/wang0618/pywebio-chart-gallery&#64;master/assets/plotly.png" src="https://cdn.jsdelivr.net/gh/wang0618/pywebio-chart-gallery&#64;master/assets/plotly.png" />
</div>
<div class="section" id="pyg2plot">
<h5>pyg2plot<a class="headerlink" href="#pyg2plot" title="永久链接至标题">¶</a></h5>
<p><a class="reference external" href="https://github.com/hustcc/PyG2Plot">pyg2plot</a>  是一个使用Python创建 <a class="reference external" href="https://github.com/antvis/G2Plot">G2Plot</a> 可视化图表的库。</p>
<p>PyWebIO 支持输出使用 pyg2plot 库创建的图表。使用方式为在PyWebIO会话中调用:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># `chart` 为 pyg2plot 图表实例</span>
<span class="n">pywebio</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">put_html</span><span class="p">(</span><span class="n">chart</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">())</span>
</pre></div>
</div>
<p>相应demo见 <a class="reference external" href="http://pywebio-charts.pywebio.online/?app=pyg2plot">plotly demo</a></p>
</div>
<div class="section" id="cutecharts-py">
<h5>cutecharts.py<a class="headerlink" href="#cutecharts-py" title="永久链接至标题">¶</a></h5>
<p><a class="reference external" href="https://github.com/cutecharts/cutecharts.py">cutecharts.py</a> 是一个可以创建具有卡通风格的可视化图表的python库。
底层使用了 <a class="reference external" href="https://github.com/timqian/chart.xkcd">chart.xkcd</a> Javascript库。</p>
<p>在 PyWebIO 中使用 <a class="reference internal" href="index.html#pywebio.output.put_html" title="pywebio.output.put_html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_html()</span></code></a> 可以输出 cutecharts.py 库创建的图表:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># `chart` is cutecharts chart instance</span>
<span class="n">pywebio</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">put_html</span><span class="p">(</span><span class="n">chart</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">())</span>
</pre></div>
</div>
<p>相应demo见 <a class="reference external" href="http://pywebio-charts.pywebio.online/?app=cutecharts">cutecharts demo</a></p>
<img alt="https://cdn.jsdelivr.net/gh/wang0618/pywebio-chart-gallery&#64;master/assets/cutecharts.png" src="https://cdn.jsdelivr.net/gh/wang0618/pywebio-chart-gallery&#64;master/assets/cutecharts.png" />
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-cookbook"></span><div class="section" id="cookbook">
<h3>Cookbook<a class="headerlink" href="#cookbook" title="永久链接至标题">¶</a></h3>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="index.html#document-battery"><span class="doc">PyWebIO Battery</span></a></p>
</div>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#interaction-related" id="id2">Interaction related</a></p>
<ul>
<li><p><a class="reference internal" href="#equivalent-to-press-any-key-to-continue" id="id3">Equivalent to “Press any key to continue”</a></p></li>
<li><p><a class="reference internal" href="#output-pandas-dataframe" id="id4">Output pandas dataframe</a></p></li>
<li><p><a class="reference internal" href="#output-matplotlib-figure" id="id5">Output Matplotlib figure</a></p></li>
<li><p><a class="reference internal" href="#add-new-syntax-highlight-for-code-output" id="id6">Add new syntax highlight for code output</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#web-application-related" id="id7">Web application related</a></p>
<ul>
<li><p><a class="reference internal" href="#add-google-adsense-analytics-code" id="id8">Add Google AdSense/Analytics code</a></p></li>
<li><p><a class="reference internal" href="#refresh-page-on-connection-lost" id="id9">Refresh page on connection lost</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="interaction-related">
<h4><a class="toc-backref" href="#id2">Interaction related</a><a class="headerlink" href="#interaction-related" title="永久链接至标题">¶</a></h4>
<div class="section" id="equivalent-to-press-any-key-to-continue">
<h5><a class="toc-backref" href="#id3">Equivalent to “Press any key to continue”</a><a class="headerlink" href="#equivalent-to-press-any-key-to-continue" title="永久链接至标题">¶</a></h5>
<div class="demo-cb highlight-default notranslate" id="demo-cookbook-press-anykey-continue"><div class="highlight"><pre><span></span><span class="n">actions</span><span class="p">(</span><span class="n">buttons</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Continue&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="output-pandas-dataframe">
<h5><a class="toc-backref" href="#id4">Output pandas dataframe</a><a class="headerlink" href="#output-pandas-dataframe" title="永久链接至标题">¶</a></h5>
<div class="demo-cb highlight-default notranslate" id="demo-cookbook-pandas-df"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;ABCD&quot;</span><span class="p">))</span>
<span class="n">put_html</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">border</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_html.html#pandas-dataframe-to-html">pandas.DataFrame.to_html — pandas documentation</a></p>
</div>
</div>
<div class="section" id="output-matplotlib-figure">
<h5><a class="toc-backref" href="#id5">Output Matplotlib figure</a><a class="headerlink" href="#output-matplotlib-figure" title="永久链接至标题">¶</a></h5>
<p>Simply do not call <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot.show</span></code>, directly save the figure to in-memory buffer and output the buffer
via <a class="reference internal" href="index.html#pywebio.output.put_image" title="pywebio.output.put_image"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.output.put_image()</span></code></a>:</p>
<div class="demo-cb highlight-default notranslate" id="demo-cookbook-matplotlib"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">pywebio</span>

<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;agg&#39;</span><span class="p">)</span>  <span class="c1"># required, use a non-interactive backend</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>  <span class="c1"># Create a figure containing a single axes.</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>  <span class="c1"># Plot some data on the axes.</span>

<span class="n">buf</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
<span class="n">pywebio</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">put_image</span><span class="p">(</span><span class="n">buf</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">matplotlib.use('agg')</span></code> is required so that the server does not try to create (and then destroy) GUI windows
that will never be seen.</p>
<p>When using Matplotlib in a web server (multiple threads environment), pyplot may cause some conflicts in some cases,
read the following articles for more information:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://medium.com/&#64;ranjitha.korrapati/multi-threading-in-python-and-pyplot-46f325e6a9d0">Multi Threading in Python and Pyplot | by Ranjitha Korrapati | Medium</a></p></li>
<li><p><a class="reference external" href="https://matplotlib.org/stable/gallery/user_interfaces/web_application_server_sgskip.html">Embedding in a web application server (Flask) — Matplotlib documentation</a></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="add-new-syntax-highlight-for-code-output">
<h5><a class="toc-backref" href="#id6">Add new syntax highlight for code output</a><a class="headerlink" href="#add-new-syntax-highlight-for-code-output" title="永久链接至标题">¶</a></h5>
<p>When output code via <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_markdown()</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_code()</span></code>, PyWebIO provides syntax highlight for some common languages.
If you find your code have no syntax highlight, you can add the syntax highlighter by two following steps:</p>
<ol class="arabic simple">
<li><p>Go to <a class="reference external" href="https://www.jsdelivr.com/package/npm/prismjs?version=1.23.0&amp;path=components">prismjs CDN page</a> to get your syntax highlighter link.</p></li>
<li><p>Use <a class="reference internal" href="index.html#pywebio.config" title="pywebio.config"><code class="xref py py-func docutils literal notranslate"><span class="pre">config(js_file=...)</span></code></a> to load the syntax highlight module</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@config</span><span class="p">(</span><span class="n">js_file</span><span class="o">=</span><span class="s2">&quot;https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-diff.min.js&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">put_code</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">+ AAA</span>
<span class="s2">- BBB</span>
<span class="s2">CCC</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;diff&#39;</span><span class="p">)</span>

    <span class="n">put_markdown</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    ```diff</span>
<span class="s2">    + AAA</span>
<span class="s2">    - BBB</span>
<span class="s2">    CCC</span>
<span class="s2">    ```</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span> <span class="n">lstrip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="web-application-related">
<h4><a class="toc-backref" href="#id7">Web application related</a><a class="headerlink" href="#web-application-related" title="永久链接至标题">¶</a></h4>
<div class="section" id="add-google-adsense-analytics-code">
<h5><a class="toc-backref" href="#id8">Add Google AdSense/Analytics code</a><a class="headerlink" href="#add-google-adsense-analytics-code" title="永久链接至标题">¶</a></h5>
<p>When you setup Google AdSense/Analytics, you will get a javascript file and a piece of code that needs to be inserted
into your application page, you can use <a class="reference internal" href="index.html#pywebio.config" title="pywebio.config"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.config()</span></code></a> to inject js file and code to your PyWebIO application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pywebio</span> <span class="kn">import</span> <span class="n">start_server</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">config</span>

<span class="n">js_file</span> <span class="o">=</span> <span class="s2">&quot;https://www.googletagmanager.com/gtag/js?id=G-xxxxxxx&quot;</span>
<span class="n">js_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">window.dataLayer = window.dataLayer || [];</span>
<span class="s2">function gtag(){dataLayer.push(arguments);}</span>
<span class="s2">gtag(&#39;js&#39;, new Date());</span>

<span class="s2">gtag(&#39;config&#39;, &#39;G-xxxxxxx&#39;);</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="nd">@config</span><span class="p">(</span><span class="n">js_file</span><span class="o">=</span><span class="n">js_file</span><span class="p">,</span> <span class="n">js_code</span><span class="o">=</span><span class="n">js_code</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">output</span><span class="o">.</span><span class="n">put_text</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">)</span>

<span class="n">start_server</span><span class="p">(</span><span class="n">main</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="refresh-page-on-connection-lost">
<h5><a class="toc-backref" href="#id9">Refresh page on connection lost</a><a class="headerlink" href="#refresh-page-on-connection-lost" title="永久链接至标题">¶</a></h5>
<p>Add the following code to the beginning of your PyWebIO application main function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">session</span><span class="o">.</span><span class="n">run_js</span><span class="p">(</span><span class="s1">&#39;WebIO._state.CurrentSession.on_session_close(()=&gt;{setTimeout(()=&gt;location.reload(), 4000})&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-releases"></span><div class="section" id="release-notes">
<h3>Release notes<a class="headerlink" href="#release-notes" title="永久链接至标题">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-releases/v1.6"></span><div class="section" id="what-s-new-in-pywebio-1-6">
<h4>What’s new in PyWebIO 1.6<a class="headerlink" href="#what-s-new-in-pywebio-1-6" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2022/3/23<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>add <a class="reference internal" href="index.html#pywebio.pin.pin_on_change" title="pywebio.pin.pin_on_change"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.pin.pin_on_change()</span></code></a></p></li>
</ul>
</div>
<div class="section" id="detailed-changes">
<h6>Detailed changes<a class="headerlink" href="#detailed-changes" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>use <a class="reference external" href="https://github.com/snapappointments/bootstrap-select/">bootstrap-select</a> to provide more user-friendly select input</p></li>
<li><p>add <code class="xref py py-obj docutils literal notranslate"><span class="pre">pin.pin.use_strict()</span></code> to enable strict mode for getting pin widget value</p></li>
<li><p>Persian language support for default labels, thanks to <a class="reference external" href="https://github.com/pikhosh">Pikhosh</a></p></li>
<li><p>add color input type (<a class="reference external" href="https://github.com/pywebio/PyWebIO/discussions/310">#310</a>)</p></li>
<li><p>add input check on number and float type input</p></li>
</ul>
</div>
<div class="section" id="bug-fix">
<h6>Bug fix<a class="headerlink" href="#bug-fix" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>fix: uncaught <code class="xref py py-obj docutils literal notranslate"><span class="pre">SessionClosedException</span></code> in callback of thread-based session</p></li>
<li><p>fix(<a class="reference external" href="https://github.com/pywebio/PyWebIO/discussions/313">#313</a>): slider value label don’t sync when set value</p></li>
</ul>
</div>
</div>
</div>
<span id="document-releases/v1.5"></span><div class="section" id="what-s-new-in-pywebio-1-5">
<h4>What’s new in PyWebIO 1.5<a class="headerlink" href="#what-s-new-in-pywebio-1-5" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2021/11/20<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>theme support via <a class="reference internal" href="index.html#pywebio.config" title="pywebio.config"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.config()</span></code></a>, <a class="reference external" href="http://pywebio-demos.pywebio.online/theme">demo</a></p></li>
<li><p>deprecate <a class="reference internal" href="index.html#pywebio.output.output" title="pywebio.output.output"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.output.output()</span></code></a>, use <a class="reference internal" href="index.html#pywebio.output.use_scope" title="pywebio.output.use_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.use_scope()</span></code></a> instead (<code class="docutils literal notranslate"><span class="pre">output()</span></code> still work)</p></li>
</ul>
</div>
<div class="section" id="detailed-changes">
<h6>Detailed changes<a class="headerlink" href="#detailed-changes" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>enable <code class="xref py py-obj docutils literal notranslate"><span class="pre">lstrip</span></code> by default in <a class="reference internal" href="index.html#pywebio.output.put_markdown" title="pywebio.output.put_markdown"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_markdown()</span></code></a>,
and the behavior of <code class="xref py py-obj docutils literal notranslate"><span class="pre">lstrip</span></code> is more clever than previous version. Deprecate <code class="xref py py-obj docutils literal notranslate"><span class="pre">strip_indent</span></code> since <code class="xref py py-obj docutils literal notranslate"><span class="pre">lstrip</span></code> is sufficient.</p></li>
<li><p>button disabled state support in <a class="reference internal" href="index.html#pywebio.output.put_buttons" title="pywebio.output.put_buttons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.put_buttons()</span></code></a> and <a class="reference internal" href="index.html#pywebio.output.put_button" title="pywebio.output.put_button"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.put_button()</span></code></a>,
and button value can be any type</p></li>
<li><p>buttons in <a class="reference internal" href="index.html#pywebio.input.actions" title="pywebio.input.actions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.actions()</span></code></a> support color setting</p></li>
<li><p>russian language support for frontend labels and messages. Thanks to <a class="reference external" href="https://github.com/pywebio/PyWebIO/pull/173">&#64;Priler</a>.</p></li>
<li><p>improve default index page of <a class="reference internal" href="index.html#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform.path_deploy()</span></code></a>: improve pywebio app detection and show app title.</p></li>
<li><p>compatible with latest aiohttp(v3.8)</p></li>
<li><p>enable <code class="xref py py-obj docutils literal notranslate"><span class="pre">websocket_ping_interval</span></code> by default in tornado server to avoid idle connections being close in some
cloud platform (like heroku)</p></li>
<li><p>exception traceback will be show in page when enable debug</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.input.slider" title="pywebio.input.slider"><code class="xref py py-obj docutils literal notranslate"><span class="pre">slider</span></code></a> input add indicator to show its current value</p></li>
</ul>
</div>
<div class="section" id="bug-fix">
<h6>Bug fix<a class="headerlink" href="#bug-fix" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>deep copy <code class="xref py py-obj docutils literal notranslate"><span class="pre">options</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">buttons</span></code> parameters to avoid potential error - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/81d57ba46bec2ed2657f944f9cb594da9709d146">81d57ba4</a>, <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/cb5ac8d512386fc442abf6646621c3ef1e3ab26a">cb5ac8d5</a> - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/e262ea43dc8a4fe3addd6c84f2fdd4f290a53f20">e262ea43</a></p></li>
<li><p>fix page width exceeding screen width (mostly on mobile devices) - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/536d09e3c432a750b24b9633f076ebf9a1875f79">536d09e3</a></p></li>
<li><p>fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_buttons()</span></code> issue when buttons have same value - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/cb5ac8d512386fc442abf6646621c3ef1e3ab26a">cb5ac8d5</a></p></li>
<li><p>fix layout issue when use <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_markdown()</span></code> - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/364059ae8ac02e6d77dc031eaa1139863b09a6e3">364059ae</a></p></li>
<li><p>fix style issue in <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_tabs()</span></code> widget - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/f056f1aca3a10d8fe18bd49b21d52e073d08dcdc">f056f1ac</a></p></li>
<li><p>fix sibling import issue in <code class="xref py py-obj docutils literal notranslate"><span class="pre">path_deploy()</span></code> - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/35209a7e79b9ef8d0fdc2b5833576b313830bc93">35209a7e</a></p></li>
<li><p>fix “Address already in use” error when enable remote access in some cases - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/8dd9877d81eba43eadce9c136125ffb08d8fe98a">8dd9877d</a></p></li>
</ul>
</div>
</div>
<div class="section" id="v1-5-1-2021-12-21">
<h5>v1.5.1 (2021/12/21)<a class="headerlink" href="#v1-5-1-2021-12-21" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li><p>fix setitem error of <code class="xref py py-obj docutils literal notranslate"><span class="pre">pin.pin</span></code> object - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/3f5cf1e5aff1e4d17647672df568aa66007e1b7d">3f5cf1e5</a></p></li>
<li><p>fix thread-based session tot closed properly - <a class="reference external" href="https://github.com/pywebio/PyWebIO/compare/22fbbf866fb1bfc7e46bf24b59b343dd92b51936..3bc7d36bf6eed205356c401624ab3ff508c7e935">22fbbf86..3bc7d36b&gt;</a></p></li>
<li><p>fix OverflowError on 32-bit Windows - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/4ac7f0e52c17ba0ef9c2041d6b46ce37f736daac">4ac7f0e5</a></p></li>
<li><p>fix a sample error from cookbook - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/99593db468726deab415a31c125d71a2dda589c0">99593db4</a></p></li>
<li><p>fix spawn 2 remote access processes when enable debug in flask backed - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/073f8ace680b8cd6b9d891fc6c056555be9ba9ae">073f8ace</a></p></li>
</ul>
</div>
<div class="section" id="v1-5-2-2021-12-30">
<h5>v1.5.2 (2021/12/30)<a class="headerlink" href="#v1-5-2-2021-12-30" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li><p>fix <a class="reference external" href="https://github.com/pywebio/PyWebIO/issues/243">#243</a>: thread keep alive after session closed</p></li>
<li><p>fix <a class="reference external" href="https://github.com/pywebio/PyWebIO/issues/247">#247</a>: can’t use coroutine callback in <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_button()</span></code></p></li>
</ul>
</div>
</div>
<span id="document-releases/v1.4"></span><div class="section" id="what-s-new-in-pywebio-1-4">
<h4>What’s new in PyWebIO 1.4<a class="headerlink" href="#what-s-new-in-pywebio-1-4" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2021/10/4<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>automatically hold session when needed</p></li>
<li><p>support for binding onclick callback on any output widget</p></li>
</ul>
</div>
<div class="section" id="detailed-changes">
<h6>Detailed changes<a class="headerlink" href="#detailed-changes" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>migrate to a <a class="reference external" href="https://github.com/wang0618/localshare">open-source</a> remote access service</p></li>
<li><p>add <code class="docutils literal notranslate"><span class="pre">output_max_width</span></code> parameter to <a class="reference internal" href="index.html#pywebio.session.set_env" title="pywebio.session.set_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_env()</span></code></a></p></li>
<li><p>can use <code class="docutils literal notranslate"><span class="pre">Esc</span></code>/<code class="docutils literal notranslate"><span class="pre">F11</span></code> to toggle fullscreen of codemirror textarea</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.pin.pin_wait_change" title="pywebio.pin.pin_wait_change"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pin_wait_change()</span></code></a> support <code class="xref py py-obj docutils literal notranslate"><span class="pre">timeout</span></code> parameter</p></li>
<li><p>add <a class="reference internal" href="index.html#pywebio.config" title="pywebio.config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.config()</span></code></a></p></li>
<li><p>add <a class="reference internal" href="index.html#pywebio.output.put_button" title="pywebio.output.put_button"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.put_button()</span></code></a></p></li>
<li><p>add <a class="reference internal" href="index.html#pywebio.pin.put_actions" title="pywebio.pin.put_actions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.pin.put_actions()</span></code></a></p></li>
<li><p>rearrange document</p></li>
</ul>
</div>
<div class="section" id="bug-fix">
<h6>Bug fix<a class="headerlink" href="#bug-fix" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>fix(#148): form can’t be submit after validation failed - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/e262ea43dc8a4fe3addd6c84f2fdd4f290a53f20">e262ea43</a></p></li>
<li><p>fix some codemirror issues: codemirror refresh and mode auto load - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/b7957891832a20fe47dd3b907e061a4d2b35de73">b7957891</a>, <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/50cc41a9d35f566ffe4c995165c841c1ae4971c4">50cc41a9</a></p></li>
<li><p>fix: <code class="xref py py-obj docutils literal notranslate"><span class="pre">run_js()</span></code> return <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> when empty-value - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/89ce352d069eec28f3ccc4e7657892a43374c3fc">89ce352d</a></p></li>
<li><p>fix: whole output crash when a sub output fail - <a class="reference external" href="https://github.com/pywebio/PyWebIO/commit/31b26d0985d700633946c750a01d25c96c634eaa">31b26d09</a></p></li>
</ul>
</div>
</div>
</div>
<span id="document-releases/v1.3.0"></span><div class="section" id="what-s-new-in-pywebio-1-3">
<h4>What’s new in PyWebIO 1.3<a class="headerlink" href="#what-s-new-in-pywebio-1-3" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2021/6/12<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>New module <a class="reference internal" href="index.html#document-pin"><span class="doc">pin</span></a> to provide persistent input support.</p></li>
<li><p>Add a remote access service to <code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code>. See <a class="reference internal" href="index.html#server-mode"><span class="std std-ref">server mode - User Guide</span></a> for detail.</p></li>
<li><p>Add <a class="reference internal" href="index.html#pywebio.input.input_update" title="pywebio.input.input_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_update()</span></code></a>, add <code class="docutils literal notranslate"><span class="pre">onchange</span></code> callback in input functions.</p></li>
<li><p>Add support for FastAPI and Starlette.</p></li>
</ul>
</div>
<div class="section" id="detailed-changes">
<h6>Detailed changes<a class="headerlink" href="#detailed-changes" title="永久链接至标题">¶</a></h6>
<ul>
<li><p><a class="reference internal" href="index.html#document-input"><span class="doc">input</span></a> module</p>
<blockquote>
<div><ul class="simple">
<li><p>Add <a class="reference internal" href="index.html#pywebio.input.input_update" title="pywebio.input.input_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_update()</span></code></a>, add <code class="docutils literal notranslate"><span class="pre">onchange</span></code> callback in input functions.</p></li>
<li><p>Add <a class="reference internal" href="index.html#pywebio.input.slider" title="pywebio.input.slider"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input.slider()</span></code></a> to get range input.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="index.html#document-output"><span class="doc">output</span></a> module</p>
<blockquote>
<div><ul class="simple">
<li><p>Mark <a class="reference internal" href="index.html#pywebio.output.style" title="pywebio.output.style"><code class="xref py py-obj docutils literal notranslate"><span class="pre">style()</span></code></a> as deprecated, see <a class="reference internal" href="index.html#style"><span class="std std-ref">style - User Guide</span></a> for new method.</p></li>
<li><p>Add <a class="reference internal" href="index.html#pywebio.output.put_tabs" title="pywebio.output.put_tabs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.put_tabs()</span></code></a> to output tabs.</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_html" title="pywebio.output.put_html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_html()</span></code></a> adds compatibility with ipython rich output.</p></li>
<li><p>Add <code class="xref py py-obj docutils literal notranslate"><span class="pre">group</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">outline</span></code> parameters in <a class="reference internal" href="index.html#pywebio.output.put_buttons" title="pywebio.output.put_buttons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_buttons()</span></code></a>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="index.html#document-session"><span class="doc">session</span></a> module</p>
<blockquote>
<div><ul class="simple">
<li><p>Add promise support in <a class="reference internal" href="index.html#pywebio.session.eval_js" title="pywebio.session.eval_js"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eval_js()</span></code></a>.</p></li>
<li><p>Support config input panel via <a class="reference internal" href="index.html#pywebio.session.set_env" title="pywebio.session.set_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_env()</span></code></a>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="index.html#document-platform"><span class="doc">platform</span></a> module</p>
<blockquote>
<div><ul class="simple">
<li><p>Add support for FastAPI and Starlette.</p></li>
<li><p>Add <code class="xref py py-obj docutils literal notranslate"><span class="pre">wsgi_app()</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">asgi_app()</span></code> for Flask/Dgango/FastAPI backend.</p></li>
<li><p>Add remote access service to <code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code></p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">max_file_upload</span></code>/<code class="docutils literal notranslate"><span class="pre">payload_size_limit</span></code>/<code class="docutils literal notranslate"><span class="pre">upload_size_limit</span></code>/<code class="docutils literal notranslate"><span class="pre">max_payload_size</span></code> parameters to <code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>So many other improvements.</p></li>
</ul>
</div>
<div class="section" id="bug-fix">
<h6>Bug fix<a class="headerlink" href="#bug-fix" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>Fix table style.</p></li>
<li><p>Fix large file uploading error.</p></li>
<li><p>Fix server start error when enabled <code class="docutils literal notranslate"><span class="pre">auto_open_webbrowser</span></code>.</p></li>
<li><p>Fix file names overflow in file input.</p></li>
<li><p>Fix <a class="reference internal" href="index.html#pywebio.output.put_image" title="pywebio.output.put_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_image()</span></code></a> raise ‘unknown file extension’ error when use PIL Image as <code class="docutils literal notranslate"><span class="pre">src</span></code>.</p></li>
<li><p>Sanitize the returned <code class="docutils literal notranslate"><span class="pre">filename</span></code> of <a class="reference internal" href="index.html#pywebio.input.file_upload" title="pywebio.input.file_upload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_upload()</span></code></a> to avoid interpreting as path accidentally.</p></li>
<li><p>So many other bugs fixed.</p></li>
</ul>
</div>
</div>
</div>
<span id="document-releases/v1.2.0"></span><div class="section" id="what-s-new-in-pywebio-1-2">
<h4>What’s new in PyWebIO 1.2<a class="headerlink" href="#what-s-new-in-pywebio-1-2" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2021 3/18<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>Websocket连接可以通过在 <a class="reference internal" href="index.html#pywebio.platform.tornado.start_server" title="pywebio.platform.tornado.start_server"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code></a> 中设定 <code class="docutils literal notranslate"><span class="pre">reconnect_timeout</span></code> 参数来支持连接重连。</p></li>
<li><p>添加 <a class="reference internal" href="index.html#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_deploy()</span></code></a>, <a class="reference internal" href="index.html#pywebio.platform.path_deploy" title="pywebio.platform.path_deploy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_deploy_http()</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">pywebio-path-deploy</span></code> 命令来实现从目录中加载运行PyWebIO应用。</p></li>
<li><p>所有的文档和示例都提供了英文版本。</p></li>
<li><p>为一些输出相关的函数提供上下文管理器的支持，参见 <a class="reference internal" href="index.html#output-func-list"><span class="std std-ref">output functions list</span></a> 。</p></li>
</ul>
</div>
<div class="section" id="detailed-changes">
<h6>Detailed changes<a class="headerlink" href="#detailed-changes" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>添加 <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_info()</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_error()</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_warning()</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">put_success()</span></code> 来显示提示消息。</p></li>
<li><p>添加 <code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.utils.pyinstaller_datas()</span></code> 来获得使用pyinstaller打包PyWebIO应用所需要的数据文件。</p></li>
<li><p>添加使用pyg2plot进行数据可视化的文档。</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.output" title="pywebio.output.output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">output()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">reset()</span></code>, <code class="docutils literal notranslate"><span class="pre">append()</span></code>, <code class="docutils literal notranslate"><span class="pre">insert()</span></code> 方法接受任意类型作为输出内容。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_server()</span></code> 中添加 <code class="docutils literal notranslate"><span class="pre">static_dir</span></code> 参数来托管静态文件。</p></li>
<li><p>废弃 <a class="reference internal" href="index.html#pywebio.session.get_info" title="pywebio.session.get_info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session.get_info()</span></code></a> ，使用 <a class="reference internal" href="index.html#pywebio.session.info" title="pywebio.session.info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session.info</span></code></a> 替代</p></li>
<li><p>当用户使用IE浏览器时提示浏览器不被支持。</p></li>
</ul>
</div>
</div>
</div>
<span id="document-releases/v1.1.0"></span><div class="section" id="what-s-new-in-pywebio-1-1">
<h4>What’s new in PyWebIO 1.1<a class="headerlink" href="#what-s-new-in-pywebio-1-1" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2021 2/7<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<p>距离写下PyWebIO的第一行代码过去已经整整一年了🎂 ，2020年发生了太多的事情，但对我来说又多了一份特殊的意义。新的一年继续努力💪 ，将PyWebIO做得越来越好。</p>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>添加安全性支持: <a class="reference internal" href="index.html#pywebio.output.put_html" title="pywebio.output.put_html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_html()</span></code></a>, <a class="reference internal" href="index.html#pywebio.output.put_markdown" title="pywebio.output.put_markdown"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_markdown()</span></code></a> 中支持使用 <code class="docutils literal notranslate"><span class="pre">sanitize</span></code> 参数开启防 XSS 攻击</p></li>
<li><p>UI国际化支持</p></li>
<li><p>添加SEO支持: 通过任务函数的注释或 <a class="reference internal" href="index.html#pywebio.platform.seo" title="pywebio.platform.seo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform.seo()</span></code></a> 来设置SEO信息</p></li>
<li><p>CDN支持，Web框架整合更加方便，仅需引入一条路由即可</p></li>
<li><p>应用访问速度提升，不再使用探测请求的方式确定通信协议</p></li>
</ul>
</div>
<div class="section" id="backwards-incompatible-changes">
<h6>Backwards-incompatible changes<a class="headerlink" href="#backwards-incompatible-changes" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>移除使用 django 和 flask 框架 <code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server()</span></code> 中的 <code class="xref py py-obj docutils literal notranslate"><span class="pre">disable_asyncio</span></code> 参数</p></li>
<li><p>废弃 <a class="reference internal" href="index.html#pywebio.session.data" title="pywebio.session.data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session.data()</span></code></a> ，使用 <a class="reference internal" href="index.html#pywebio.session.local" title="pywebio.session.local"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session.local</span></code></a> 作为会话本地状态存储对象</p></li>
<li><p>整合到Web框架的应用，访问地址发生变化，参见 <a class="reference internal" href="index.html#integration-web-framework"><span class="std std-ref">Web框架整合文档</span></a></p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_scrollable" title="pywebio.output.put_scrollable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_scrollable()</span></code></a> 废弃 <code class="xref py py-obj docutils literal notranslate"><span class="pre">max_height</span></code> 参数，使用 <code class="xref py py-obj docutils literal notranslate"><span class="pre">height</span></code> 替代</p></li>
</ul>
</div>
<div class="section" id="detailed-changes">
<h6>Detailed changes<a class="headerlink" href="#detailed-changes" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#pywebio.output.put_code" title="pywebio.output.put_code"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_code()</span></code></a> 支持使用 <code class="xref py py-obj docutils literal notranslate"><span class="pre">rows</span></code> 参数限制最大显示行数</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_scrollable" title="pywebio.output.put_scrollable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_scrollable()</span></code></a> 支持使用 <code class="xref py py-obj docutils literal notranslate"><span class="pre">keep_bottom</span></code> 参数设定自动滚动到底部</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_markdown" title="pywebio.output.put_markdown"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_markdown()</span></code></a> 支持配置Markdown解析参数</p></li>
<li><p>为 <a class="reference internal" href="index.html#pywebio.output.put_code" title="pywebio.output.put_code"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_code()</span></code></a>, <a class="reference internal" href="index.html#pywebio.output.put_image" title="pywebio.output.put_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_image()</span></code></a>, <a class="reference internal" href="index.html#pywebio.output.put_link" title="pywebio.output.put_link"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_link()</span></code></a>, <a class="reference internal" href="index.html#pywebio.output.put_row" title="pywebio.output.put_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_row()</span></code></a>, <a class="reference internal" href="index.html#pywebio.output.put_grid" title="pywebio.output.put_grid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_grid()</span></code></a> 中的参数添加转义</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.output" title="pywebio.output.output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">output()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">reset()</span></code>, <code class="docutils literal notranslate"><span class="pre">append()</span></code>, <code class="docutils literal notranslate"><span class="pre">insert()</span></code> 方法接受字符串作为输出内容</p></li>
<li><p>修复: <a class="reference internal" href="index.html#pywebio.input.file_upload" title="pywebio.input.file_upload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_upload()</span></code></a> 的 <code class="xref py py-obj docutils literal notranslate"><span class="pre">max_size</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">max_total_size</span></code> 参数解析错误</p></li>
<li><p>修复: py3.6自动打开浏览器失败</p></li>
</ul>
</div>
</div>
</div>
<span id="document-releases/v1.0.0"></span><div class="section" id="what-s-new-in-pywebio-1-0">
<h4>What’s new in PyWebIO 1.0<a class="headerlink" href="#what-s-new-in-pywebio-1-0" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2021 1/17<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<p>经过快一年的开发，PyWebIO 1.0 终于完成了。与上一版本 v0.3 相比有非常多的变化：</p>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">start_server</span></code> 对多任务函数的支持，PyWebIO应用可以包含多个任务函数，并提供了 <a class="reference internal" href="index.html#pywebio.session.go_app" title="pywebio.session.go_app"><code class="xref py py-obj docutils literal notranslate"><span class="pre">go_app()</span></code></a> 用于任务函数之间的跳转</p></li>
<li><p>不再使用基于锚点的输出控制模型，改用基于Scope的模型</p></li>
<li><p>添加布局支持（ <a class="reference internal" href="index.html#pywebio.output.put_grid" title="pywebio.output.put_grid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_grid()</span></code></a> , <a class="reference internal" href="index.html#pywebio.output.put_row" title="pywebio.output.put_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_row()</span></code></a> , <a class="reference internal" href="index.html#pywebio.output.put_column" title="pywebio.output.put_column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_column()</span></code></a> ）和自定义样式支持（ <a class="reference internal" href="index.html#pywebio.output.style" title="pywebio.output.style"><code class="xref py py-obj docutils literal notranslate"><span class="pre">style()</span></code></a> ）</p></li>
<li><p>添加新的输出函数: <a class="reference internal" href="index.html#pywebio.output.toast" title="pywebio.output.toast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">toast()</span></code></a> , <a class="reference internal" href="index.html#pywebio.output.popup" title="pywebio.output.popup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popup()</span></code></a> , <a class="reference internal" href="index.html#pywebio.output.put_widget" title="pywebio.output.put_widget"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_widget()</span></code></a> ,
<a class="reference internal" href="index.html#pywebio.output.put_collapse" title="pywebio.output.put_collapse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_collapse()</span></code></a> , <a class="reference internal" href="index.html#pywebio.output.put_link" title="pywebio.output.put_link"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_link()</span></code></a> , <a class="reference internal" href="index.html#pywebio.output.put_scrollable" title="pywebio.output.put_scrollable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_scrollable()</span></code></a> ,
<a class="reference internal" href="index.html#pywebio.output.put_loading" title="pywebio.output.put_loading"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_loading()</span></code></a> , <a class="reference internal" href="index.html#pywebio.output.put_processbar" title="pywebio.output.put_processbar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_processbar()</span></code></a></p></li>
<li><p>添加 <a class="reference internal" href="index.html#pywebio.output.span" title="pywebio.output.span"><code class="xref py py-obj docutils literal notranslate"><span class="pre">span()</span></code></a> , <a class="reference internal" href="index.html#pywebio.output.output" title="pywebio.output.output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">output()</span></code></a> 输出控制函数</p></li>
<li><p>添加JS执行函数: <a class="reference internal" href="index.html#pywebio.session.run_js" title="pywebio.session.run_js"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_js()</span></code></a> , <a class="reference internal" href="index.html#pywebio.session.eval_js" title="pywebio.session.eval_js"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eval_js()</span></code></a></p></li>
<li><p>更新UI: 显示输入时，使用浮动式输入框；发生未捕获异常时，前端使用console日志记录异常</p></li>
</ul>
</div>
<div class="section" id="backwards-incompatible-changes">
<h6>Backwards-incompatible changes<a class="headerlink" href="#backwards-incompatible-changes" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>不再使用基于锚点的输出控制模型</p></li>
<li><p>不支持固定高度的输出区，移除 <code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.set_output_fixed_height()</span></code></p></li>
<li><p>移除 <code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.set_title()</span></code> , <code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.set_auto_scroll_bottom()</span></code>，改用 <a class="reference internal" href="index.html#pywebio.session.set_env" title="pywebio.session.set_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session.set_env()</span></code></a> 进行控制</p></li>
<li><p>移除 <code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.table_cell_buttons()</span></code> ，使用 <a class="reference internal" href="index.html#pywebio.output.put_buttons" title="pywebio.output.put_buttons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output.put_buttons()</span></code></a> 替代</p></li>
</ul>
</div>
<div class="section" id="detailed-changes-by-module">
<h6>Detailed changes by module<a class="headerlink" href="#detailed-changes-by-module" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#pywebio.input.input" title="pywebio.input.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input()</span></code></a> 支持 <code class="docutils literal notranslate"><span class="pre">action</span></code> 参数动态设置输入项的值</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.input.file_upload" title="pywebio.input.file_upload"><code class="xref py py-obj docutils literal notranslate"><span class="pre">file_upload()</span></code></a> 支持多文件上传，支持限制上传文件大小，添加上传进度显示</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_buttons" title="pywebio.output.put_buttons"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_buttons()</span></code></a> 支持指定按钮颜色</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_widget" title="pywebio.output.put_widget"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_widget()</span></code></a> 、 <a class="reference internal" href="index.html#pywebio.output.popup" title="pywebio.output.popup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popup()</span></code></a> 、 <a class="reference internal" href="index.html#pywebio.output.put_table" title="pywebio.output.put_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_table()</span></code></a> 将字符串内容不再视作Html，而是作为纯文本</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_text" title="pywebio.output.put_text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_text()</span></code></a> 支持输出多个对象</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_image" title="pywebio.output.put_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_image()</span></code></a> 支持使用Url指定图片</p></li>
</ul>
</div>
</div>
</div>
<span id="document-releases/v0.3.0"></span><div class="section" id="what-s-new-in-pywebio-0-3">
<h4>What’s new in PyWebIO 0.3<a class="headerlink" href="#what-s-new-in-pywebio-0-3" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2020 5/13<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>支持输出 bokeh 数据可视化图表， <a class="reference internal" href="index.html#visualization"><span class="std std-ref">文档</span></a></p></li>
<li><p>添加 <a class="reference internal" href="index.html#pywebio.session.get_info" title="pywebio.session.get_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">session.get_info()</span></code></a> 获取会话相关信息</p></li>
<li><p>前端js代码迁移typescript</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.put_table" title="pywebio.output.put_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">output.put_table()</span></code></a> 支持跨行/列单元格， 单元格内容支持使用 <code class="docutils literal notranslate"><span class="pre">put_xxx</span></code> 类输出函数</p></li>
</ul>
</div>
<div class="section" id="detailed-changes-by-module">
<h6>Detailed changes by module<a class="headerlink" href="#detailed-changes-by-module" title="永久链接至标题">¶</a></h6>
<div class="section" id="ui">
<h7>UI<a class="headerlink" href="#ui" title="永久链接至标题">¶</a></h7>
<ul class="simple">
<li><p>当与服务器连接断开时，点击前端的交互式按钮会报错提示。</p></li>
</ul>
</div>
<div class="section" id="pywebio-output">
<h7><a class="reference internal" href="index.html#module-pywebio.output" title="pywebio.output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output</span></code></a><a class="headerlink" href="#pywebio-output" title="永久链接至标题">¶</a></h7>
<ul class="simple">
<li><p>锚点名字支持使用空格</p></li>
<li><p>弃用 <code class="xref py py-obj docutils literal notranslate"><span class="pre">table_cell_buttons()</span></code></p></li>
</ul>
</div>
</div>
</div>
</div>
<span id="document-releases/v0.2.0"></span><div class="section" id="what-s-new-in-pywebio-0-2">
<h4>What’s new in PyWebIO 0.2<a class="headerlink" href="#what-s-new-in-pywebio-0-2" title="永久链接至标题">¶</a></h4>
<div class="section" id="id1">
<h5>2020 4/30<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h5>
<div class="section" id="highlights">
<h6>Highlights<a class="headerlink" href="#highlights" title="永久链接至标题">¶</a></h6>
<ul class="simple">
<li><p>支持与Django、aiohttp Web框架整合</p></li>
<li><p>支持使用 plotly、pyecharts 等第三方库进行数据可视化</p></li>
<li><p>与Web框架整合时支持同时使用基于线程和协程的会话实现</p></li>
<li><p>添加 <a class="reference internal" href="index.html#pywebio.session.defer_call" title="pywebio.session.defer_call"><code class="xref py py-obj docutils literal notranslate"><span class="pre">defer_call()</span></code></a> 、 <a class="reference internal" href="index.html#pywebio.session.hold" title="pywebio.session.hold"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hold()</span></code></a> 会话控制函数</p></li>
<li><p>添加 <a class="reference internal" href="index.html#pywebio.output.put_image" title="pywebio.output.put_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_image()</span></code></a> 输出图像、 <a class="reference internal" href="index.html#pywebio.output.remove" title="pywebio.output.remove"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove(anchor)</span></code></a> 移除内容</p></li>
<li><p>加入动画提升UI体验</p></li>
<li><p>添加测试用例，构建CI工作流</p></li>
</ul>
</div>
<div class="section" id="detailed-changes-by-module">
<h6>Detailed changes by module<a class="headerlink" href="#detailed-changes-by-module" title="永久链接至标题">¶</a></h6>
<div class="section" id="ui">
<h7>UI<a class="headerlink" href="#ui" title="永久链接至标题">¶</a></h7>
<ul class="simple">
<li><p>添加元素显示动画</p></li>
<li><p>页面底部添加footer</p></li>
</ul>
</div>
<div class="section" id="pywebio-input">
<h7><a class="reference internal" href="index.html#module-pywebio.input" title="pywebio.input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.input</span></code></a><a class="headerlink" href="#pywebio-input" title="永久链接至标题">¶</a></h7>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#pywebio.input.input_group" title="pywebio.input.input_group"><code class="xref py py-obj docutils literal notranslate"><span class="pre">input_group()</span></code></a> 添加 <code class="docutils literal notranslate"><span class="pre">cancelable</span></code> 参数来允许用户取消输入</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.input.actions" title="pywebio.input.actions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">actions()</span></code></a> 函数 <code class="docutils literal notranslate"><span class="pre">button</span></code> 参数支持 <code class="docutils literal notranslate"><span class="pre">reset</span></code> 和 <code class="docutils literal notranslate"><span class="pre">cancel</span></code> 按钮类型</p></li>
</ul>
</div>
<div class="section" id="pywebio-output">
<h7><a class="reference internal" href="index.html#module-pywebio.output" title="pywebio.output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.output</span></code></a><a class="headerlink" href="#pywebio-output" title="永久链接至标题">¶</a></h7>
<ul class="simple">
<li><p>输出函数使用 <code class="docutils literal notranslate"><span class="pre">anchor</span></code> 参数指定输出锚点时，若锚点已经存在，则将锚点处的内容替换为当前内容。</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear_range()</span></code> 添加添加锚点存在检查</p></li>
<li><p><a class="reference internal" href="index.html#pywebio.output.scroll_to" title="pywebio.output.scroll_to"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scroll_to(anchor,</span> <span class="pre">position)</span></code></a> 添加 <code class="docutils literal notranslate"><span class="pre">position</span></code> 参数精细化控制滚动位置</p></li>
</ul>
</div>
<div class="section" id="pywebio-platform">
<h7><a class="reference internal" href="index.html#module-pywebio.platform" title="pywebio.platform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.platform</span></code></a><a class="headerlink" href="#pywebio-platform" title="永久链接至标题">¶</a></h7>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_server</span></code> 和 <code class="xref py py-obj docutils literal notranslate"><span class="pre">webio_view</span></code> 、 <code class="xref py py-obj docutils literal notranslate"><span class="pre">webio_handle</span></code> 添加跨域支持</p></li>
</ul>
</div>
<div class="section" id="pywebio-session">
<h7><a class="reference internal" href="index.html#module-pywebio.session" title="pywebio.session"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pywebio.session</span></code></a><a class="headerlink" href="#pywebio-session" title="永久链接至标题">¶</a></h7>
<ul class="simple">
<li><p>Session 关闭时，清理更彻底：任何还在进行的PyWebIO调用都会抛出 <code class="docutils literal notranslate"><span class="pre">SessionClosedException</span></code> 异常</p></li>
<li><p>fix: Session 对象构造函数无法识别 <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> 处理的任务函数</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-battery"></span><span class="target" id="module-pywebio_battery"></span><div class="section" id="pywebio-battery-pywebio-battery">
<h3><code class="docutils literal notranslate"><span class="pre">pywebio_battery</span></code> — PyWebIO battery<a class="headerlink" href="#pywebio-battery-pywebio-battery" title="永久链接至标题">¶</a></h3>
<p><em>Utilities that help write PyWebIO apps quickly and easily.</em></p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p><code class="docutils literal notranslate"><span class="pre">pywebio_battery</span></code> is an extension package of PyWebIO, you must install it before using it.
To install this package, run <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">-U</span> <span class="pre">pywebio-battery</span></code></p>
</div>
<div class="section" id="functions-list">
<h4>Functions list<a class="headerlink" href="#functions-list" title="永久链接至标题">¶</a></h4>
<div class="section" id="interaction-related">
<h5>Interaction related<a class="headerlink" href="#interaction-related" title="永久链接至标题">¶</a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Function name</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio_battery.confirm" title="pywebio_battery.confirm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">confirm</span></code></a></p></td>
<td><p>Confirmation modal</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio_battery.popup_input" title="pywebio_battery.popup_input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">popup_input</span></code></a></p></td>
<td><p>Show a form in popup window</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio_battery.redirect_stdout" title="pywebio_battery.redirect_stdout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redirect_stdout</span></code></a></p></td>
<td><p>redirecting stdout to pywebio</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio_battery.run_shell" title="pywebio_battery.run_shell"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_shell</span></code></a></p></td>
<td><p>Run command in shell</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio_battery.put_logbox" title="pywebio_battery.put_logbox"><code class="xref py py-obj docutils literal notranslate"><span class="pre">put_logbox</span></code></a>, <a class="reference internal" href="#pywebio_battery.logbox_append" title="pywebio_battery.logbox_append"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logbox_append</span></code></a></p></td>
<td><p>Logbox widget</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="web-application-related">
<h5>Web application related<a class="headerlink" href="#web-application-related" title="永久链接至标题">¶</a></h5>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Function name</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio_battery.get_all_query" title="pywebio_battery.get_all_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all_query</span></code></a>, <a class="reference internal" href="#pywebio_battery.get_query" title="pywebio_battery.get_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_query</span></code></a></p></td>
<td><p>Get URL parameter</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pywebio_battery.set_localstorage" title="pywebio_battery.set_localstorage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_localstorage</span></code></a>, <a class="reference internal" href="#pywebio_battery.get_localstorage" title="pywebio_battery.get_localstorage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_localstorage</span></code></a></p></td>
<td><p>User browser storage</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pywebio_battery.set_cookie" title="pywebio_battery.set_cookie"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_cookie</span></code></a>, <a class="reference internal" href="#pywebio_battery.get_cookie" title="pywebio_battery.get_cookie"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_cookie</span></code></a></p></td>
<td><p>Web Cookie</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">login</span></code></p></td>
<td><p>Authentication</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt id="pywebio_battery.confirm">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">confirm</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/interaction.html#confirm"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.confirm" title="永久链接至目标">¶</a></dt>
<dd><p>Show a confirmation modal.</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – Model title.</p></li>
<li><p><strong>content</strong> (<em>list/put_xxx</em><em>(</em><em>)</em>) – Model content.</p></li>
<li><p><strong>timeout</strong> (<em>None/float</em>) – Seconds for operation time out.</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>Return <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> when the “CONFIRM” button is clicked,
return <code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code> when the “CANCEL” button is clicked,
return <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> when a timeout is given and the operation times out.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.popup_input">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">popup_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Please</span> <span class="pre">fill</span> <span class="pre">out</span> <span class="pre">the</span> <span class="pre">form</span> <span class="pre">below'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/interaction.html#popup_input"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.popup_input" title="永久链接至目标">¶</a></dt>
<dd><p>Show a form in popup window.</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pins</strong> (<em>list</em>) – pin output list.</p></li>
<li><p><strong>title</strong> (<em>str</em>) – model title.</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>return the form value as dict, return None when user cancel the form.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.redirect_stdout">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">redirect_stdout</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">output_func=functools.partial(&lt;function</span> <span class="pre">put_text&gt;</span></em>, <em class="sig-param"><span class="pre">inline=True)</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/interaction.html#redirect_stdout"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.redirect_stdout" title="永久链接至目标">¶</a></dt>
<dd><p>Context manager for temporarily redirecting stdout to pywebio.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">redirect_stdout</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello world.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.run_shell">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">run_shell</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cmd</span></em>, <em class="sig-param"><span class="pre">output_func=functools.partial(&lt;function</span> <span class="pre">put_text&gt;</span></em>, <em class="sig-param"><span class="pre">inline=True)</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/interaction.html#run_shell"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.run_shell" title="永久链接至目标">¶</a></dt>
<dd><p>Run command in shell and output the result to pywebio</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.put_logbox">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">put_logbox</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_bottom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pywebio.io_ctrl.Output</span><a class="reference internal" href="_modules/pywebio_battery/interaction.html#put_logbox"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.put_logbox" title="永久链接至目标">¶</a></dt>
<dd><p>Output a logbox widget</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="n">put_logbox</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">logbox_append</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – the name of the widget, must unique in session-wide.</p></li>
<li><p><strong>height</strong> (<em>int</em>) – the height of the widget in pixel</p></li>
<li><p><strong>keep_bottom</strong> (<em>bool</em>) – Whether to scroll to bottom when new content is appended
(via <a class="reference internal" href="#pywebio_battery.logbox_append" title="pywebio_battery.logbox_append"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logbox_append()</span></code></a>).</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">在 0.3 版更改: </span>add <code class="docutils literal notranslate"><span class="pre">keep_bottom</span></code> parameter</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.logbox_append">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">logbox_append</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/interaction.html#logbox_append"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.logbox_append" title="永久链接至目标">¶</a></dt>
<dd><p>Append text to a logbox widget</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.get_all_query">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">get_all_query</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/web.html#get_all_query"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.get_all_query" title="永久链接至目标">¶</a></dt>
<dd><p>Get URL parameter (also known as “query strings” or “URL query parameters”) as a dict</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.get_query">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">get_query</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/web.html#get_query"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.get_query" title="永久链接至目标">¶</a></dt>
<dd><p>Get URL parameter value</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.set_localstorage">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">set_localstorage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/web.html#set_localstorage"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.set_localstorage" title="永久链接至目标">¶</a></dt>
<dd><p>Save data to user’s web browser</p>
<p>The data is specific to the origin (protocol+domain+port) of the app.
Different origins use different web browser local storage.</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the key you want to create/update.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – the value you want to give the key you are creating/updating.</p></li>
</ul>
</dd>
</dl>
<p>You can read the value by using <a class="reference internal" href="#pywebio_battery.get_localstorage" title="pywebio_battery.get_localstorage"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_localstorage(key)</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.get_localstorage">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">get_localstorage</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="_modules/pywebio_battery/web.html#get_localstorage"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.get_localstorage" title="永久链接至目标">¶</a></dt>
<dd><p>Get the key’s value in user’s web browser local storage</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.set_cookie">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">set_cookie</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">days</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/web.html#set_cookie"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.set_cookie" title="永久链接至目标">¶</a></dt>
<dd><p>Set cookie</p>
</dd></dl>

<dl class="py function">
<dt id="pywebio_battery.get_cookie">
<code class="sig-prename descclassname"><span class="pre">pywebio_battery.</span></code><code class="sig-name descname"><span class="pre">get_cookie</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pywebio_battery/web.html#get_cookie"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#pywebio_battery.get_cookie" title="永久链接至目标">¶</a></dt>
<dd><p>Get cookie</p>
</dd></dl>

</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-spec"></span><div class="section" id="server-client-communication-protocol">
<h3>服务器-客户端通信协议<a class="headerlink" href="#server-client-communication-protocol" title="永久链接至标题">¶</a></h3>
<p>PyWebIO采用服务器-客户端架构，服务端运行任务代码，通过网络与客户端（也就是用户浏览器）交互。本章介绍PyWebIO服务端与客户端通信的协议。</p>
<p>服务器与客户端有两种通信方式：WebSocket 和 Http 通信。</p>
<p>使用 Tornado或aiohttp 后端时，服务器与客户端通过 WebSocket 通信，使用 Flask或Django 后端时，服务器与客户端通过 Http 通信。</p>
<p><strong>WebSocket 通信：</strong></p>
<p>服务器与客户端通过WebSocket连接发送json序列化之后的PyWebIO消息</p>
<p><strong>Http 通信：</strong></p>
<ul class="simple">
<li><p>The client polls the backend through Http GET requests, and the backend returns a list of PyWebIO messages serialized in json</p></li>
<li><p>When the user submits the form or clicks the button, the client submits data to the backend through Http POST request</p></li>
</ul>
<p>为方便区分，下文将由服务器向客户端发送的数据称作command，将客户端发向服务器的数据称作event</p>
<p>以下介绍command和event的格式</p>
<div class="section" id="command">
<h4>Command<a class="headerlink" href="#command" title="永久链接至标题">¶</a></h4>
<p>command由服务器-&gt;客户端，基本格式为:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="s2">&quot;task_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="s2">&quot;spec&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>各字段含义如下:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">command</span></code> 字段表示指令名</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">task_id</span></code> 字段表示发送指令的Task id，客户端对于此命令的响应事件都会传递 task_id</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spec</span></code> 字段为指令的参数，不同指令参数不同</p></li>
</ul>
</div></blockquote>
<p>需要注意，以下不同命令的参数和 PyWebIO 的对应函数的参数大部分含义一致，但是也有些许不同。</p>
<p>以下分别对不同指令的 <code class="docutils literal notranslate"><span class="pre">spec</span></code> 字段进行说明：</p>
<div class="section" id="input-group">
<h5>input_group<a class="headerlink" href="#input-group" title="永久链接至标题">¶</a></h5>
<p>显示一个输入表单</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">spec</span></code> 可用字段</span><a class="headerlink" href="#id1" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>是否必选</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>字段说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>label</p></td>
<td><p>False</p></td>
<td><p>str</p></td>
<td><p>表单标题</p></td>
</tr>
<tr class="row-odd"><td><p>inputs</p></td>
<td><p>True</p></td>
<td><p>list</p></td>
<td><p>输入项</p></td>
</tr>
<tr class="row-even"><td><p>cancelable</p></td>
<td><p>False</p></td>
<td><p>bool</p></td>
<td><div class="line-block">
<div class="line">表单是否可以取消</div>
<div class="line">若 <code class="docutils literal notranslate"><span class="pre">cancelable=True</span></code> 则会在表单底部显示一个”取消”按钮，</div>
<div class="line">用户点击取消按钮后，触发 <code class="docutils literal notranslate"><span class="pre">from_cancel</span></code> 事件</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">inputs</span></code> 字段为输入项组成的列表，每一输入项为一个 <code class="docutils literal notranslate"><span class="pre">dict</span></code>，字段如下：</p>
<ul class="simple">
<li><p>label: 输入标签名。必选</p></li>
<li><p>type: 输入类型。必选</p></li>
<li><p>name: 输入项id。必选</p></li>
<li><p>onchange: bool, whether to push input value when input change</p></li>
<li><p>onbulr: bool, whether to push input value when input field <code class="xref py py-obj docutils literal notranslate"><span class="pre">onblur</span></code></p></li>
<li><p>auto_focus: 自动获取输入焦点. 输入项列表中最多只能由一项的auto_focus为真</p></li>
<li><p>help_text: 帮助文字</p></li>
<li><p>输入项HTML元素额外的HTML属性</p></li>
<li><p>Other attributes of different input types</p></li>
</ul>
<p>输入类型目前有：</p>
<ul class="simple">
<li><p>text: 文本输入</p></li>
<li><p>number: 数字输入</p></li>
<li><p>password: 密码输入</p></li>
<li><p>checkbox: 多选项</p></li>
<li><p>radio: 单选项</p></li>
<li><p>select: 下拉选择框(可单选/多选)</p></li>
<li><p>textarea: 大段文本输入</p></li>
<li><p>file: 文件上传</p></li>
<li><p>actions: Actions selection.</p></li>
</ul>
<p>输入类型与html输入元素的对应关系:</p>
<ul class="simple">
<li><p>text: input[type=text]</p></li>
<li><p>number: input[type=number]</p></li>
<li><p>float: input[type=text], and transform input value to float</p></li>
<li><p>password: input[type=password]</p></li>
<li><p>checkbox: input[type=checkbox]</p></li>
<li><p>radio: input[type=radio]</p></li>
<li><p>select: select  <a class="reference external" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/select">https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/select</a></p></li>
<li><p>textarea: textarea  <a class="reference external" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea">https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/textarea</a></p></li>
<li><p>file: input[type=file]</p></li>
<li><p>actions: button[type=submit] <a class="reference external" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/button">https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/button</a></p></li>
</ul>
<p>Unique attributes of different input types:</p>
<ul>
<li><p>text,number,password:</p>
<ul class="simple">
<li><p>action: Display a button on the right of the input field.
The format of <code class="docutils literal notranslate"><span class="pre">action</span></code> is <code class="docutils literal notranslate"><span class="pre">{label:</span> <span class="pre">button</span> <span class="pre">label,</span> <span class="pre">callback_id:</span> <span class="pre">button</span> <span class="pre">click</span> <span class="pre">callback</span> <span class="pre">id}</span></code></p></li>
</ul>
</li>
<li><p>textarea:</p>
<ul class="simple">
<li><p>code: Codemirror参数 或 bool, 同 <a class="reference internal" href="index.html#pywebio.input.textarea" title="pywebio.input.textarea"><code class="xref py py-func docutils literal notranslate"><span class="pre">pywebio.input.textarea()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">code</span></code> 参数</p></li>
</ul>
</li>
<li><p>select：</p>
<ul class="simple">
<li><p>options: <code class="docutils literal notranslate"><span class="pre">{label:,</span> <span class="pre">value:</span> <span class="pre">,</span> <span class="pre">[selected:,]</span> <span class="pre">[disabled:]}</span></code></p></li>
</ul>
</li>
<li><p>checkbox:</p>
<ul class="simple">
<li><p>options: <code class="docutils literal notranslate"><span class="pre">{label:,</span> <span class="pre">value:</span> <span class="pre">,</span> <span class="pre">[selected:,]</span> <span class="pre">[disabled:]}</span></code></p></li>
<li><p>inline</p></li>
</ul>
</li>
<li><p>radio:</p>
<ul class="simple">
<li><p>options: <code class="docutils literal notranslate"><span class="pre">{label:,</span> <span class="pre">value:</span> <span class="pre">,</span> <span class="pre">[selected:,]</span> <span class="pre">[disabled:]}</span></code></p></li>
<li><p>inline</p></li>
</ul>
</li>
<li><p>actions</p>
<ul class="simple">
<li><p>buttons: <code class="docutils literal notranslate"><span class="pre">{label:,</span> <span class="pre">value:,</span> <span class="pre">[type:</span> <span class="pre">'submit'/'reset'/'cancel'],</span> <span class="pre">[disabled:],</span> <span class="pre">[color:]}</span></code> .</p></li>
</ul>
</li>
<li><p>file:</p>
<blockquote>
<div><ul class="simple">
<li><p>是否允许多文件上传</p></li>
<li><p>单个文件的最大大小（字节），超过限制将会禁止上传</p></li>
<li><p>所有文件的最大大小（字节），超过限制将会禁止上传</p></li>
</ul>
</div></blockquote>
</li>
<li><p>slider</p>
<blockquote>
<div><ul class="simple">
<li><p>min_value: The minimum permitted value.</p></li>
<li><p>max_value: The maximum permitted value.</p></li>
<li><p>step: The stepping interval.</p></li>
<li><p>float: If need return a float value</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="update-input">
<h5>update_input<a class="headerlink" href="#update-input" title="永久链接至标题">¶</a></h5>
<p>更新输入项，用于对当前显示表单中输入项的 <code class="docutils literal notranslate"><span class="pre">spec</span></code> 进行更新</p>
<p>命令 <code class="docutils literal notranslate"><span class="pre">spec</span></code> 可用字段：</p>
<ul class="simple">
<li><p>target_name: str The name of the target input item.</p></li>
<li><p>target_value: str, optional. Used to filter item in checkbox, radio</p></li>
<li><p>attributes: dist, fields need to be updated</p>
<ul>
<li><p>valid_status: When it is bool, it means setting the state of the input value, pass/fail; when it is 0, it means clear the valid_status flag</p></li>
<li><p>value: Set the value of the item</p></li>
<li><p>label</p></li>
<li><p>placeholder</p></li>
<li><p>invalid_feedback</p></li>
<li><p>valid_feedback</p></li>
<li><p>help_text</p></li>
<li><p>options: only available in checkbox, radio and select type</p></li>
<li><p>other fields of item’s <code class="docutils literal notranslate"><span class="pre">spec</span></code> // not support the <code class="docutils literal notranslate"><span class="pre">inline</span></code> field</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="close-session">
<h5>close_session<a class="headerlink" href="#close-session" title="永久链接至标题">¶</a></h5>
<p>指示服务器端已经关闭连接。 <code class="docutils literal notranslate"><span class="pre">spec</span></code> 为空</p>
</div>
<div class="section" id="set-session-id">
<h5>set_session_id<a class="headerlink" href="#set-session-id" title="永久链接至标题">¶</a></h5>
<p>将当前会话id发送至客户端，客户端可以使用此id来重连会话(仅在websocket连接中可用)。 <code class="docutils literal notranslate"><span class="pre">spec</span></code> 字段为会话id</p>
</div>
<div class="section" id="destroy-form">
<h5>destroy_form<a class="headerlink" href="#destroy-form" title="永久链接至标题">¶</a></h5>
<p>Destroy the current form. <code class="docutils literal notranslate"><span class="pre">spec</span></code> of the command is empty.</p>
<p>表单在页面上提交之后不会自动销毁，需要使用此命令显式销毁</p>
</div>
<div class="section" id="output">
<h5>output<a class="headerlink" href="#output" title="永久链接至标题">¶</a></h5>
<p>Output content</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spec</span></code> fields of <code class="docutils literal notranslate"><span class="pre">output</span></code> commands:</p>
<ul class="simple">
<li><p>type: content type</p></li>
<li><p>style: str, Additional css style</p></li>
<li><p>container_selector: The css selector of output widget’s content slot. If empty(default), use widget self as container</p></li>
<li><p>container_dom_id: The dom id need to be set to output widget’s content slot.</p></li>
<li><p>scope: str, 内容输出的域的css选择器。若CSS选择器匹配到页面上的多个容器，则内容会输出到每个匹配到的容器</p></li>
<li><p>int, 在输出域中输出的位置, 见 <a class="reference internal" href="index.html#scope-param"><span class="std std-ref">输出函数的scope相关参数</span></a></p></li>
<li><p>click_callback_id:</p></li>
<li><p>不同type时的特有字段</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">container_selector</span></code> and <code class="docutils literal notranslate"><span class="pre">container_dom_id</span></code> is used to implement output context manager.</p>
<p><code class="docutils literal notranslate"><span class="pre">type</span></code> 的可选值及特有字段：</p>
<ul class="simple">
<li><p>type: markdown</p>
<ul>
<li><p>content: str</p></li>
<li><p>options: dict, <a class="reference external" href="https://github.com/markedjs/marked">marked.js</a> options</p></li>
<li><p>sanitize: bool, 是否使用 <a class="reference external" href="https://github.com/cure53/DOMPurify">DOMPurify</a> 对内容进行过滤来防止XSS攻击。</p></li>
</ul>
</li>
<li><p>type: html</p>
<ul>
<li><p>content: str</p></li>
<li><p>sanitize: bool, 是否使用 <a class="reference external" href="https://github.com/cure53/DOMPurify">DOMPurify</a> 对内容进行过滤来防止XSS攻击。</p></li>
</ul>
</li>
<li><p>type: text</p>
<ul>
<li><p>content: str</p></li>
<li><p>inline: bool, Use text as an inline element (no line break at the end of the text)</p></li>
</ul>
</li>
<li><p>type: buttons</p>
<ul>
<li><p>callback_id:</p></li>
<li><p>buttons:[ {value:, label:, [color:], [disabled:]},…]</p></li>
<li><p>small: bool，是否显示为小按钮样式</p></li>
<li><p>group: bool, Whether to group the buttons together</p></li>
<li><p>link: bool，是否显示为链接样式</p></li>
<li><p>outline: bool, Whether enable outline style.</p></li>
</ul>
</li>
<li><p>type: file</p>
<ul>
<li><p>name: 下载保存为的文件名</p></li>
<li><p>content: 文件base64编码的内容</p></li>
</ul>
</li>
<li><p>type: table</p>
<ul>
<li><p>data: Table data, which is a two-dimensional list, the first row is table header.</p></li>
<li><p>span: cell span info. Format: {“[row id],[col id]”: {“row”:row span, “col”:col span }}</p></li>
</ul>
</li>
<li><p>type: pin</p>
<ul>
<li><p>input: input spec, same as the item of <code class="docutils literal notranslate"><span class="pre">input_group.inputs</span></code></p></li>
</ul>
</li>
<li><p>type: scope</p>
<ul>
<li><p>dom_id: the DOM id need to be set to this widget</p></li>
<li><p>contents list: list of output spec</p></li>
</ul>
</li>
<li><p>type: scrollable</p>
<ul>
<li><p>contents:</p></li>
<li><p>min_height:</p></li>
<li><p>max_height:</p></li>
<li><p>keep_bottom:</p></li>
<li><p>border:</p></li>
</ul>
</li>
<li><p>type: tabs</p>
<ul>
<li><p>tabs:</p></li>
</ul>
</li>
<li><p>type: custom_widget</p>
<ul>
<li><p>template:</p></li>
<li><p>data:</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="pin-value">
<h5>pin_value<a class="headerlink" href="#pin-value" title="永久链接至标题">¶</a></h5>
<p>命令 <code class="docutils literal notranslate"><span class="pre">spec</span></code> 可用字段：</p>
<ul class="simple">
<li><p>name</p></li>
</ul>
</div>
<div class="section" id="pin-update">
<h5>pin_update<a class="headerlink" href="#pin-update" title="永久链接至标题">¶</a></h5>
<p>命令 <code class="docutils literal notranslate"><span class="pre">spec</span></code> 可用字段：</p>
<ul class="simple">
<li><p>name</p></li>
<li><p>attributes: dist, fields need to be updated</p></li>
</ul>
</div>
<div class="section" id="pin-wait">
<h5>pin_wait<a class="headerlink" href="#pin-wait" title="永久链接至标题">¶</a></h5>
<p>命令 <code class="docutils literal notranslate"><span class="pre">spec</span></code> 可用字段：</p>
<ul class="simple">
<li><p>names: list,</p></li>
<li><p>timeout: int,</p></li>
</ul>
</div>
<div class="section" id="pin-onchange">
<h5>pin_onchange<a class="headerlink" href="#pin-onchange" title="永久链接至标题">¶</a></h5>
<p>set a callback which is invoked when the value of pin widget is changed</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spec</span></code> fields of <code class="docutils literal notranslate"><span class="pre">pin_onchange</span></code> commands:</p>
<ul class="simple">
<li><p>name: string</p></li>
<li><p>callback_id: string, if <code class="docutils literal notranslate"><span class="pre">None</span></code>, not set callback</p></li>
<li><p>clear: bool</p></li>
</ul>
</div>
<div class="section" id="popup">
<h5>popup<a class="headerlink" href="#popup" title="永久链接至标题">¶</a></h5>
<p>Show popup</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spec</span></code> fields of <code class="docutils literal notranslate"><span class="pre">popup</span></code> commands:</p>
<ul class="simple">
<li><p>title</p></li>
<li><p>content</p></li>
<li><p>size: <code class="docutils literal notranslate"><span class="pre">large</span></code>, <code class="docutils literal notranslate"><span class="pre">normal</span></code>, <code class="docutils literal notranslate"><span class="pre">small</span></code></p></li>
<li><p>implicit_close</p></li>
<li><p>closable</p></li>
<li><p>dom_id: DOM id of popup container element</p></li>
</ul>
</div>
<div class="section" id="toast">
<h5>toast<a class="headerlink" href="#toast" title="永久链接至标题">¶</a></h5>
<p>Show a notification message</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spec</span></code> fields of <code class="docutils literal notranslate"><span class="pre">popup</span></code> commands:</p>
<ul class="simple">
<li><p>content</p></li>
<li><p>duration</p></li>
<li><p>position: <code class="xref py py-obj docutils literal notranslate"><span class="pre">'left'</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">'center'</span></code> / <code class="xref py py-obj docutils literal notranslate"><span class="pre">'right'</span></code></p></li>
<li><p>color: hexadecimal color value starting with ‘#’</p></li>
<li><p>callback_id</p></li>
</ul>
</div>
<div class="section" id="close-popup">
<h5>close_popup<a class="headerlink" href="#close-popup" title="永久链接至标题">¶</a></h5>
<p>Close the current popup window.</p>
<p><code class="docutils literal notranslate"><span class="pre">spec</span></code> of the command is empty.</p>
</div>
<div class="section" id="set-env">
<h5>set_env<a class="headerlink" href="#set-env" title="永久链接至标题">¶</a></h5>
<p>Config the environment of current session.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spec</span></code> fields of <code class="docutils literal notranslate"><span class="pre">set_env</span></code> commands:</p>
<ul class="simple">
<li><p>title (str)</p></li>
<li><p>output_animation (bool)</p></li>
<li><p>auto_scroll_bottom (bool)</p></li>
<li><p>http_pull_interval (int)</p></li>
<li><p>input_panel_fixed (bool)</p></li>
<li><p>input_panel_min_height (int)</p></li>
<li><p>input_panel_init_height (int)</p></li>
<li><p>input_auto_focus (bool)</p></li>
</ul>
</div>
<div class="section" id="output-ctl">
<h5>output_ctl<a class="headerlink" href="#output-ctl" title="永久链接至标题">¶</a></h5>
<p>Output control</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spec</span></code> fields of <code class="docutils literal notranslate"><span class="pre">output_ctl</span></code> commands:</p>
<ul>
<li><p>set_scope: scope name</p>
<blockquote>
<div><ul>
<li><p>container: 新创建的scope的父scope的css选择器</p></li>
<li><p>position: int, 在父scope中创建此scope的位置.</p></li>
<li><p>scope已经存在时如何操作:</p>
<blockquote>
<div><ul class="simple">
<li><p>null/不指定: 表示立即返回不进行任何操作</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">’remove’</span></code> : 先移除旧scope再创建新scope</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">’clear’</span></code> : 将旧scope的内容清除，不创建新scope</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>clear: 需要清空的scope的css选择器</p></li>
<li><p>clear_before</p></li>
<li><p>clear_after</p></li>
<li><p>clear_range:[,]</p></li>
<li><dl class="simple">
<dt>scroll_to</dt><dd><ul class="simple">
<li><p>position: top/middle/bottom 与scroll_to一起出现, 表示滚动页面，让scope位于屏幕可视区域顶部/中部/底部</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>remove: 将给定的scope连同scope处的内容移除</p></li>
</ul>
</div>
<div class="section" id="run-script">
<h5>run_script<a class="headerlink" href="#run-script" title="永久链接至标题">¶</a></h5>
<p>run javascript code in user’s browser</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spec</span></code> fields of <code class="docutils literal notranslate"><span class="pre">run_script</span></code> commands:</p>
<ul class="simple">
<li><p>code: 字符串格式的要运行的js代码</p></li>
<li><p>args: 传递给代码的局部变量。字典类型，字典键表示变量名，字典值表示变量值(变量值需要可以被json序列化)</p></li>
<li><p>eval: bool, whether to submit the return value of javascript code</p></li>
</ul>
</div>
<div class="section" id="download">
<h5>download<a class="headerlink" href="#download" title="永久链接至标题">¶</a></h5>
<p>Send file to user</p>
<p>The <code class="docutils literal notranslate"><span class="pre">spec</span></code> fields of <code class="docutils literal notranslate"><span class="pre">download</span></code> commands:</p>
<ul class="simple">
<li><p>name: str, File name when downloading</p></li>
<li><p>content: str, File content in base64 encoding.</p></li>
</ul>
</div>
</div>
<div class="section" id="event">
<h4>Event<a class="headerlink" href="#event" title="永久链接至标题">¶</a></h4>
<p>Event消息由客户端发往服务端。基本格式:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">event</span><span class="p">:</span> <span class="n">event</span> <span class="n">name</span>
    <span class="n">task_id</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">object</span><span class="o">/</span><span class="nb">str</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">event</span></code> 表示事件名称。 <code class="docutils literal notranslate"><span class="pre">data</span></code> 为事件所携带的数据，其根据事件不同内容也会不同，不同事件对应的 <code class="docutils literal notranslate"><span class="pre">data</span></code> 字段如下:</p>
<div class="section" id="input-event">
<h5>input_event<a class="headerlink" href="#input-event" title="永久链接至标题">¶</a></h5>
<p>表单发生更改时触发</p>
<ul class="simple">
<li><p>event_name: 目前可用值 <code class="docutils literal notranslate"><span class="pre">’blur’</span></code>，表示输入项失去焦点</p></li>
<li><p>name: 输入项name</p></li>
<li><p>value: 输入项值</p></li>
</ul>
<p>注意： checkbox radio 不产生blur事件</p>
</div>
<div class="section" id="callback">
<span id="callback-event"></span><h5>callback<a class="headerlink" href="#callback" title="永久链接至标题">¶</a></h5>
<p>用户点击显示区的按钮时触发</p>
<p>在 <code class="docutils literal notranslate"><span class="pre">callback</span></code> 事件中，<code class="docutils literal notranslate"><span class="pre">task_id</span></code> 为对应的 <code class="docutils literal notranslate"><span class="pre">button</span></code> 组件的 <code class="docutils literal notranslate"><span class="pre">callback_id</span></code> 字段；
事件的 <code class="docutils literal notranslate"><span class="pre">data</span></code> 为被点击button的 <code class="docutils literal notranslate"><span class="pre">value</span></code></p>
</div>
<div class="section" id="from-submit">
<h5>from_submit<a class="headerlink" href="#from-submit" title="永久链接至标题">¶</a></h5>
<p>用户提交表单时触发</p>
<p>事件 <code class="docutils literal notranslate"><span class="pre">data</span></code> 字段为表单 <code class="docutils literal notranslate"><span class="pre">name</span></code> -&gt; 表单值 的字典</p>
</div>
<div class="section" id="from-cancel">
<h5>from_cancel<a class="headerlink" href="#from-cancel" title="永久链接至标题">¶</a></h5>
<p>表单取消输入</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> of the event is <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</div>
<div class="section" id="js-yield">
<h5>js_yield<a class="headerlink" href="#js-yield" title="永久链接至标题">¶</a></h5>
<p>submit data from js. It’s a common event to submit data to backend.</p>
<p>事件 <code class="docutils literal notranslate"><span class="pre">data</span></code> 字段为相应的数据</p>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">索引</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">模块索引</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">搜索页面</span></a></p></li>
</ul>
</div>
<div class="section" id="discussion-and-support">
<h2>Discussion and support<a class="headerlink" href="#discussion-and-support" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p>Need help when use PyWebIO? Make a new discussion on <a class="reference external" href="https://github.com/wang0618/PyWebIO/discussions">Github Discussions</a>.</p></li>
<li><p>Report bugs on the <a class="reference external" href="https://github.com/wang0618/pywebio/issues">GitHub issue</a>.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Weimin Wang
      
        <span class="commit">
          Revision <code>f137c414</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/zh_CN/latest/">latest</a></dd>
        
          <dd><a href="/zh_CN/v1.6.1/">v1.6.1</a></dd>
        
          <dd><a href="/zh_CN/v1.6.0/">v1.6.0</a></dd>
        
          <dd><a href="/zh_CN/v1.5.2/">v1.5.2</a></dd>
        
          <dd><a href="/zh_CN/v1.5.1/">v1.5.1</a></dd>
        
          <dd><a href="/zh_CN/v1.5.0/">v1.5.0</a></dd>
        
          <dd><a href="/zh_CN/v1.4.0/">v1.4.0</a></dd>
        
          <dd><a href="/zh_CN/v1.3.3/">v1.3.3</a></dd>
        
          <dd><a href="/zh_CN/v1.3.2/">v1.3.2</a></dd>
        
          <dd><a href="/zh_CN/v1.3.1/">v1.3.1</a></dd>
        
          <dd><a href="/zh_CN/v1.3.0/">v1.3.0</a></dd>
        
          <dd><a href="/zh_CN/v1.2.3/">v1.2.3</a></dd>
        
          <dd><a href="/zh_CN/v1.2.2/">v1.2.2</a></dd>
        
          <dd><a href="/zh_CN/v1.1.0/">v1.1.0</a></dd>
        
          <dd><a href="/zh_CN/v1.0.3/">v1.0.3</a></dd>
        
          <dd><a href="/zh_CN/v0.3.0/">v0.3.0</a></dd>
        
          <dd><a href="/zh_CN/dev/">dev</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//pywebio.readthedocs.io/_/downloads/zh_CN/latest/pdf/">pdf</a></dd>
        
          <dd><a href="//pywebio.readthedocs.io/_/downloads/zh_CN/latest/htmlzip/">html</a></dd>
        
          <dd><a href="//pywebio.readthedocs.io/_/downloads/zh_CN/latest/epub/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/pywebio-zh-cn/?fromdocs=pywebio-zh-cn">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/pywebio-zh-cn/?fromdocs=pywebio-zh-cn">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>